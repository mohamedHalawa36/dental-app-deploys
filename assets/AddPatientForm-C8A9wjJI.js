import{r as c,l as e}from"./chunk-SYFQ2XB5-Y8KprK8j.js";import{c as O,u as B,d as K,P as I,a as N,b as H,e as L,f as V,C as T,h as W,i as X,j as k,k as G,l as _,m as J,F as Q,n as U,o as C,p as Y,q as Z,W as ee}from"./sonner-Dss5HlGm.js";import{v as R,z as te}from"./utils-DOddNwIy.js";var w="Checkbox",[se,he]=O(w),[ae,ne]=se(w),F=c.forwardRef((t,a)=>{const{__scopeCheckbox:s,name:r,checked:i,defaultChecked:o,required:m,disabled:u,value:x="on",onCheckedChange:v,form:h,...g}=t,[d,b]=c.useState(null),j=B(a,n=>b(n)),y=c.useRef(!1),E=d?h||!!d.closest("form"):!0,[p=!1,P]=K({prop:i,defaultProp:o,onChange:v}),D=c.useRef(p);return c.useEffect(()=>{const n=d==null?void 0:d.form;if(n){const f=()=>P(D.current);return n.addEventListener("reset",f),()=>n.removeEventListener("reset",f)}},[d,P]),e.jsxs(ae,{scope:s,state:p,disabled:u,children:[e.jsx(I.button,{type:"button",role:"checkbox","aria-checked":l(p)?"mixed":p,"aria-required":m,"data-state":M(p),"data-disabled":u?"":void 0,disabled:u,value:x,...g,ref:j,onKeyDown:N(t.onKeyDown,n=>{n.key==="Enter"&&n.preventDefault()}),onClick:N(t.onClick,n=>{P(f=>l(f)?!0:!f),E&&(y.current=n.isPropagationStopped(),y.current||n.stopPropagation())})}),E&&e.jsx(re,{control:d,bubbles:!y.current,name:r,value:x,checked:p,required:m,disabled:u,form:h,style:{transform:"translateX(-100%)"},defaultChecked:l(o)?!1:o})]})});F.displayName=w;var $="CheckboxIndicator",q=c.forwardRef((t,a)=>{const{__scopeCheckbox:s,forceMount:r,...i}=t,o=ne($,s);return e.jsx(H,{present:r||l(o.state)||o.state===!0,children:e.jsx(I.span,{"data-state":M(o.state),"data-disabled":o.disabled?"":void 0,...i,ref:a,style:{pointerEvents:"none",...t.style}})})});q.displayName=$;var re=t=>{const{control:a,checked:s,bubbles:r=!0,defaultChecked:i,...o}=t,m=c.useRef(null),u=L(s),x=V(a);c.useEffect(()=>{const h=m.current,g=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(g,"checked").set;if(u!==s&&b){const j=new Event("click",{bubbles:r});h.indeterminate=l(s),b.call(h,l(s)?!1:s),h.dispatchEvent(j)}},[u,s,r]);const v=c.useRef(l(s)?!1:s);return e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i??v.current,...o,tabIndex:-1,ref:m,style:{...t.style,...x,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function l(t){return t==="indeterminate"}function M(t){return l(t)?"indeterminate":t?"checked":"unchecked"}var z=F,oe=q;const A=c.forwardRef(({className:t,...a},s)=>e.jsx(z,{ref:s,className:R("peer size-5 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...a,children:e.jsx(oe,{className:R("flex items-center justify-center text-current"),children:e.jsx(T,{className:"h-4 w-4"})})}));A.displayName=z.displayName;function ce(t){const a=W({...t}),s=a[0].checked,r=a[2].setValue;return e.jsx(A,{checked:s,onCheckedChange:i=>{r(i)},...t,...a})}const ie=X({name:k().required("مطلوب"),age:G().typeError("أرقام فقط").required("مطلوب").min(3,"العمر غير صحيح").max(120,"العمر غير صحيح"),address:k(),phone1:k().typeError("أرقام فقط").required("مطلوب").matches(/^01[0-25]\d{8}$/,"رقم غير صحيح"),phone1_has_whatsapp:_(),phone2:k().typeError("أرقام فقط").matches(/^01[0-25]\d{8}$/,"رقم غير صحيح"),phone2_has_whatsapp:_().required("مطلوب")});function pe({setIsOpen:t,refetch:a}){const{mutate:s,isPending:r}=J({mutationFn:Z,onSuccess:()=>{t(!1),a()}});return e.jsx("div",{className:"h-full overflow-auto px-2",children:e.jsx(Q,{initialValues:{name:"",age:"",address:"",phone1:"",phone1_has_whatsapp:!1,phone2:"",phone2_has_whatsapp:!1},validationSchema:ie,onSubmit:i=>s(i),children:e.jsxs(U,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-8 max-md:grid-cols-1 max-md:gap-8 overflow-auto",children:[e.jsx(C,{label:"الاسم",name:"name"}),e.jsx(C,{onKeyDown:te,label:"العمر",name:"age",inputMode:"numeric"}),e.jsx(S,{label:"رقم الهاتف",name:"phone1",onChange:()=>{}}),e.jsx(S,{label:"رقم هاتف آخر (اختياري)",name:"phone2",onChange:()=>{}}),e.jsx(C,{label:"العنوان (اختياري)",name:"address"})]}),e.jsx(Y,{label:"إضافة",disabled:r})]})})})}function S({label:t,name:a}){return e.jsxs("div",{className:"flex gap-2",children:[e.jsx(C,{inputMode:"numeric",pattern:"[0-9]*",label:t,name:a,className:"flex-1 w-full"}),e.jsxs("div",{className:"flex gap-1.5 items-center mt-2",children:[e.jsx(ee,{className:"max-sm:size-5"}),e.jsx(ce,{className:"max-sm:size-4",name:`${a}_has_whatsapp`})]})]})}export{pe as A};
