const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/web-DTRsD0O_.js","assets/useAttachBackBtn-CU9fPmT1.js","assets/chunk-SYFQ2XB5-BeKHOpyI.js","assets/QueryClientProvider-B17BkurY.js"])))=>i.map(i=>d[i]);
var z=t=>{throw TypeError(t)};var J=(t,e,s)=>e.has(t)||z("Cannot "+s);var n=(t,e,s)=>(J(t,e,"read from private field"),s?s.call(t):e.get(t)),l=(t,e,s)=>e.has(t)?z("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),c=(t,e,s,r)=>(J(t,e,"write to private field"),r?r.call(t,s):e.set(t,s),s);var N=(t,e,s,r)=>({set _(a){c(t,e,a,s)},get _(){return n(t,e,r)}});import{s as fe,t as R,_ as pe,S as ue,h as oe,n as d,m as W,M as ge,a as Y,b as y,e as ye,c as me,d as Pe,f as ve,o as X,r as Z,g as be,i as $,p as ee,j as Oe,Q as we,T as Qe,w as Ae,k as Ee}from"./QueryClientProvider-B17BkurY.js";import{r as D,o as Me,n as i,N as te,p as Se,M as je,L as qe,S as xe,q as Ce,O as De,t as Fe}from"./chunk-SYFQ2XB5-BeKHOpyI.js";import{u as ce,P as Le,r as Te,a as ke,A as Ie,b as _e}from"./useAttachBackBtn-CU9fPmT1.js";import{g as he,a as Ke}from"./auth-b4n4nRI-.js";import{Q as Ne}from"./query-VHLG9GXe.js";const Be="/assets/app-BGVKYJ-u.css";function He(){const{setUser:t,user:e}=ce();D.useEffect(()=>{const{data:s}=fe.auth.onAuthStateChange(async(r,a)=>{if(r==="INITIAL_SESSION")return;if(r==="SIGNED_OUT")return t(null);const u=a==null?void 0:a.user;if(!u||u.id===(e==null?void 0:e.id))return;const{data:h,error:P}=await he(u.id);P||t(h)});return()=>s.subscription.unsubscribe()},[])}function Re({children:t}){const[e,s]=D.useState(!0),{user:r,setUser:a}=ce(),{pathname:u}=Me();D.useEffect(()=>{(async()=>{var x;const{data:v,error:L}=await Ke();if(L){a(null),s(!1),R.error("لم نستطع العثور على معلومات المستخدم، برجاء تسجيل الدخول");return}const b=(x=v==null?void 0:v.session)==null?void 0:x.user,T=(b==null?void 0:b.id)===(r==null?void 0:r.id);if(!b)a(null);else if(!T){const{data:k,error:I}=await he(b.id);I||a(k)}s(!1)})()},[]),He();const h=u==="/login";return e?i.jsx(Le,{}):r?h?i.jsx(te,{to:"/",replace:!0}):t:h?t:i.jsx(te,{to:"/login",replace:!0})}const B=()=>{R.dismiss(),navigator.onLine||R.error("No internet connection"),navigator.onLine&&R.success("Connection Restored")},Ue=Te("SplashScreen",{web:()=>pe(()=>import("./web-DTRsD0O_.js"),__vite__mapDeps([0,1,2,3])).then(t=>new t.SplashScreenWeb)});function Ge({children:t}){D.useEffect(()=>(window.addEventListener("online",B),window.addEventListener("offline",B),()=>{window.removeEventListener("online",B),window.removeEventListener("offline",B)}),[]),D.useEffect(()=>{const s=()=>{Ue.hide()};return s(),document.addEventListener("DOMContentLoaded",s),()=>document.removeEventListener("DOMContentLoaded",s)},[]);const e=Se();return ke(({canGoBack:s})=>{const r=document.body;r.querySelector("span[data-radix-focus-guard]")||r.getAttribute("data-scroll-locked")==="1"||(s?e(-1):Ie.minimizeApp())},[]),i.jsx(_e,{children:i.jsx(Re,{children:i.jsx("div",{className:"h-screen w-screen overflow-hidden",children:t})})})}var g,ne,Ve=(ne=class extends ue{constructor(e={}){super();l(this,g);this.config=e,c(this,g,new Map)}build(e,s,r){const a=s.queryKey,u=s.queryHash??oe(a,s);let h=this.get(u);return h||(h=new Ne({cache:this,queryKey:a,queryHash:u,options:e.defaultQueryOptions(s),state:r,defaultOptions:e.getQueryDefaults(a)}),this.add(h)),h}add(e){n(this,g).has(e.queryHash)||(n(this,g).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const s=n(this,g).get(e.queryHash);s&&(e.destroy(),s===e&&n(this,g).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){d.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return n(this,g).get(e)}getAll(){return[...n(this,g).values()]}find(e){const s={exact:!0,...e};return this.getAll().find(r=>W(s,r))}findAll(e={}){const s=this.getAll();return Object.keys(e).length>0?s.filter(r=>W(e,r)):s}notify(e){d.batch(()=>{this.listeners.forEach(s=>{s(e)})})}onFocus(){d.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){d.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},g=new WeakMap,ne),m,p,F,ae,ze=(ae=class extends ue{constructor(e={}){super();l(this,m);l(this,p);l(this,F);this.config=e,c(this,m,new Set),c(this,p,new Map),c(this,F,0)}build(e,s,r){const a=new ge({mutationCache:this,mutationId:++N(this,F)._,options:e.defaultMutationOptions(s),state:r});return this.add(a),a}add(e){n(this,m).add(e);const s=H(e);if(typeof s=="string"){const r=n(this,p).get(s);r?r.push(e):n(this,p).set(s,[e])}this.notify({type:"added",mutation:e})}remove(e){if(n(this,m).delete(e)){const s=H(e);if(typeof s=="string"){const r=n(this,p).get(s);if(r)if(r.length>1){const a=r.indexOf(e);a!==-1&&r.splice(a,1)}else r[0]===e&&n(this,p).delete(s)}}this.notify({type:"removed",mutation:e})}canRun(e){const s=H(e);if(typeof s=="string"){const r=n(this,p).get(s),a=r==null?void 0:r.find(u=>u.state.status==="pending");return!a||a===e}else return!0}runNext(e){var r;const s=H(e);if(typeof s=="string"){const a=(r=n(this,p).get(s))==null?void 0:r.find(u=>u!==e&&u.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){d.batch(()=>{n(this,m).forEach(e=>{this.notify({type:"removed",mutation:e})}),n(this,m).clear(),n(this,p).clear()})}getAll(){return Array.from(n(this,m))}find(e){const s={exact:!0,...e};return this.getAll().find(r=>Y(s,r))}findAll(e={}){return this.getAll().filter(s=>Y(e,s))}notify(e){d.batch(()=>{this.listeners.forEach(s=>{s(e)})})}resumePausedMutations(){const e=this.getAll().filter(s=>s.state.isPaused);return d.batch(()=>Promise.all(e.map(s=>s.continue().catch(y))))}},m=new WeakMap,p=new WeakMap,F=new WeakMap,ae);function H(t){var e;return(e=t.options.scope)==null?void 0:e.id}function se(t){return{onFetch:(e,s)=>{var b,T,x,k,I;const r=e.options,a=(x=(T=(b=e.fetchOptions)==null?void 0:b.meta)==null?void 0:T.fetchMore)==null?void 0:x.direction,u=((k=e.state.data)==null?void 0:k.pages)||[],h=((I=e.state.data)==null?void 0:I.pageParams)||[];let P={pages:[],pageParams:[]},v=0;const L=async()=>{let E=!1;const _=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(e.signal.aborted?E=!0:e.signal.addEventListener("abort",()=>{E=!0}),e.signal)})},le=ye(e.options,e.fetchOptions),U=async(f,O,C)=>{if(E)return Promise.reject();if(O==null&&f.pages.length)return Promise.resolve(f);const K={queryKey:e.queryKey,pageParam:O,direction:C?"backward":"forward",meta:e.options.meta};_(K);const de=await le(K),{maxPages:G}=e.options,V=C?me:Pe;return{pages:V(f.pages,de,G),pageParams:V(f.pageParams,O,G)}};if(a&&u.length){const f=a==="backward",O=f?Je:re,C={pages:u,pageParams:h},K=O(r,C);P=await U(C,K,f)}else{const f=t??u.length;do{const O=v===0?h[0]??r.initialPageParam:re(r,P);if(v>0&&O==null)break;P=await U(P,O),v++}while(v<f)}return P};e.options.persister?e.fetchFn=()=>{var E,_;return(_=(E=e.options).persister)==null?void 0:_.call(E,L,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},s)}:e.fetchFn=L}}}function re(t,{pages:e,pageParams:s}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,s[r],s):void 0}function Je(t,{pages:e,pageParams:s}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,s[0],s):void 0}var o,w,Q,M,S,A,j,q,ie,We=(ie=class{constructor(t={}){l(this,o);l(this,w);l(this,Q);l(this,M);l(this,S);l(this,A);l(this,j);l(this,q);c(this,o,t.queryCache||new Ve),c(this,w,t.mutationCache||new ze),c(this,Q,t.defaultOptions||{}),c(this,M,new Map),c(this,S,new Map),c(this,A,0)}mount(){N(this,A)._++,n(this,A)===1&&(c(this,j,ve.subscribe(async t=>{t&&(await this.resumePausedMutations(),n(this,o).onFocus())})),c(this,q,X.subscribe(async t=>{t&&(await this.resumePausedMutations(),n(this,o).onOnline())})))}unmount(){var t,e;N(this,A)._--,n(this,A)===0&&((t=n(this,j))==null||t.call(this),c(this,j,void 0),(e=n(this,q))==null||e.call(this),c(this,q,void 0))}isFetching(t){return n(this,o).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return n(this,w).findAll({...t,status:"pending"}).length}getQueryData(t){var s;const e=this.defaultQueryOptions({queryKey:t});return(s=n(this,o).get(e.queryHash))==null?void 0:s.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),s=n(this,o).build(this,e),r=s.state.data;return r===void 0?this.fetchQuery(t):(t.revalidateIfStale&&s.isStaleByTime(Z(e.staleTime,s))&&this.prefetchQuery(e),Promise.resolve(r))}getQueriesData(t){return n(this,o).findAll(t).map(({queryKey:e,state:s})=>{const r=s.data;return[e,r]})}setQueryData(t,e,s){const r=this.defaultQueryOptions({queryKey:t}),a=n(this,o).get(r.queryHash),u=a==null?void 0:a.state.data,h=be(e,u);if(h!==void 0)return n(this,o).build(this,r).setData(h,{...s,manual:!0})}setQueriesData(t,e,s){return d.batch(()=>n(this,o).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,s)]))}getQueryState(t){var s;const e=this.defaultQueryOptions({queryKey:t});return(s=n(this,o).get(e.queryHash))==null?void 0:s.state}removeQueries(t){const e=n(this,o);d.batch(()=>{e.findAll(t).forEach(s=>{e.remove(s)})})}resetQueries(t,e){const s=n(this,o),r={type:"active",...t};return d.batch(()=>(s.findAll(t).forEach(a=>{a.reset()}),this.refetchQueries(r,e)))}cancelQueries(t,e={}){const s={revert:!0,...e},r=d.batch(()=>n(this,o).findAll(t).map(a=>a.cancel(s)));return Promise.all(r).then(y).catch(y)}invalidateQueries(t,e={}){return d.batch(()=>{if(n(this,o).findAll(t).forEach(r=>{r.invalidate()}),(t==null?void 0:t.refetchType)==="none")return Promise.resolve();const s={...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"};return this.refetchQueries(s,e)})}refetchQueries(t,e={}){const s={...e,cancelRefetch:e.cancelRefetch??!0},r=d.batch(()=>n(this,o).findAll(t).filter(a=>!a.isDisabled()).map(a=>{let u=a.fetch(void 0,s);return s.throwOnError||(u=u.catch(y)),a.state.fetchStatus==="paused"?Promise.resolve():u}));return Promise.all(r).then(y)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const s=n(this,o).build(this,e);return s.isStaleByTime(Z(e.staleTime,s))?s.fetch(e):Promise.resolve(s.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(y).catch(y)}fetchInfiniteQuery(t){return t.behavior=se(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(y).catch(y)}ensureInfiniteQueryData(t){return t.behavior=se(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return X.isOnline()?n(this,w).resumePausedMutations():Promise.resolve()}getQueryCache(){return n(this,o)}getMutationCache(){return n(this,w)}getDefaultOptions(){return n(this,Q)}setDefaultOptions(t){c(this,Q,t)}setQueryDefaults(t,e){n(this,M).set($(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...n(this,M).values()],s={};return e.forEach(r=>{ee(t,r.queryKey)&&Object.assign(s,r.defaultOptions)}),s}setMutationDefaults(t,e){n(this,S).set($(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...n(this,S).values()];let s={};return e.forEach(r=>{ee(t,r.mutationKey)&&(s={...s,...r.defaultOptions})}),s}defaultQueryOptions(t){if(t._defaulted)return t;const e={...n(this,Q).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=oe(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Oe&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...n(this,Q).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){n(this,o).clear(),n(this,w).clear()}},o=new WeakMap,w=new WeakMap,Q=new WeakMap,M=new WeakMap,S=new WeakMap,A=new WeakMap,j=new WeakMap,q=new WeakMap,ie);function Ye({children:t}){const e=new We({defaultOptions:{queries:{refetchOnWindowFocus:!1}}});return i.jsx(we,{client:e,children:i.jsxs(i.Fragment,{children:[t,i.jsx(Qe,{richColors:!0,position:"top-left",theme:"light",closeButton:!0})]})})}const rt=()=>[{rel:"preconnect",href:"https://fonts.googleapis.com"},{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:"anonymous"},{rel:"stylesheet",href:"https://fonts.googleapis.com/css2?family=Alexandria:wght@100..900&display=swap"},{rel:"stylesheet",href:Be}];function nt({children:t}){return i.jsxs("html",{lang:"ar",dir:"rtl",children:[i.jsxs("head",{children:[i.jsx("meta",{charSet:"utf-8"}),i.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),i.jsx(je,{}),i.jsx(qe,{})]}),i.jsxs("body",{className:"h-screen w-screen",children:[t,i.jsx(xe,{}),i.jsx(Ce,{})]})]})}const at=Ae(function(){return i.jsx(Ye,{children:i.jsx(Ge,{children:i.jsx(De,{})})})}),it=Ee(function({error:e}){let s="Oops!",r="An unexpected error occurred.",a;return Fe(e)&&(s=e.status===404?"404":"Error",r=e.status===404?"The requested page could not be found.":e.statusText||r),i.jsxs("main",{className:"container mx-auto p-4 pt-16",children:[i.jsx("h1",{children:s}),i.jsx("p",{children:r}),a]})});export{it as ErrorBoundary,nt as Layout,at as default,rt as links};
