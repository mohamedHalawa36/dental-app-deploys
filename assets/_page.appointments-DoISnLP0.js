import{w as v,r as C,p as t}from"./chunk-PVWAREVJ-DAoB9U7O.js";import{u as E,R as T}from"./RenderData-CYTe3UVr.js";import{C as w,P as I,a as R,g as _,b}from"./PatientCard-Dm3y6D6Q.js";import{D as F}from"./DatePicker-Bm0JmpHy.js";import{D as S}from"./Calendar-DJj5XBUN.js";import{u as q,B as k,C as c}from"./QueryClientProvider-D8tzuESK.js";import{u as z}from"./usePageContext-D3j3abi8.js";import"./query-ChmUlf2E.js";import"./X-CTHKRN_i.js";import"./PageLoader-CyDSEzCM.js";import"./Delete-CxpYUATw.js";import"./Modal-DIgg9v5H.js";import"./index.esm-C3qyIEbc.js";import"./InputField-6TQYouxC.js";import"./Input-BvMYqO-D.js";import"./input-C6m9RNVH.js";import"./Pencil-BtnxADMP.js";import"./time-CDh3KrcT.js";import"./patient-CzicXjoZ.js";import"./ConfirmModal-Dwz3wsMH.js";import"./label-DWvZDU_2.js";import"./PageContext-CzIsZXuJ.js";import"./button-B64c6vHl.js";const nt=v(function(){const[o,l]=C.useState(new Date),{search:a}=z(),{isDoctor:d,isAdmin:x,userId:f}=q(),u=d&&!x,{isFetching:h,data:m,isError:g}=E({queryKey:["appointments",a,o],queryFn:({signal:s})=>u?_({search:a,date:c(o),doctorId:f},s):b({search:a,date:c(o)},s)}),r=(m==null?void 0:m.data)??[],e=a?r==null?void 0:r.filter(s=>!!s.patient):r,j=e.length===0,D=[...new Set(e.map(s=>s.doctor.name))];return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"flex h-full flex-col gap-2 py-5",children:[t.jsx("div",{className:"w-fit",children:t.jsx(F,{granularity:"day",value:o,onChange:l,className:"border-none p-0 text-lg font-medium max-sm:ms-2"})}),t.jsx(T,{isEmpty:j,isFetching:h,isError:g,children:t.jsx("div",{className:"overflow-auto",children:D.map((s,N)=>{var n;return t.jsxs("div",{className:"my-4 flex flex-col gap-4",children:[t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(S,{className:"size-8"}),t.jsxs("h4",{className:"font-semibold lg:text-lg",children:["Ø¯/ ",s]})]}),t.jsx(w,{className:"flex-1",children:(n=e==null?void 0:e.filter(i=>i.doctor.name===s))==null?void 0:n.map(({id:i,patient:p,time:y,date:A,doctor:P})=>p&&t.jsx(I,{patient:p,doctor:P,variant:R.APPOINTMENT,time:k(y),date:A,appointmentId:i},i))})]},s+N)})})})]})})});export{nt as default};
