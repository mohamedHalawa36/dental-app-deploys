import{p as e,r as g,v as b,w as v}from"./chunk-PVWAREVJ-chYXeG9N.js";import{u as h}from"./Input-2cIFo5g_.js";import{c as y,a as c,F as w,g as j,I as u}from"./InputField-9ZlsAheP.js";import{k as x,q as f,u as N,t as p,v as E}from"./QueryClientProvider-CfP0eixq.js";import{s as F,a as S}from"./auth-qEFRouGO.js";import{c as C}from"./utils-D5TTDGUY.js";import"./mutation-55mtfnXf.js";function q({label:r,disabled:t,className:n,variant:o="primary",type:i="submit"}){return e.jsx("button",{disabled:t,type:i,className:C("border border-transparent p-3 font-semibold transition hover:opacity-80 disabled:bg-gray-400 max-sm:w-full",{"rounded-xl bg-primary text-muted":o==="primary","border-foreground bg-transparent text-foreground":o==="secondary"},n),children:r})}function M({children:r}){return e.jsx("span",{className:"border-s-4 border-s-secondary bg-secondary/10 px-2 py-3 text-center text-sm font-semibold text-secondary max-sm:text-xs",children:r})}const{invalidEmail:P}=f.error.auth,I=y({email:c().email(P).required(x),password:c().required(x)});function U(){const[r,t]=g.useState(null),{setUser:n}=N(),o=b(),{mutate:i,isPending:l}=h({mutationFn:F,onMutate:()=>t(null),onSuccess:async s=>{const a=s.data,{data:m,error:d}=await S((a==null?void 0:a.id)??"");d?p.error("حدث خطأ أثناء تسجيل الدخول، حاول مرة أخرى"):(n(m),o("/"))},onError:s=>{const{code:a,statusCode:m}=s;if(m===400&&a==="invalid_credentials"){const{invalidCredentials:d}=f.error.auth;t(d)}else p.error(E)}});return e.jsx(w,{initialValues:{email:"",password:""},validationSchema:I,onSubmit:s=>i(s),children:e.jsx(j,{className:"flex-1",children:e.jsxs("div",{className:"flex flex-1 flex-col gap-3 overflow-auto px-7 max-sm:px-5",children:[e.jsx(u,{className:"[&>div]:border-primary/50 [&>div]:transition",name:"email",label:"البريد الإلكتروني",disabled:l,autoComplete:"on"}),e.jsx(u,{className:"[&>div]:border-primary/50 [&>div]:transition",name:"password",label:"كلمة السر",disabled:l,type:"password",autoComplete:"on"}),r&&e.jsx(M,{children:r}),e.jsx(q,{variant:"primary",label:"تسجيل الدخول",className:"w-full",disabled:l,type:"submit"})]})})})}const V=v(function(){return e.jsx("div",{className:"flex h-full w-full items-center justify-center bg-[linear-gradient(45deg,rgb(var(--secondary)),rgb(var(--primary)))]",children:e.jsxs("div",{className:"flex max-h-[90%] w-[25rem] flex-col gap-5 overflow-hidden rounded-[50px] bg-white pb-8 pt-3 max-sm:max-w-[90%] max-sm:rounded-3xl max-sm:pb-5",children:[e.jsx("img",{src:"/images/full-logo.webp",alt:"logo",className:"mx-auto w-48 object-contain max-sm:w-40"}),e.jsx(U,{})]})})});export{V as default};
