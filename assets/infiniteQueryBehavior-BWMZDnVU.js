import{X as T,Y as j,Z as E}from"./QueryClientProvider-BWsEC_BQ.js";function B(a){return{onFetch:(e,s)=>{var h,y,p,F,v;const n=e.options,f=(p=(y=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:y.fetchMore)==null?void 0:p.direction,P=((F=e.state.data)==null?void 0:F.pages)||[],d=((v=e.state.data)==null?void 0:v.pageParams)||[];let o={pages:[],pageParams:[]},u=0;const m=async()=>{let i=!1;const g=r=>{Object.defineProperty(r,"signal",{enumerable:!0,get:()=>(e.signal.aborted?i=!0:e.signal.addEventListener("abort",()=>{i=!0}),e.signal)})},k=T(e.options,e.fetchOptions),b=async(r,t,l)=>{if(i)return Promise.reject();if(t==null&&r.pages.length)return Promise.resolve(r);const N=(()=>{const K={client:e.client,queryKey:e.queryKey,pageParam:t,direction:l?"backward":"forward",meta:e.options.meta};return g(K),K})(),O=await k(N),{maxPages:w}=e.options,C=l?j:E;return{pages:C(r.pages,O,w),pageParams:C(r.pageParams,t,w)}};if(f&&P.length){const r=f==="backward",t=r?Q:c,l={pages:P,pageParams:d},q=t(n,l);o=await b(l,q,r)}else{const r=a??P.length;do{const t=u===0?d[0]??n.initialPageParam:c(n,o);if(u>0&&t==null)break;o=await b(o,t),u++}while(u<r)}return o};e.options.persister?e.fetchFn=()=>{var i,g;return(g=(i=e.options).persister)==null?void 0:g.call(i,m,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},s)}:e.fetchFn=m}}}function c(a,{pages:e,pageParams:s}){const n=e.length-1;return e.length>0?a.getNextPageParam(e[n],e,s[n],s):void 0}function Q(a,{pages:e,pageParams:s}){var n;return e.length>0?(n=a.getPreviousPageParam)==null?void 0:n.call(a,e[0],e,s[0],s):void 0}function D(a,e){return e?c(a,e)!=null:!1}function I(a,e){return!e||!a.getPreviousPageParam?!1:Q(a,e)!=null}export{D as a,I as h,B as i};
