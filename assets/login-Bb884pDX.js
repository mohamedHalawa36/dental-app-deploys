import{C as m,B as u,t as g,D as f,w as b}from"./supabase-4kc8f4RQ.js";import{n as e,r as v,o as h}from"./chunk-SYFQ2XB5-BFxPMBKg.js";import{c as y,u as j}from"./Input-DtjgWKtW.js";import{c as w,d,f as N,F as E,I as c}from"./index.esm-8nAdBzbn.js";import{s as C}from"./auth-B6azoQKU.js";import{u as F}from"./AuthContext-DZx1nRom.js";function S({label:r,disabled:a,className:o,variant:t="primary",type:n="submit"}){return e.jsx("button",{disabled:a,type:n,className:y("border border-transparent p-3 font-semibold transition hover:opacity-80 disabled:bg-gray-400 max-sm:w-full",{"rounded-xl bg-primary text-muted":t==="primary","border-foreground bg-transparent text-foreground":t==="secondary"},o),children:r})}function M({children:r}){return e.jsx("span",{className:"border-s-4 border-s-secondary bg-secondary/10 px-2 py-3 text-center text-sm font-semibold text-secondary max-sm:text-xs",children:r})}const{invalidEmail:q}=u.error.auth,I=w({email:d().email(q).required(m),password:d().required(m)});function B(){const[r,a]=v.useState(null),o=h(),{setUser:t}=F(),{mutate:n,isPending:i}=j({mutationFn:C,onMutate:()=>a(null),onSuccess:s=>{const l=s.user;t(l),o("/")},onError:s=>{const{code:l,statusCode:x}=s;if(x===400&&l==="invalid_credentials"){const{invalidCredentials:p}=u.error.auth;a(p)}else g.error(f)}});return e.jsx(N,{initialValues:{email:"",password:""},validationSchema:I,onSubmit:s=>n(s),children:e.jsx(E,{className:"flex-1",children:e.jsxs("div",{className:"flex flex-1 flex-col gap-3 overflow-auto px-7 max-sm:px-5",children:[e.jsx(c,{className:"[&>div]:border-primary/50 [&>div]:transition",name:"email",label:"البريد الإلكتروني",disabled:i,autoComplete:"on"}),e.jsx(c,{className:"[&>div]:border-primary/50 [&>div]:transition",name:"password",label:"كلمة السر",disabled:i,type:"password",autoComplete:"on"}),r&&e.jsx(M,{children:r}),e.jsx(S,{variant:"primary",label:"تسجيل الدخول",className:"w-full",disabled:i,type:"submit"})]})})})}const D=b(function(){return e.jsx("div",{className:"flex h-full w-full items-center justify-center bg-[linear-gradient(45deg,rgb(var(--secondary)),rgb(var(--primary)))]",children:e.jsxs("div",{className:"flex max-h-[90%] w-[25rem] flex-col gap-5 overflow-hidden rounded-[50px] bg-white pb-8 pt-3 max-sm:max-w-[90%] max-sm:rounded-3xl max-sm:pb-5",children:[e.jsx("img",{src:"/images/full-logo.png",alt:"logo",className:"mx-auto w-48 object-contain max-sm:w-40"}),e.jsx(B,{})]})})});export{D as default};
