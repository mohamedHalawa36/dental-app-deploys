var ti=Object.defineProperty;var us=s=>{throw TypeError(s)};var ri=(s,t,e)=>t in s?ti(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var _=(s,t,e)=>ri(s,typeof t!="symbol"?t+"":t,e),mr=(s,t,e)=>t.has(s)||us("Cannot "+e);var O=(s,t,e)=>(mr(s,t,"read from private field"),e?e.call(s):t.get(s)),ae=(s,t,e)=>t.has(s)?us("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(s):t.set(s,e),X=(s,t,e,r)=>(mr(s,t,"write to private field"),r?r.call(s,e):t.set(s,e),e),Ne=(s,t,e)=>(mr(s,t,"access private method"),e);import{r as Ot,p as zs,R as b,B as si,D as ni,G as ye}from"./chunk-PVWAREVJ-chYXeG9N.js";const Ys=Ot.createContext({authData:null,setAuthData:()=>{}}),jd=({children:s})=>{const[t,e]=Ot.useState(null);return zs.jsx(Ys.Provider,{value:{authData:t,setAuthData:e},children:s})};function ii(s){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.type="text/css",t.appendChild(e),e.styleSheet?e.styleSheet.cssText=s:e.appendChild(document.createTextNode(s))}const oi=s=>{switch(s){case"success":return ci;case"info":return di;case"warning":return ui;case"error":return hi;default:return null}},ai=Array(12).fill(0),li=({visible:s,className:t})=>b.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":s},b.createElement("div",{className:"sonner-spinner"},ai.map((e,r)=>b.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),ci=b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},b.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),ui=b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},b.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),di=b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},b.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),hi=b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},b.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),fi=b.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},b.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),b.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),gi=()=>{const[s,t]=b.useState(document.hidden);return b.useEffect(()=>{const e=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",e),()=>window.removeEventListener("visibilitychange",e)},[]),s};let Er=1;class mi{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;const{message:r,...n}=t,i=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:Er++,o=this.toasts.find(l=>l.id===i),a=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...t,id:i,title:r}),{...l,...t,id:i,dismissible:a,title:r}):l):this.addToast({title:r,...n,dismissible:a,id:i}),i},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(e=>e({id:t,dismiss:!0})))):this.toasts.forEach(e=>{this.subscribers.forEach(r=>r({id:e.id,dismiss:!0}))}),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let r;e.loading!==void 0&&(r=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));const n=Promise.resolve(t instanceof Function?t():t);let i=r!==void 0,o;const a=n.then(async u=>{if(o=["resolve",u],b.isValidElement(u))i=!1,this.create({id:r,type:"default",message:u});else if(yi(u)&&!u.ok){i=!1;const c=typeof e.error=="function"?await e.error(`HTTP error! status: ${u.status}`):e.error,h=typeof e.description=="function"?await e.description(`HTTP error! status: ${u.status}`):e.description,g=typeof c=="object"&&!b.isValidElement(c)?c:{message:c};this.create({id:r,type:"error",description:h,...g})}else if(u instanceof Error){i=!1;const c=typeof e.error=="function"?await e.error(u):e.error,h=typeof e.description=="function"?await e.description(u):e.description,g=typeof c=="object"&&!b.isValidElement(c)?c:{message:c};this.create({id:r,type:"error",description:h,...g})}else if(e.success!==void 0){i=!1;const c=typeof e.success=="function"?await e.success(u):e.success,h=typeof e.description=="function"?await e.description(u):e.description,g=typeof c=="object"&&!b.isValidElement(c)?c:{message:c};this.create({id:r,type:"success",description:h,...g})}}).catch(async u=>{if(o=["reject",u],e.error!==void 0){i=!1;const d=typeof e.error=="function"?await e.error(u):e.error,c=typeof e.description=="function"?await e.description(u):e.description,f=typeof d=="object"&&!b.isValidElement(d)?d:{message:d};this.create({id:r,type:"error",description:c,...f})}}).finally(()=>{i&&(this.dismiss(r),r=void 0),e.finally==null||e.finally.call(e)}),l=()=>new Promise((u,d)=>a.then(()=>o[0]==="reject"?d(o[1]):u(o[1])).catch(d));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(t,e)=>{const r=(e==null?void 0:e.id)||Er++;return this.create({jsx:t(r),id:r,...e}),r},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const le=new mi,pi=(s,t)=>{const e=(t==null?void 0:t.id)||Er++;return le.addToast({title:s,...t,id:e}),e},yi=s=>s&&typeof s=="object"&&"ok"in s&&typeof s.ok=="boolean"&&"status"in s&&typeof s.status=="number",wi=pi,bi=()=>le.toasts,vi=()=>le.getActiveToasts(),ds=Object.assign(wi,{success:le.success,info:le.info,warning:le.warning,error:le.error,custom:le.custom,message:le.message,promise:le.promise,dismiss:le.dismiss,loading:le.loading},{getHistory:bi,getToasts:vi});ii("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Qt(s){return s.label!==void 0}const _i=3,xi="24px",ki="16px",hs=4e3,Ti=356,Ei=14,Si=45,Pi=200;function xe(...s){return s.filter(Boolean).join(" ")}function Oi(s){const[t,e]=s.split("-"),r=[];return t&&r.push(t),e&&r.push(e),r}const Ci=s=>{var t,e,r,n,i,o,a,l,u;const{invert:d,toast:c,unstyled:h,interacting:f,setHeights:g,visibleToasts:v,heights:p,index:m,toasts:x,expanded:y,removeToast:w,defaultRichColors:T,closeButton:k,style:I,cancelButtonStyle:U,actionButtonStyle:M,className:re="",descriptionClassName:Je="",duration:$,position:ue,gap:Ae,expandByDefault:De,classNames:j,icons:V,closeButtonAriaLabel:ge="Close toast"}=s,[de,oe]=b.useState(null),[ee,zt]=b.useState(null),[A,H]=b.useState(!1),[q,me]=b.useState(!1),[at,B]=b.useState(!1),[lt,Yt]=b.useState(!1),[Gt,ct]=b.useState(!1),[Fn,hr]=b.useState(0),[Hn,ts]=b.useState(0),It=b.useRef(c.duration||$||hs),rs=b.useRef(null),je=b.useRef(null),zn=m===0,Yn=m+1<=v,he=c.type,ut=c.dismissible!==!1,Gn=c.className||"",Vn=c.descriptionClassName||"",Vt=b.useMemo(()=>p.findIndex(S=>S.toastId===c.id)||0,[p,c.id]),Kn=b.useMemo(()=>{var S;return(S=c.closeButton)!=null?S:k},[c.closeButton,k]),ss=b.useMemo(()=>c.duration||$||hs,[c.duration,$]),fr=b.useRef(0),dt=b.useRef(0),ns=b.useRef(0),ht=b.useRef(null),[Jn,Qn]=ue.split("-"),is=b.useMemo(()=>p.reduce((S,Q,se)=>se>=Vt?S:S+Q.height,0),[p,Vt]),os=gi(),Xn=c.invert||d,gr=he==="loading";dt.current=b.useMemo(()=>Vt*Ae+is,[Vt,is]),b.useEffect(()=>{It.current=ss},[ss]),b.useEffect(()=>{H(!0)},[]),b.useEffect(()=>{const S=je.current;if(S){const Q=S.getBoundingClientRect().height;return ts(Q),g(se=>[{toastId:c.id,height:Q,position:c.position},...se]),()=>g(se=>se.filter(fe=>fe.toastId!==c.id))}},[g,c.id]),b.useLayoutEffect(()=>{if(!A)return;const S=je.current,Q=S.style.height;S.style.height="auto";const se=S.getBoundingClientRect().height;S.style.height=Q,ts(se),g(fe=>fe.find(te=>te.toastId===c.id)?fe.map(te=>te.toastId===c.id?{...te,height:se}:te):[{toastId:c.id,height:se,position:c.position},...fe])},[A,c.title,c.description,g,c.id,c.jsx,c.action,c.cancel]);const Me=b.useCallback(()=>{me(!0),hr(dt.current),g(S=>S.filter(Q=>Q.toastId!==c.id)),setTimeout(()=>{w(c)},Pi)},[c,w,g,dt]);b.useEffect(()=>{if(c.promise&&he==="loading"||c.duration===1/0||c.type==="loading")return;let S;return y||f||os?(()=>{if(ns.current<fr.current){const fe=new Date().getTime()-fr.current;It.current=It.current-fe}ns.current=new Date().getTime()})():(()=>{It.current!==1/0&&(fr.current=new Date().getTime(),S=setTimeout(()=>{c.onAutoClose==null||c.onAutoClose.call(c,c),Me()},It.current))})(),()=>clearTimeout(S)},[y,f,c,he,os,Me]),b.useEffect(()=>{c.delete&&(Me(),c.onDismiss==null||c.onDismiss.call(c,c))},[Me,c.delete]);function Zn(){var S;if(V!=null&&V.loading){var Q;return b.createElement("div",{className:xe(j==null?void 0:j.loader,c==null||(Q=c.classNames)==null?void 0:Q.loader,"sonner-loader"),"data-visible":he==="loading"},V.loading)}return b.createElement(li,{className:xe(j==null?void 0:j.loader,c==null||(S=c.classNames)==null?void 0:S.loader),visible:he==="loading"})}const ei=c.icon||(V==null?void 0:V[he])||oi(he);var as,ls;return b.createElement("li",{tabIndex:0,ref:je,className:xe(re,Gn,j==null?void 0:j.toast,c==null||(t=c.classNames)==null?void 0:t.toast,j==null?void 0:j.default,j==null?void 0:j[he],c==null||(e=c.classNames)==null?void 0:e[he]),"data-sonner-toast":"","data-rich-colors":(as=c.richColors)!=null?as:T,"data-styled":!(c.jsx||c.unstyled||h),"data-mounted":A,"data-promise":!!c.promise,"data-swiped":Gt,"data-removed":q,"data-visible":Yn,"data-y-position":Jn,"data-x-position":Qn,"data-index":m,"data-front":zn,"data-swiping":at,"data-dismissible":ut,"data-type":he,"data-invert":Xn,"data-swipe-out":lt,"data-swipe-direction":ee,"data-expanded":!!(y||De&&A),"data-testid":c.testId,style:{"--index":m,"--toasts-before":m,"--z-index":x.length-m,"--offset":`${q?Fn:dt.current}px`,"--initial-height":De?"auto":`${Hn}px`,...I,...c.style},onDragEnd:()=>{B(!1),oe(null),ht.current=null},onPointerDown:S=>{S.button!==2&&(gr||!ut||(rs.current=new Date,hr(dt.current),S.target.setPointerCapture(S.pointerId),S.target.tagName!=="BUTTON"&&(B(!0),ht.current={x:S.clientX,y:S.clientY})))},onPointerUp:()=>{var S,Q,se;if(lt||!ut)return;ht.current=null;const fe=Number(((S=je.current)==null?void 0:S.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Kt=Number(((Q=je.current)==null?void 0:Q.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),te=new Date().getTime()-((se=rs.current)==null?void 0:se.getTime()),pe=de==="x"?fe:Kt,Jt=Math.abs(pe)/te;if(Math.abs(pe)>=Si||Jt>.11){hr(dt.current),c.onDismiss==null||c.onDismiss.call(c,c),zt(de==="x"?fe>0?"right":"left":Kt>0?"down":"up"),Me(),Yt(!0);return}else{var we,be;(we=je.current)==null||we.style.setProperty("--swipe-amount-x","0px"),(be=je.current)==null||be.style.setProperty("--swipe-amount-y","0px")}ct(!1),B(!1),oe(null)},onPointerMove:S=>{var Q,se,fe;if(!ht.current||!ut||((Q=window.getSelection())==null?void 0:Q.toString().length)>0)return;const te=S.clientY-ht.current.y,pe=S.clientX-ht.current.x;var Jt;const we=(Jt=s.swipeDirections)!=null?Jt:Oi(ue);!de&&(Math.abs(pe)>1||Math.abs(te)>1)&&oe(Math.abs(pe)>Math.abs(te)?"x":"y");let be={x:0,y:0};const cs=Qe=>1/(1.5+Math.abs(Qe)/20);if(de==="y"){if(we.includes("top")||we.includes("bottom"))if(we.includes("top")&&te<0||we.includes("bottom")&&te>0)be.y=te;else{const Qe=te*cs(te);be.y=Math.abs(Qe)<Math.abs(te)?Qe:te}}else if(de==="x"&&(we.includes("left")||we.includes("right")))if(we.includes("left")&&pe<0||we.includes("right")&&pe>0)be.x=pe;else{const Qe=pe*cs(pe);be.x=Math.abs(Qe)<Math.abs(pe)?Qe:pe}(Math.abs(be.x)>0||Math.abs(be.y)>0)&&ct(!0),(se=je.current)==null||se.style.setProperty("--swipe-amount-x",`${be.x}px`),(fe=je.current)==null||fe.style.setProperty("--swipe-amount-y",`${be.y}px`)}},Kn&&!c.jsx&&he!=="loading"?b.createElement("button",{"aria-label":ge,"data-disabled":gr,"data-close-button":!0,onClick:gr||!ut?()=>{}:()=>{Me(),c.onDismiss==null||c.onDismiss.call(c,c)},className:xe(j==null?void 0:j.closeButton,c==null||(r=c.classNames)==null?void 0:r.closeButton)},(ls=V==null?void 0:V.close)!=null?ls:fi):null,(he||c.icon||c.promise)&&c.icon!==null&&((V==null?void 0:V[he])!==null||c.icon)?b.createElement("div",{"data-icon":"",className:xe(j==null?void 0:j.icon,c==null||(n=c.classNames)==null?void 0:n.icon)},c.promise||c.type==="loading"&&!c.icon?c.icon||Zn():null,c.type!=="loading"?ei:null):null,b.createElement("div",{"data-content":"",className:xe(j==null?void 0:j.content,c==null||(i=c.classNames)==null?void 0:i.content)},b.createElement("div",{"data-title":"",className:xe(j==null?void 0:j.title,c==null||(o=c.classNames)==null?void 0:o.title)},c.jsx?c.jsx:typeof c.title=="function"?c.title():c.title),c.description?b.createElement("div",{"data-description":"",className:xe(Je,Vn,j==null?void 0:j.description,c==null||(a=c.classNames)==null?void 0:a.description)},typeof c.description=="function"?c.description():c.description):null),b.isValidElement(c.cancel)?c.cancel:c.cancel&&Qt(c.cancel)?b.createElement("button",{"data-button":!0,"data-cancel":!0,style:c.cancelButtonStyle||U,onClick:S=>{Qt(c.cancel)&&ut&&(c.cancel.onClick==null||c.cancel.onClick.call(c.cancel,S),Me())},className:xe(j==null?void 0:j.cancelButton,c==null||(l=c.classNames)==null?void 0:l.cancelButton)},c.cancel.label):null,b.isValidElement(c.action)?c.action:c.action&&Qt(c.action)?b.createElement("button",{"data-button":!0,"data-action":!0,style:c.actionButtonStyle||M,onClick:S=>{Qt(c.action)&&(c.action.onClick==null||c.action.onClick.call(c.action,S),!S.defaultPrevented&&Me())},className:xe(j==null?void 0:j.actionButton,c==null||(u=c.classNames)==null?void 0:u.actionButton)},c.action.label):null)};function fs(){if(typeof window>"u"||typeof document>"u")return"ltr";const s=document.documentElement.getAttribute("dir");return s==="auto"||!s?window.getComputedStyle(document.documentElement).direction:s}function Ai(s,t){const e={};return[s,t].forEach((r,n)=>{const i=n===1,o=i?"--mobile-offset":"--offset",a=i?ki:xi;function l(u){["top","right","bottom","left"].forEach(d=>{e[`${o}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?e[`${o}-${u}`]=a:e[`${o}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):l(a)}),e}const Rd=b.forwardRef(function(t,e){const{id:r,invert:n,position:i="bottom-right",hotkey:o=["altKey","KeyT"],expand:a,closeButton:l,className:u,offset:d,mobileOffset:c,theme:h="light",richColors:f,duration:g,style:v,visibleToasts:p=_i,toastOptions:m,dir:x=fs(),gap:y=Ei,icons:w,containerAriaLabel:T="Notifications"}=t,[k,I]=b.useState([]),U=b.useMemo(()=>r?k.filter(A=>A.toasterId===r):k.filter(A=>!A.toasterId),[k,r]),M=b.useMemo(()=>Array.from(new Set([i].concat(U.filter(A=>A.position).map(A=>A.position)))),[U,i]),[re,Je]=b.useState([]),[$,ue]=b.useState(!1),[Ae,De]=b.useState(!1),[j,V]=b.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),ge=b.useRef(null),de=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),oe=b.useRef(null),ee=b.useRef(!1),zt=b.useCallback(A=>{I(H=>{var q;return(q=H.find(me=>me.id===A.id))!=null&&q.delete||le.dismiss(A.id),H.filter(({id:me})=>me!==A.id)})},[]);return b.useEffect(()=>le.subscribe(A=>{if(A.dismiss){requestAnimationFrame(()=>{I(H=>H.map(q=>q.id===A.id?{...q,delete:!0}:q))});return}setTimeout(()=>{si.flushSync(()=>{I(H=>{const q=H.findIndex(me=>me.id===A.id);return q!==-1?[...H.slice(0,q),{...H[q],...A},...H.slice(q+1)]:[A,...H]})})})}),[k]),b.useEffect(()=>{if(h!=="system"){V(h);return}if(h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?V("dark"):V("light")),typeof window>"u")return;const A=window.matchMedia("(prefers-color-scheme: dark)");try{A.addEventListener("change",({matches:H})=>{V(H?"dark":"light")})}catch{A.addListener(({matches:q})=>{try{V(q?"dark":"light")}catch(me){console.error(me)}})}},[h]),b.useEffect(()=>{k.length<=1&&ue(!1)},[k]),b.useEffect(()=>{const A=H=>{var q;if(o.every(B=>H[B]||H.code===B)){var at;ue(!0),(at=ge.current)==null||at.focus()}H.code==="Escape"&&(document.activeElement===ge.current||(q=ge.current)!=null&&q.contains(document.activeElement))&&ue(!1)};return document.addEventListener("keydown",A),()=>document.removeEventListener("keydown",A)},[o]),b.useEffect(()=>{if(ge.current)return()=>{oe.current&&(oe.current.focus({preventScroll:!0}),oe.current=null,ee.current=!1)}},[ge.current]),b.createElement("section",{ref:e,"aria-label":`${T} ${de}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},M.map((A,H)=>{var q;const[me,at]=A.split("-");return U.length?b.createElement("ol",{key:A,dir:x==="auto"?fs():x,tabIndex:-1,ref:ge,className:u,"data-sonner-toaster":!0,"data-sonner-theme":j,"data-y-position":me,"data-x-position":at,style:{"--front-toast-height":`${((q=re[0])==null?void 0:q.height)||0}px`,"--width":`${Ti}px`,"--gap":`${y}px`,...v,...Ai(d,c)},onBlur:B=>{ee.current&&!B.currentTarget.contains(B.relatedTarget)&&(ee.current=!1,oe.current&&(oe.current.focus({preventScroll:!0}),oe.current=null))},onFocus:B=>{B.target instanceof HTMLElement&&B.target.dataset.dismissible==="false"||ee.current||(ee.current=!0,oe.current=B.relatedTarget)},onMouseEnter:()=>ue(!0),onMouseMove:()=>ue(!0),onMouseLeave:()=>{Ae||ue(!1)},onDragEnd:()=>ue(!1),onPointerDown:B=>{B.target instanceof HTMLElement&&B.target.dataset.dismissible==="false"||De(!0)},onPointerUp:()=>De(!1)},U.filter(B=>!B.position&&H===0||B.position===A).map((B,lt)=>{var Yt,Gt;return b.createElement(Ci,{key:B.id,icons:w,index:lt,toast:B,defaultRichColors:f,duration:(Yt=m==null?void 0:m.duration)!=null?Yt:g,className:m==null?void 0:m.className,descriptionClassName:m==null?void 0:m.descriptionClassName,invert:n,visibleToasts:p,closeButton:(Gt=m==null?void 0:m.closeButton)!=null?Gt:l,interacting:Ae,position:A,style:m==null?void 0:m.style,unstyled:m==null?void 0:m.unstyled,classNames:m==null?void 0:m.classNames,cancelButtonStyle:m==null?void 0:m.cancelButtonStyle,actionButtonStyle:m==null?void 0:m.actionButtonStyle,closeButtonAriaLabel:m==null?void 0:m.closeButtonAriaLabel,removeToast:zt,toasts:U.filter(ct=>ct.position==B.position),heights:re.filter(ct=>ct.position==B.position),setHeights:Je,expandByDefault:a,gap:y,expanded:$,swipeDirections:t.swipeDirections})})):null}))}),Gs={success:{patient:{add:"تم إضافة المريض بنجاح",update:"تم تعديل المريض بنجاح",delete:"تم حذف المريض"},appointment:{add:"تم حجز الموعد",update:"تم تعديل الموعد بنجاح",delete:"تم إلغاء الموعد"},availability:{add:"تم إضافة الموعد بنجاح",update:"تم تعديل الموعد بنجاح",delete:"تم حذف الموعد بنجاح"},user:{add:"تم إضافة المستخدم بنجاح",delete:"تم حذف المستخدم بنجاح",activate:"تم إعادة تفعيل المستخدم",deActivate:"تم إلغاء تفعيل المستخدم"},connection:"تم استعادة الاتصال بالإنترنت"},error:{somethingWentWrong:"حدث خطأ ما، برجاء المحاولة مجددا",patient:{conflict:"لا يمكن حذف المريض لأن لديه حجوزات أو سجلات مرتبطة."},appointment:{dayConflict:"تم حجز موعد للمريض في نفس اليوم مسبقا",timeConflict:"يوجد موعد لمريض اخر في نفس التوقيت"},auth:{invalidCredentials:"البريد الإلكتروني أو كلمة المرور غير صحيحة",invalidEmail:"بريد إلكتروني غير صحيح",unAuth:"غير مصرح لك بهذه العملية، برجاء مراجعة المسؤول",login:"حدث خطأ أثناء تسجيل الدخول، حاول مرة أخرى",userNotFound:"لم نستطع العثور على معلومات المستخدم، برجاء تسجيل الدخول"},availability:{conflict:"لديك موعد في هذا اليوم بالفعل"},connection:"لايوجد اتصال بالإنترنت"}},Id=Gs.error.somethingWentWrong,$d="مطلوب",ji="api-error",Ri="modulepreload",Ii=function(s){return"/"+s},gs={},qt=function(t,e,r){let n=Promise.resolve();if(e&&e.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));n=Promise.allSettled(e.map(l=>{if(l=Ii(l),l in gs)return;gs[l]=!0;const u=l.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const c=document.createElement("link");if(c.rel=u?"stylesheet":Ri,u||(c.as="script"),c.crossOrigin="",c.href=l,a&&c.setAttribute("nonce",a),document.head.appendChild(c),u)return new Promise((h,f)=>{c.addEventListener("load",h),c.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return n.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return t().catch(i)})},$i=s=>{let t;return s?t=s:typeof fetch>"u"?t=(...e)=>qt(async()=>{const{default:r}=await Promise.resolve().then(()=>Ct);return{default:r}},void 0).then(({default:r})=>r(...e)):t=fetch,(...e)=>t(...e)};class zr extends Error{constructor(t,e="FunctionsError",r){super(t),this.name=e,this.context=r}}class Di extends zr{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class ms extends zr{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class ps extends zr{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Sr;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(Sr||(Sr={}));var Mi=function(s,t,e,r){function n(i){return i instanceof e?i:new e(function(o){o(i)})}return new(e||(e=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(c){o(c)}}function l(d){try{u(r.throw(d))}catch(c){o(c)}}function u(d){d.done?i(d.value):n(d.value).then(a,l)}u((r=r.apply(s,t||[])).next())})};class Ni{constructor(t,{headers:e={},customFetch:r,region:n=Sr.Any}={}){this.url=t,this.headers=e,this.region=n,this.fetch=$i(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,e={}){var r;return Mi(this,void 0,void 0,function*(){try{const{headers:n,method:i,body:o}=e;let a={},{region:l}=e;l||(l=this.region);const u=new URL(`${this.url}/${t}`);l&&l!=="any"&&(a["x-region"]=l,u.searchParams.set("forceFunctionRegion",l));let d;o&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(a["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(a["Content-Type"]="application/json",d=JSON.stringify(o)));const c=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),n),body:d}).catch(v=>{throw new Di(v)}),h=c.headers.get("x-relay-error");if(h&&h==="true")throw new ms(c);if(!c.ok)throw new ps(c);let f=((r=c.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),g;return f==="application/json"?g=yield c.json():f==="application/octet-stream"?g=yield c.blob():f==="text/event-stream"?g=c:f==="multipart/form-data"?g=yield c.formData():g=yield c.text(),{data:g,error:null,response:c}}catch(n){return{data:null,error:n,response:n instanceof ps||n instanceof ms?n.context:void 0}}})}}var ce={},Yr={},or={},Ft={},ar={},lr={},Li=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},St=Li();const Ui=St.fetch,Vs=St.fetch.bind(St),Ks=St.Headers,Bi=St.Request,Wi=St.Response,Ct=Object.freeze(Object.defineProperty({__proto__:null,Headers:Ks,Request:Bi,Response:Wi,default:Vs,fetch:Ui},Symbol.toStringTag,{value:"Module"})),qi=ni(Ct);var cr={};Object.defineProperty(cr,"__esModule",{value:!0});let Fi=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};cr.default=Fi;var Js=ye&&ye.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(lr,"__esModule",{value:!0});const Hi=Js(qi),zi=Js(cr);let Yi=class{constructor(t){var e,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(r=t.isMaybeSingle)!==null&&r!==void 0?r:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=Hi.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let n=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,l,u;let d=null,c=null,h=null,f=i.status,g=i.statusText;if(i.ok){if(this.method!=="HEAD"){const x=await i.text();x===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?c=x:c=JSON.parse(x))}const p=(a=this.headers.get("Prefer"))===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),m=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");p&&m&&m.length>1&&(h=parseInt(m[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(c)&&(c.length>1?(d={code:"PGRST116",details:`Results contain ${c.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},c=null,h=null,f=406,g="Not Acceptable"):c.length===1?c=c[0]:c=null)}else{const p=await i.text();try{d=JSON.parse(p),Array.isArray(d)&&i.status===404&&(c=[],d=null,f=200,g="OK")}catch{i.status===404&&p===""?(f=204,g="No Content"):d={message:p}}if(d&&this.isMaybeSingle&&(!((u=d==null?void 0:d.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,f=200,g="OK"),d&&this.shouldThrowOnError)throw new zi.default(d)}return{error:d,data:c,count:h,status:f,statusText:g}});return this.shouldThrowOnError||(n=n.catch(i=>{var o,a,l;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),n.then(t,e)}returns(){return this}overrideTypes(){return this}};lr.default=Yi;var Gi=ye&&ye.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(ar,"__esModule",{value:!0});const Vi=Gi(lr);let Ki=class extends Vi.default{select(t){let e=!1;const r=(t??"*").split("").map(n=>/\s/.test(n)&&!e?"":(n==='"'&&(e=!e),n)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:r,foreignTable:n,referencedTable:i=n}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${t}.${e?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:r=e}={}){const n=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${t}`),this}range(t,e,{foreignTable:r,referencedTable:n=r}={}){const i=typeof n>"u"?"offset":`${n}.offset`,o=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:r=!1,buffers:n=!1,wal:i=!1,format:o="text"}={}){var a;const l=[t?"analyze":null,e?"verbose":null,r?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(a=this.headers.get("Accept"))!==null&&a!==void 0?a:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${u}"; options=${l};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};ar.default=Ki;var Ji=ye&&ye.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Ft,"__esModule",{value:!0});const Qi=Ji(ar);let Xi=class extends Qi.default{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}in(t,e){const r=Array.from(new Set(e)).map(n=>typeof n=="string"&&new RegExp("[,()]").test(n)?`"${n}"`:`${n}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:r,type:n}={}){let i="";n==="plain"?i="pl":n==="phrase"?i="ph":n==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${i}fts${o}.${e}`),this}match(t){return Object.entries(t).forEach(([e,r])=>{this.url.searchParams.append(e,`eq.${r}`)}),this}not(t,e,r){return this.url.searchParams.append(t,`not.${e}.${r}`),this}or(t,{foreignTable:e,referencedTable:r=e}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${t})`),this}filter(t,e,r){return this.url.searchParams.append(t,`${e}.${r}`),this}};Ft.default=Xi;var Zi=ye&&ye.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(or,"__esModule",{value:!0});const $t=Zi(Ft);let eo=class{constructor(t,{headers:e={},schema:r,fetch:n}){this.url=t,this.headers=new Headers(e),this.schema=r,this.fetch=n}select(t,{head:e=!1,count:r}={}){const n=e?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),r&&this.headers.append("Prefer",`count=${r}`),new $t.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:r=!0}={}){var n;const i="POST";if(e&&this.headers.append("Prefer",`count=${e}`),r||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const o=t.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new $t.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:r=!1,count:n,defaultToNull:i=!0}={}){var o;const a="POST";if(this.headers.append("Prefer",`resolution=${r?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),n&&this.headers.append("Prefer",`count=${n}`),i||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const l=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(l.length>0){const u=[...new Set(l)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new $t.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:e}={}){var r;const n="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new $t.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}delete({count:t}={}){var e;const r="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new $t.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}};or.default=eo;var Qs=ye&&ye.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Yr,"__esModule",{value:!0});const to=Qs(or),ro=Qs(Ft);let so=class Xs{constructor(t,{headers:e={},schema:r,fetch:n}={}){this.url=t,this.headers=new Headers(e),this.schemaName=r,this.fetch=n}from(t){const e=new URL(`${this.url}/${t}`);return new to.default(e,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Xs(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,e={},{head:r=!1,get:n=!1,count:i}={}){var o;let a;const l=new URL(`${this.url}/rpc/${t}`);let u;r||n?(a=r?"HEAD":"GET",Object.entries(e).filter(([c,h])=>h!==void 0).map(([c,h])=>[c,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([c,h])=>{l.searchParams.append(c,h)})):(a="POST",u=e);const d=new Headers(this.headers);return i&&d.set("Prefer",`count=${i}`),new ro.default({method:a,url:l,headers:d,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};Yr.default=so;var At=ye&&ye.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(ce,"__esModule",{value:!0});ce.PostgrestError=ce.PostgrestBuilder=ce.PostgrestTransformBuilder=ce.PostgrestFilterBuilder=ce.PostgrestQueryBuilder=ce.PostgrestClient=void 0;const Zs=At(Yr);ce.PostgrestClient=Zs.default;const en=At(or);ce.PostgrestQueryBuilder=en.default;const tn=At(Ft);ce.PostgrestFilterBuilder=tn.default;const rn=At(ar);ce.PostgrestTransformBuilder=rn.default;const sn=At(lr);ce.PostgrestBuilder=sn.default;const nn=At(cr);ce.PostgrestError=nn.default;var no=ce.default={PostgrestClient:Zs.default,PostgrestQueryBuilder:en.default,PostgrestFilterBuilder:tn.default,PostgrestTransformBuilder:rn.default,PostgrestBuilder:sn.default,PostgrestError:nn.default};const{PostgrestClient:io,PostgrestQueryBuilder:Bd,PostgrestFilterBuilder:Wd,PostgrestTransformBuilder:qd,PostgrestBuilder:Fd,PostgrestError:Hd}=no;class oo{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const e=process.versions;if(e&&e.node){const r=e.node,n=parseInt(r.replace(/^v/,"").split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let e=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(e+=`

Suggested solution: ${t.workaround}`),new Error(e)}static createWebSocket(t,e){const r=this.getWebSocketConstructor();return new r(t,e)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const ao="2.15.5",lo=`realtime-js/${ao}`,co="1.0.0",Pr=1e4,uo=1e3,ho=100;var Lt;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(Lt||(Lt={}));var K;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(K||(K={}));var _e;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(_e||(_e={}));var Or;(function(s){s.websocket="websocket"})(Or||(Or={}));var rt;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(rt||(rt={}));class fo{constructor(){this.HEADER_LENGTH=1}decode(t,e){return t.constructor===ArrayBuffer?e(this._binaryDecode(t)):e(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const e=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,e,r)}_decodeBroadcast(t,e,r){const n=e.getUint8(1),i=e.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(t.slice(o,o+n));o=o+n;const l=r.decode(t.slice(o,o+i));o=o+i;const u=JSON.parse(r.decode(t.slice(o,t.byteLength)));return{ref:null,topic:a,event:l,payload:u}}}class on{constructor(t,e){this.callback=t,this.timerCalc=e,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=e}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var N;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(N||(N={}));const ys=(s,t,e={})=>{var r;const n=(r=e.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((i,o)=>(i[o]=go(o,s,t,n),i),{})},go=(s,t,e,r)=>{const n=t.find(a=>a.name===s),i=n==null?void 0:n.type,o=e[s];return i&&!r.includes(i)?an(i,o):Cr(o)},an=(s,t)=>{if(s.charAt(0)==="_"){const e=s.slice(1,s.length);return wo(t,e)}switch(s){case N.bool:return mo(t);case N.float4:case N.float8:case N.int2:case N.int4:case N.int8:case N.numeric:case N.oid:return po(t);case N.json:case N.jsonb:return yo(t);case N.timestamp:return bo(t);case N.abstime:case N.date:case N.daterange:case N.int4range:case N.int8range:case N.money:case N.reltime:case N.text:case N.time:case N.timestamptz:case N.timetz:case N.tsrange:case N.tstzrange:return Cr(t);default:return Cr(t)}},Cr=s=>s,mo=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},po=s=>{if(typeof s=="string"){const t=parseFloat(s);if(!Number.isNaN(t))return t}return s},yo=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch(t){return console.log(`JSON parse error: ${t}`),s}return s},wo=(s,t)=>{if(typeof s!="string")return s;const e=s.length-1,r=s[e];if(s[0]==="{"&&r==="}"){let i;const o=s.slice(1,e);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>an(t,a))}return s},bo=s=>typeof s=="string"?s.replace(" ","T"):s,ln=s=>{let t=s;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class pr{constructor(t,e,r={},n=Pr){this.channel=t,this.event=e,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,e){var r;return this._hasReceived(t)&&e((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:e}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,e){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:e})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:e}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(e))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var ws;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(ws||(ws={}));class Ut{constructor(t,e){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(e==null?void 0:e.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},n=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ut.syncState(this.state,n,i,o),this.pendingDiffs.forEach(l=>{this.state=Ut.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},n=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=Ut.syncDiff(this.state,n,i,o),a())}),this.onJoin((n,i,o)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:o})}),this.onLeave((n,i,o)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,e,r,n){const i=this.cloneDeep(t),o=this.transformState(e),a={},l={};return this.map(i,(u,d)=>{o[u]||(l[u]=d)}),this.map(o,(u,d)=>{const c=i[u];if(c){const h=d.map(p=>p.presence_ref),f=c.map(p=>p.presence_ref),g=d.filter(p=>f.indexOf(p.presence_ref)<0),v=c.filter(p=>h.indexOf(p.presence_ref)<0);g.length>0&&(a[u]=g),v.length>0&&(l[u]=v)}else a[u]=d}),this.syncDiff(i,{joins:a,leaves:l},r,n)}static syncDiff(t,e,r,n){const{joins:i,leaves:o}={joins:this.transformState(e.joins),leaves:this.transformState(e.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(i,(a,l)=>{var u;const d=(u=t[a])!==null&&u!==void 0?u:[];if(t[a]=this.cloneDeep(l),d.length>0){const c=t[a].map(f=>f.presence_ref),h=d.filter(f=>c.indexOf(f.presence_ref)<0);t[a].unshift(...h)}r(a,d,l)}),this.map(o,(a,l)=>{let u=t[a];if(!u)return;const d=l.map(c=>c.presence_ref);u=u.filter(c=>d.indexOf(c.presence_ref)<0),t[a]=u,n(a,u,l),u.length===0&&delete t[a]}),t}static map(t,e){return Object.getOwnPropertyNames(t).map(r=>e(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((e,r)=>{const n=t[r];return"metas"in n?e[r]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):e[r]=n,e},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var bs;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(bs||(bs={}));var Bt;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(Bt||(Bt={}));var $e;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})($e||($e={}));class Gr{constructor(t,e={config:{}},r){this.topic=t,this.params=e,this.socket=r,this.bindings={},this.state=K.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},e.config),this.timeout=this.socket.timeout,this.joinPush=new pr(this,_e.join,this.params,this.timeout),this.rejoinTimer=new on(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=K.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=K.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=K.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=K.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=K.errored,this.rejoinTimer.scheduleTimeout())}),this._on(_e.reply,{},(n,i)=>{this._trigger(this._replyEventName(i),n)}),this.presence=new Ut(this),this.broadcastEndpointURL=ln(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,e=this.timeout){var r,n,i;if(this.socket.isConnected()||this.socket.connect(),this.state==K.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,u=(n=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(f=>f.filter))!==null&&n!==void 0?n:[],d=!!this.bindings[Bt.PRESENCE]&&this.bindings[Bt.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,c={},h={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:d}),postgres_changes:u,private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this._onError(f=>t==null?void 0:t($e.CHANNEL_ERROR,f)),this._onClose(()=>t==null?void 0:t($e.CLOSED)),this.updateJoinPayload(Object.assign({config:h},c)),this.joinedOnce=!0,this._rejoin(e),this.joinPush.receive("ok",async({postgres_changes:f})=>{var g;if(this.socket.setAuth(),f===void 0){t==null||t($e.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,p=(g=v==null?void 0:v.length)!==null&&g!==void 0?g:0,m=[];for(let x=0;x<p;x++){const y=v[x],{filter:{event:w,schema:T,table:k,filter:I}}=y,U=f&&f[x];if(U&&U.event===w&&U.schema===T&&U.table===k&&U.filter===I)m.push(Object.assign(Object.assign({},y),{id:U.id}));else{this.unsubscribe(),this.state=K.errored,t==null||t($e.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=m,t&&t($e.SUBSCRIBED);return}}).receive("error",f=>{this.state=K.errored,t==null||t($e.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{t==null||t($e.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,e={}){return await this.send({type:"presence",event:"track",payload:t},e.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,e,r){return this.state===K.joined&&t===Bt.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,e,r)}async send(t,e={}){var r,n;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=e.timeout)!==null&&r!==void 0?r:this.timeout);return await((n=u.body)===null||n===void 0?void 0:n.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const u=this._push(t.type,t,e.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=K.leaving;const e=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(_e.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(n=>{r=new pr(this,_e.leave,{},t),r.receive("ok",()=>{e(),n("ok")}).receive("timeout",()=>{e(),n("timed out")}).receive("error",()=>{n("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=K.closed,this.bindings={}}async _fetchWithTimeout(t,e,r){const n=new AbortController,i=setTimeout(()=>n.abort(),r),o=await this.socket.fetch(t,Object.assign(Object.assign({},e),{signal:n.signal}));return clearTimeout(i),o}_push(t,e,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new pr(this,t,e,r);return this._canPush()?n.send():this._addToPushBuffer(n),n}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>ho){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(t,e,r){return e}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,e,r){var n,i;const o=t.toLocaleLowerCase(),{close:a,error:l,leave:u,join:d}=_e;if(r&&[a,l,u,d].indexOf(o)>=0&&r!==this._joinRef())return;let h=this._onMessage(o,e,r);if(e&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(f=>{var g,v,p;return((g=f.filter)===null||g===void 0?void 0:g.event)==="*"||((p=(v=f.filter)===null||v===void 0?void 0:v.event)===null||p===void 0?void 0:p.toLocaleLowerCase())===o}).map(f=>f.callback(h,r)):(i=this.bindings[o])===null||i===void 0||i.filter(f=>{var g,v,p,m,x,y;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const w=f.id,T=(g=f.filter)===null||g===void 0?void 0:g.event;return w&&((v=e.ids)===null||v===void 0?void 0:v.includes(w))&&(T==="*"||(T==null?void 0:T.toLocaleLowerCase())===((p=e.data)===null||p===void 0?void 0:p.type.toLocaleLowerCase()))}else{const w=(x=(m=f==null?void 0:f.filter)===null||m===void 0?void 0:m.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return w==="*"||w===((y=e==null?void 0:e.event)===null||y===void 0?void 0:y.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof h=="object"&&"ids"in h){const g=h.data,{schema:v,table:p,commit_timestamp:m,type:x,errors:y}=g;h=Object.assign(Object.assign({},{schema:v,table:p,commit_timestamp:m,eventType:x,new:{},old:{},errors:y}),this._getPayloadRecords(g))}f.callback(h,r)})}_isClosed(){return this.state===K.closed}_isJoined(){return this.state===K.joined}_isJoining(){return this.state===K.joining}_isLeaving(){return this.state===K.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,e,r){const n=t.toLocaleLowerCase(),i={type:n,filter:e,callback:r};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(t,e){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&Gr.isEqual(n.filter,e))})),this}static isEqual(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const r in t)if(t[r]!==e[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(_e.close,{},t)}_onError(t){this._on(_e.error,{},e=>t(e))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=K.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const e={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(e.new=ys(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(e.old=ys(t.columns,t.old_record)),e}}const yr=()=>{},Xt={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},vo=[1e3,2e3,5e3,1e4],_o=1e4,xo=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class ko{constructor(t,e){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Pr,this.transport=null,this.heartbeatIntervalMs=Xt.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=yr,this.ref=0,this.reconnectTimer=null,this.logger=yr,this.conn=null,this.sendBuffer=[],this.serializer=new fo,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=n=>{let i;return n?i=n:typeof fetch>"u"?i=(...o)=>qt(async()=>{const{default:a}=await Promise.resolve().then(()=>Ct);return{default:a}},void 0).then(({default:a})=>a(...o)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((r=e==null?void 0:e.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=e.params.apikey,this.endPoint=`${t}/${Or.websocket}`,this.httpEndpoint=ln(t),this._initializeOptions(e),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(e==null?void 0:e.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=oo.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const e=t.message;throw e.includes("Node.js")?new Error(`${e}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${e}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:co}))}disconnect(t,e){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},t?this.conn.close(t,e??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const e=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),e}async removeAllChannels(){const t=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,e,r){this.logger(t,e,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Lt.connecting:return rt.Connecting;case Lt.open:return rt.Open;case Lt.closing:return rt.Closing;default:return rt.Closed}}isConnected(){return this.connectionState()===rt.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,e={config:{}}){const r=`realtime:${t}`,n=this.getChannels().find(i=>i.topic===r);if(n)return n;{const i=new Gr(`realtime:${t}`,e,this);return this.channels.push(i),i}}push(t){const{topic:e,event:r,payload:n,ref:i}=t,o=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${e} ${r} (${i})`,n),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(e){this.log("error","error in heartbeat callback",e)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(e){this.log("error","error in heartbeat callback",e)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(uo,"heartbeat timeout"),setTimeout(()=>{var e;this.isConnected()||(e=this.reconnectTimer)===null||e===void 0||e.scheduleTimeout()},Xt.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(e){this.log("error","error in heartbeat callback",e)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let e=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));e&&(this.log("transport",`leaving duplicate topic "${t}"`),e.unsubscribe())}_remove(t){this.channels=this.channels.filter(e=>e.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,e=>{if(e.topic==="phoenix"&&e.event==="phx_reply")try{this.heartbeatCallback(e.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:n,payload:i,ref:o}=e,a=o?`(${o})`:"",l=i.status||"";this.log("receive",`${l} ${r} ${n} ${a}`.trim(),i),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(n,i,o)),this._triggerStateCallbacks("message",e)})}_clearTimer(t){var e;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((e=this.reconnectTimer)===null||e===void 0||e.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{e.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var e;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(e=this.reconnectTimer)===null||e===void 0||e.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(_e.error))}_appendParams(t,e){if(Object.keys(e).length===0)return t;const r=t.match(/\?/)?"&":"?",n=new URLSearchParams(e);return`${t}${r}${n}`}_workerObjectUrl(t){let e;if(t)e=t;else{const r=new Blob([xo],{type:"application/javascript"});e=URL.createObjectURL(r)}return e}_setConnectionState(t,e=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=e)}async _performAuth(t=null){let e;t?e=t:this.accessToken?e=await this.accessToken():e=this.accessTokenValue,this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(r=>{const n={access_token:e,version:lo};e&&r.updateJoinPayload(n),r.joinedOnce&&r._isJoined()&&r._push(_e.access_token,{access_token:e})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(e=>{this.log("error",`error setting auth in ${t}`,e)})}_triggerStateCallbacks(t,e){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(e)}catch(n){this.log("error",`error in ${t} callback`,n)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new on(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Xt.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var e,r,n,i,o,a,l,u,d;if(this.transport=(e=t==null?void 0:t.transport)!==null&&e!==void 0?e:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:Pr,this.heartbeatIntervalMs=(n=t==null?void 0:t.heartbeatIntervalMs)!==null&&n!==void 0?n:Xt.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=t==null?void 0:t.heartbeatCallback)!==null&&a!==void 0?a:yr,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=t==null?void 0:t.reconnectAfterMs)!==null&&l!==void 0?l:c=>vo[c-1]||_o,this.encode=(u=t==null?void 0:t.encode)!==null&&u!==void 0?u:(c,h)=>h(JSON.stringify(c)),this.decode=(d=t==null?void 0:t.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Vr extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function J(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}class To extends Vr{constructor(t,e,r){super(t),this.name="StorageApiError",this.status=e,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Ar extends Vr{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}}var Eo=function(s,t,e,r){function n(i){return i instanceof e?i:new e(function(o){o(i)})}return new(e||(e=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(c){o(c)}}function l(d){try{u(r.throw(d))}catch(c){o(c)}}function u(d){d.done?i(d.value):n(d.value).then(a,l)}u((r=r.apply(s,t||[])).next())})};const cn=s=>{let t;return s?t=s:typeof fetch>"u"?t=(...e)=>qt(async()=>{const{default:r}=await Promise.resolve().then(()=>Ct);return{default:r}},void 0).then(({default:r})=>r(...e)):t=fetch,(...e)=>t(...e)},So=()=>Eo(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield qt(()=>Promise.resolve().then(()=>Ct),void 0)).Response:Response}),jr=s=>{if(Array.isArray(s))return s.map(e=>jr(e));if(typeof s=="function"||s!==Object(s))return s;const t={};return Object.entries(s).forEach(([e,r])=>{const n=e.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[n]=jr(r)}),t},Po=s=>{if(typeof s!="object"||s===null)return!1;const t=Object.getPrototypeOf(s);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)};var ot=function(s,t,e,r){function n(i){return i instanceof e?i:new e(function(o){o(i)})}return new(e||(e=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(c){o(c)}}function l(d){try{u(r.throw(d))}catch(c){o(c)}}function u(d){d.done?i(d.value):n(d.value).then(a,l)}u((r=r.apply(s,t||[])).next())})};const wr=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),Oo=(s,t,e)=>ot(void 0,void 0,void 0,function*(){const r=yield So();s instanceof r&&!(e!=null&&e.noResolveJson)?s.json().then(n=>{const i=s.status||500,o=(n==null?void 0:n.statusCode)||i+"";t(new To(wr(n),i,o))}).catch(n=>{t(new Ar(wr(n),n))}):t(new Ar(wr(s),s))}),Co=(s,t,e,r)=>{const n={method:s,headers:(t==null?void 0:t.headers)||{}};return s==="GET"||!r?n:(Po(r)?(n.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),n.body=JSON.stringify(r)):n.body=r,t!=null&&t.duplex&&(n.duplex=t.duplex),Object.assign(Object.assign({},n),e))};function Ht(s,t,e,r,n,i){return ot(this,void 0,void 0,function*(){return new Promise((o,a)=>{s(e,Co(t,r,n,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>Oo(l,a,r))})})}function rr(s,t,e,r){return ot(this,void 0,void 0,function*(){return Ht(s,"GET",t,e,r)})}function ke(s,t,e,r,n){return ot(this,void 0,void 0,function*(){return Ht(s,"POST",t,r,n,e)})}function Rr(s,t,e,r,n){return ot(this,void 0,void 0,function*(){return Ht(s,"PUT",t,r,n,e)})}function Ao(s,t,e,r){return ot(this,void 0,void 0,function*(){return Ht(s,"HEAD",t,Object.assign(Object.assign({},e),{noResolveJson:!0}),r)})}function un(s,t,e,r,n){return ot(this,void 0,void 0,function*(){return Ht(s,"DELETE",t,r,n,e)})}var ne=function(s,t,e,r){function n(i){return i instanceof e?i:new e(function(o){o(i)})}return new(e||(e=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(c){o(c)}}function l(d){try{u(r.throw(d))}catch(c){o(c)}}function u(d){d.done?i(d.value):n(d.value).then(a,l)}u((r=r.apply(s,t||[])).next())})};const jo={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},vs={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Ro{constructor(t,e={},r,n){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=r,this.fetch=cn(n)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,e,r,n){return ne(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},vs),n);let a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),n!=null&&n.headers&&(a=Object.assign(Object.assign({},a),n.headers));const u=this._removeEmptyFolders(e),d=this._getFinalPath(u),c=yield(t=="PUT"?Rr:ke)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:c.Id,fullPath:c.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(J(i))return{data:null,error:i};throw i}})}upload(t,e,r){return ne(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,e,r)})}uploadToSignedUrl(t,e,r,n){return ne(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",e);try{let l;const u=Object.assign({upsert:vs.upsert},n),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const c=yield Rr(this.fetch,a.toString(),l,{headers:d});return{data:{path:i,fullPath:c.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(J(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,e){return ne(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const n=Object.assign({},this.headers);e!=null&&e.upsert&&(n["x-upsert"]="true");const i=yield ke(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:n}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new Vr("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(J(r))return{data:null,error:r};throw r}})}update(t,e,r){return ne(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,e,r)})}move(t,e,r){return ne(this,void 0,void 0,function*(){try{return{data:yield ke(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(J(n))return{data:null,error:n};throw n}})}copy(t,e,r){return ne(this,void 0,void 0,function*(){try{return{data:{path:(yield ke(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(J(n))return{data:null,error:n};throw n}})}createSignedUrl(t,e,r){return ne(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t),i=yield ke(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:e},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(J(n))return{data:null,error:n};throw n}})}createSignedUrls(t,e,r){return ne(this,void 0,void 0,function*(){try{const n=yield ke(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:e,paths:t},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:n.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(J(n))return{data:null,error:n};throw n}})}download(t,e){return ne(this,void 0,void 0,function*(){const n=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(t);return{data:yield(yield rr(this.fetch,`${this.url}/${n}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(J(a))return{data:null,error:a};throw a}})}info(t){return ne(this,void 0,void 0,function*(){const e=this._getFinalPath(t);try{const r=yield rr(this.fetch,`${this.url}/object/info/${e}`,{headers:this.headers});return{data:jr(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(J(r))return{data:null,error:r};throw r}})}exists(t){return ne(this,void 0,void 0,function*(){const e=this._getFinalPath(t);try{return yield Ao(this.fetch,`${this.url}/object/${e}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(J(r)&&r instanceof Ar){const n=r.originalError;if([400,404].includes(n==null?void 0:n.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,e){const r=this._getFinalPath(t),n=[],i=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";i!==""&&n.push(i);const a=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});l!==""&&n.push(l);let u=n.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${u}`)}}}remove(t){return ne(this,void 0,void 0,function*(){try{return{data:yield un(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(J(e))return{data:null,error:e};throw e}})}list(t,e,r){return ne(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},jo),e),{prefix:t||""});return{data:yield ke(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(J(n))return{data:null,error:n};throw n}})}listV2(t,e){return ne(this,void 0,void 0,function*(){try{const r=Object.assign({},t);return{data:yield ke(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},e),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(J(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}}const Io="2.12.0",$o={"X-Client-Info":`storage-js/${Io}`};var ft=function(s,t,e,r){function n(i){return i instanceof e?i:new e(function(o){o(i)})}return new(e||(e=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(c){o(c)}}function l(d){try{u(r.throw(d))}catch(c){o(c)}}function u(d){d.done?i(d.value):n(d.value).then(a,l)}u((r=r.apply(s,t||[])).next())})};class Do{constructor(t,e={},r,n){this.shouldThrowOnError=!1;const i=new URL(t);n!=null&&n.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},$o),e),this.fetch=cn(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return ft(this,void 0,void 0,function*(){try{return{data:yield rr(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(J(t))return{data:null,error:t};throw t}})}getBucket(t){return ft(this,void 0,void 0,function*(){try{return{data:yield rr(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(J(e))return{data:null,error:e};throw e}})}createBucket(t,e={public:!1}){return ft(this,void 0,void 0,function*(){try{return{data:yield ke(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(J(r))return{data:null,error:r};throw r}})}updateBucket(t,e){return ft(this,void 0,void 0,function*(){try{return{data:yield Rr(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(J(r))return{data:null,error:r};throw r}})}emptyBucket(t){return ft(this,void 0,void 0,function*(){try{return{data:yield ke(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(J(e))return{data:null,error:e};throw e}})}deleteBucket(t){return ft(this,void 0,void 0,function*(){try{return{data:yield un(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(J(e))return{data:null,error:e};throw e}})}}class Mo extends Do{constructor(t,e={},r,n){super(t,e,r,n)}from(t){return new Ro(this.url,this.headers,t,this.fetch)}}const No="2.57.3";let Nt="";typeof Deno<"u"?Nt="deno":typeof document<"u"?Nt="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Nt="react-native":Nt="node";const Lo={"X-Client-Info":`supabase-js-${Nt}/${No}`},Uo={headers:Lo},Bo={schema:"public"},Wo={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},qo={};var Fo=function(s,t,e,r){function n(i){return i instanceof e?i:new e(function(o){o(i)})}return new(e||(e=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(c){o(c)}}function l(d){try{u(r.throw(d))}catch(c){o(c)}}function u(d){d.done?i(d.value):n(d.value).then(a,l)}u((r=r.apply(s,t||[])).next())})};const Ho=s=>{let t;return s?t=s:typeof fetch>"u"?t=Vs:t=fetch,(...e)=>t(...e)},zo=()=>typeof Headers>"u"?Ks:Headers,Yo=(s,t,e)=>{const r=Ho(e),n=zo();return(i,o)=>Fo(void 0,void 0,void 0,function*(){var a;const l=(a=yield t())!==null&&a!==void 0?a:s;let u=new n(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",s),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(i,Object.assign(Object.assign({},o),{headers:u}))})};var Go=function(s,t,e,r){function n(i){return i instanceof e?i:new e(function(o){o(i)})}return new(e||(e=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(c){o(c)}}function l(d){try{u(r.throw(d))}catch(c){o(c)}}function u(d){d.done?i(d.value):n(d.value).then(a,l)}u((r=r.apply(s,t||[])).next())})};function Vo(s){return s.endsWith("/")?s:s+"/"}function Ko(s,t){var e,r;const{db:n,auth:i,realtime:o,global:a}=s,{db:l,auth:u,realtime:d,global:c}=t,h={db:Object.assign(Object.assign({},l),n),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},c),a),{headers:Object.assign(Object.assign({},(e=c==null?void 0:c.headers)!==null&&e!==void 0?e:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>Go(this,void 0,void 0,function*(){return""})};return s.accessToken?h.accessToken=s.accessToken:delete h.accessToken,h}function Jo(s){const t=s==null?void 0:s.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Vo(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const dn="2.71.1",bt=30*1e3,Ir=3,br=Ir*bt,Qo="http://localhost:9999",Xo="supabase.auth.token",Zo={"X-Client-Info":`gotrue-js/${dn}`},$r="X-Supabase-Api-Version",hn={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},ea=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,ta=10*60*1e3;class Kr extends Error{constructor(t,e,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=e,this.code=r}}function E(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class ra extends Kr{constructor(t,e,r){super(t,e,r),this.name="AuthApiError",this.status=e,this.code=r}}function sa(s){return E(s)&&s.name==="AuthApiError"}class fn extends Kr{constructor(t,e){super(t),this.name="AuthUnknownError",this.originalError=e}}class Ke extends Kr{constructor(t,e,r,n){super(t,r,n),this.name=e,this.status=r}}class qe extends Ke{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function na(s){return E(s)&&s.name==="AuthSessionMissingError"}class Zt extends Ke{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class er extends Ke{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class tr extends Ke{constructor(t,e=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function ia(s){return E(s)&&s.name==="AuthImplicitGrantRedirectError"}class _s extends Ke{constructor(t,e=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Dr extends Ke{constructor(t,e){super(t,"AuthRetryableFetchError",e,void 0)}}function vr(s){return E(s)&&s.name==="AuthRetryableFetchError"}class xs extends Ke{constructor(t,e,r){super(t,"AuthWeakPasswordError",e,"weak_password"),this.reasons=r}}class Mr extends Ke{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const sr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ks=` 	
\r=`.split(""),oa=(()=>{const s=new Array(128);for(let t=0;t<s.length;t+=1)s[t]=-1;for(let t=0;t<ks.length;t+=1)s[ks[t].charCodeAt(0)]=-2;for(let t=0;t<sr.length;t+=1)s[sr[t].charCodeAt(0)]=t;return s})();function Ts(s,t,e){if(s!==null)for(t.queue=t.queue<<8|s,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;e(sr[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;e(sr[r]),t.queuedBits-=6}}function gn(s,t,e){const r=oa[s];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)e(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(s)}"`)}}function Es(s){const t=[],e=o=>{t.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},i=o=>{ca(o,r,e)};for(let o=0;o<s.length;o+=1)gn(s.charCodeAt(o),n,i);return t.join("")}function aa(s,t){if(s<=127){t(s);return}else if(s<=2047){t(192|s>>6),t(128|s&63);return}else if(s<=65535){t(224|s>>12),t(128|s>>6&63),t(128|s&63);return}else if(s<=1114111){t(240|s>>18),t(128|s>>12&63),t(128|s>>6&63),t(128|s&63);return}throw new Error(`Unrecognized Unicode codepoint: ${s.toString(16)}`)}function la(s,t){for(let e=0;e<s.length;e+=1){let r=s.charCodeAt(e);if(r>55295&&r<=56319){const n=(r-55296)*1024&65535;r=(s.charCodeAt(e+1)-56320&65535|n)+65536,e+=1}aa(r,t)}}function ca(s,t,e){if(t.utf8seq===0){if(s<=127){e(s);return}for(let r=1;r<6;r+=1)if(!(s>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=s&31;else if(t.utf8seq===3)t.codepoint=s&15;else if(t.utf8seq===4)t.codepoint=s&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(s<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|s&63,t.utf8seq-=1,t.utf8seq===0&&e(t.codepoint)}}function ua(s){const t=[],e={queue:0,queuedBits:0},r=n=>{t.push(n)};for(let n=0;n<s.length;n+=1)gn(s.charCodeAt(n),e,r);return new Uint8Array(t)}function da(s){const t=[];return la(s,e=>t.push(e)),new Uint8Array(t)}function ha(s){const t=[],e={queue:0,queuedBits:0},r=n=>{t.push(n)};return s.forEach(n=>Ts(n,e,r)),Ts(null,e,r),t.join("")}function fa(s){return Math.round(Date.now()/1e3)+s}function ga(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){const t=Math.random()*16|0;return(s=="x"?t:t&3|8).toString(16)})}const ve=()=>typeof window<"u"&&typeof document<"u",Xe={tested:!1,writable:!1},mn=()=>{if(!ve())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Xe.tested)return Xe.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),Xe.tested=!0,Xe.writable=!0}catch{Xe.tested=!0,Xe.writable=!1}return Xe.writable};function ma(s){const t={},e=new URL(s);if(e.hash&&e.hash[0]==="#")try{new URLSearchParams(e.hash.substring(1)).forEach((n,i)=>{t[i]=n})}catch{}return e.searchParams.forEach((r,n)=>{t[n]=r}),t}const pn=s=>{let t;return s?t=s:typeof fetch>"u"?t=(...e)=>qt(async()=>{const{default:r}=await Promise.resolve().then(()=>Ct);return{default:r}},void 0).then(({default:r})=>r(...e)):t=fetch,(...e)=>t(...e)},pa=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",vt=async(s,t,e)=>{await s.setItem(t,JSON.stringify(e))},Ze=async(s,t)=>{const e=await s.getItem(t);if(!e)return null;try{return JSON.parse(e)}catch{return e}},Le=async(s,t)=>{await s.removeItem(t)};class ur{constructor(){this.promise=new ur.promiseConstructor((t,e)=>{this.resolve=t,this.reject=e})}}ur.promiseConstructor=Promise;function _r(s){const t=s.split(".");if(t.length!==3)throw new Mr("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!ea.test(t[r]))throw new Mr("JWT not in base64url format");return{header:JSON.parse(Es(t[0])),payload:JSON.parse(Es(t[1])),signature:ua(t[2]),raw:{header:t[0],payload:t[1]}}}async function ya(s){return await new Promise(t=>{setTimeout(()=>t(null),s)})}function wa(s,t){return new Promise((r,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await s(i);if(!t(i,null,o)){r(o);return}}catch(o){if(!t(i,o)){n(o);return}}})()})}function ba(s){return("0"+s.toString(16)).substr(-2)}function va(){const t=new Uint32Array(56);if(typeof crypto>"u"){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=e.length;let n="";for(let i=0;i<56;i++)n+=e.charAt(Math.floor(Math.random()*r));return n}return crypto.getRandomValues(t),Array.from(t,ba).join("")}async function _a(s){const e=new TextEncoder().encode(s),r=await crypto.subtle.digest("SHA-256",e),n=new Uint8Array(r);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}async function xa(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const e=await _a(s);return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function gt(s,t,e=!1){const r=va();let n=r;e&&(n+="/PASSWORD_RECOVERY"),await vt(s,`${t}-code-verifier`,n);const i=await xa(r);return[i,r===i?"plain":"s256"]}const ka=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Ta(s){const t=s.headers.get($r);if(!t||!t.match(ka))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Ea(s){if(!s)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(s<=t)throw new Error("JWT has expired")}function Sa(s){switch(s){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Pa=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function mt(s){if(!Pa.test(s))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function xr(){const s={};return new Proxy(s,{get:(t,e)=>{if(e==="__isUserNotAvailableProxy")return!0;if(typeof e=="symbol"){const r=e.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${e}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,e)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${e}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,e)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${e}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Ss(s){return JSON.parse(JSON.stringify(s))}var Oa=function(s,t){var e={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&t.indexOf(r)<0&&(e[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(s);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(s,r[n])&&(e[r[n]]=s[r[n]]);return e};const et=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),Ca=[502,503,504];async function Ps(s){var t;if(!pa(s))throw new Dr(et(s),0);if(Ca.includes(s.status))throw new Dr(et(s),s.status);let e;try{e=await s.json()}catch(i){throw new fn(et(i),i)}let r;const n=Ta(s);if(n&&n.getTime()>=hn["2024-01-01"].timestamp&&typeof e=="object"&&e&&typeof e.code=="string"?r=e.code:typeof e=="object"&&e&&typeof e.error_code=="string"&&(r=e.error_code),r){if(r==="weak_password")throw new xs(et(e),s.status,((t=e.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new qe}else if(typeof e=="object"&&e&&typeof e.weak_password=="object"&&e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new xs(et(e),s.status,e.weak_password.reasons);throw new ra(et(e),s.status||500,r)}const Aa=(s,t,e,r)=>{const n={method:s,headers:(t==null?void 0:t.headers)||{}};return s==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),n.body=JSON.stringify(r),Object.assign(Object.assign({},n),e))};async function C(s,t,e,r){var n;const i=Object.assign({},r==null?void 0:r.headers);i[$r]||(i[$r]=hn["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(n=r==null?void 0:r.query)!==null&&n!==void 0?n:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await ja(s,t,e+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function ja(s,t,e,r,n,i){const o=Aa(t,r,n,i);let a;try{a=await s(e,Object.assign({},o))}catch(l){throw console.error(l),new Dr(et(l),0)}if(a.ok||await Ps(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await Ps(l)}}function Ie(s){var t;let e=null;Da(s)&&(e=Object.assign({},s),s.expires_at||(e.expires_at=fa(s.expires_in)));const r=(t=s.user)!==null&&t!==void 0?t:s;return{data:{session:e,user:r},error:null}}function Os(s){const t=Ie(s);return!t.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((e,r)=>e&&typeof r=="string",!0)&&(t.data.weak_password=s.weak_password),t}function He(s){var t;return{data:{user:(t=s.user)!==null&&t!==void 0?t:s},error:null}}function Ra(s){return{data:s,error:null}}function Ia(s){const{action_link:t,email_otp:e,hashed_token:r,redirect_to:n,verification_type:i}=s,o=Oa(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:e,hashed_token:r,redirect_to:n,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function $a(s){return s}function Da(s){return s.access_token&&s.refresh_token&&s.expires_in}const kr=["global","local","others"];var Ma=function(s,t){var e={};for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&t.indexOf(r)<0&&(e[r]=s[r]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(s);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(s,r[n])&&(e[r[n]]=s[r[n]]);return e};class Na{constructor({url:t="",headers:e={},fetch:r}){this.url=t,this.headers=e,this.fetch=pn(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,e=kr[0]){if(kr.indexOf(e)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${kr.join(", ")}`);try{return await C(this.fetch,"POST",`${this.url}/logout?scope=${e}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(E(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,e={}){try{return await C(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:e.data},headers:this.headers,redirectTo:e.redirectTo,xform:He})}catch(r){if(E(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:e}=t,r=Ma(t,["options"]),n=Object.assign(Object.assign({},r),e);return"newEmail"in r&&(n.new_email=r==null?void 0:r.newEmail,delete n.newEmail),await C(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:Ia,redirectTo:e==null?void 0:e.redirectTo})}catch(e){if(E(e))return{data:{properties:null,user:null},error:e};throw e}}async createUser(t){try{return await C(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:He})}catch(e){if(E(e))return{data:{user:null},error:e};throw e}}async listUsers(t){var e,r,n,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},d=await C(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(e=t==null?void 0:t.page)===null||e===void 0?void 0:e.toString())!==null&&r!==void 0?r:"",per_page:(i=(n=t==null?void 0:t.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:$a});if(d.error)throw d.error;const c=await d.json(),h=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return f.length>0&&(f.forEach(g=>{const v=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),p=JSON.parse(g.split(";")[1].split("=")[1]);u[`${p}Page`]=v}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},c),u),error:null}}catch(u){if(E(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){mt(t);try{return await C(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:He})}catch(e){if(E(e))return{data:{user:null},error:e};throw e}}async updateUserById(t,e){mt(t);try{return await C(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:e,headers:this.headers,xform:He})}catch(r){if(E(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,e=!1){mt(t);try{return await C(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:e},xform:He})}catch(r){if(E(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){mt(t.userId);try{const{data:e,error:r}=await C(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:e,error:r}}catch(e){if(E(e))return{data:null,error:e};throw e}}async _deleteFactor(t){mt(t.userId),mt(t.id);try{return{data:await C(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(e){if(E(e))return{data:null,error:e};throw e}}}function Cs(s={}){return{getItem:t=>s[t]||null,setItem:(t,e)=>{s[t]=e},removeItem:t=>{delete s[t]}}}function La(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const pt={debug:!!(globalThis&&mn()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class yn extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class Ua extends yn{}async function Ba(s,t,e){pt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),pt.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(s,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async n=>{if(n){pt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,n.name);try{return await e()}finally{pt.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,n.name)}}else{if(t===0)throw pt.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new Ua(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(pt.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await e()}}))}La();const Wa={url:Qo,storageKey:Xo,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Zo,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function As(s,t,e){return await e()}const yt={};class Wt{constructor(t){var e,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Wt.nextInstanceID,Wt.nextInstanceID+=1,this.instanceID>0&&ve()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},Wa),t);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new Na({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=pn(n.fetch),this.lock=n.lock||As,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:ve()&&(!((e=globalThis==null?void 0:globalThis.navigator)===null||e===void 0)&&e.locks)?this.lock=Ba:this.lock=As,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(n.storage?this.storage=n.storage:mn()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Cs(this.memoryStorage)),n.userStorage&&(this.userStorage=n.userStorage)):(this.memoryStorage={},this.storage=Cs(this.memoryStorage)),ve()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,e;return(e=(t=yt[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&e!==void 0?e:{keys:[]}}set jwks(t){yt[this.storageKey]=Object.assign(Object.assign({},yt[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,e;return(e=(t=yt[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&e!==void 0?e:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){yt[this.storageKey]=Object.assign(Object.assign({},yt[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${dn}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const e=ma(window.location.href);let r="none";if(this._isImplicitGrantCallback(e)?r="implicit":await this._isPKCECallback(e)&&(r="pkce"),ve()&&this.detectSessionInUrl&&r!=="none"){const{data:n,error:i}=await this._getSessionFromURL(e,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),ia(i)){const l=(t=i.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=n;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return E(e)?{error:e}:{error:new fn("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var e,r,n;try{const i=await C(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(e=t==null?void 0:t.options)===null||e===void 0?void 0:e.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.captchaToken}},xform:Ie}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(E(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var e,r,n;try{let i;if("email"in t){const{email:d,password:c,options:h}=t;let f=null,g=null;this.flowType==="pkce"&&([f,g]=await gt(this.storage,this.storageKey)),i=await C(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:c,data:(e=h==null?void 0:h.data)!==null&&e!==void 0?e:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:f,code_challenge_method:g},xform:Ie})}else if("phone"in t){const{phone:d,password:c,options:h}=t;i=await C(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:c,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},channel:(n=h==null?void 0:h.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Ie})}else throw new er("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(E(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let e;if("email"in t){const{email:i,password:o,options:a}=t;e=await C(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Os})}else if("phone"in t){const{phone:i,password:o,options:a}=t;e=await C(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Os})}else throw new er("You must provide either an email or phone number and a password");const{data:r,error:n}=e;return n?{data:{user:null,session:null},error:n}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Zt}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:n})}catch(e){if(E(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithOAuth(t){var e,r,n,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(e=t.options)===null||e===void 0?void 0:e.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(n=t.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:e}=t;if(e==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${e}"`)}async signInWithSolana(t){var e,r,n,i,o,a,l,u,d,c,h,f;let g,v;if("message"in t)g=t.message,v=t.signature;else{const{chain:p,wallet:m,statement:x,options:y}=t;let w;if(ve())if(typeof m=="object")w=m;else{const k=window;if("solana"in k&&typeof k.solana=="object"&&("signIn"in k.solana&&typeof k.solana.signIn=="function"||"signMessage"in k.solana&&typeof k.solana.signMessage=="function"))w=k.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof m!="object"||!(y!=null&&y.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=m}const T=new URL((e=y==null?void 0:y.url)!==null&&e!==void 0?e:window.location.href);if("signIn"in w&&w.signIn){const k=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},y==null?void 0:y.signInWithSolana),{version:"1",domain:T.host,uri:T.href}),x?{statement:x}:null));let I;if(Array.isArray(k)&&k[0]&&typeof k[0]=="object")I=k[0];else if(k&&typeof k=="object"&&"signedMessage"in k&&"signature"in k)I=k;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in I&&"signature"in I&&(typeof I.signedMessage=="string"||I.signedMessage instanceof Uint8Array)&&I.signature instanceof Uint8Array)g=typeof I.signedMessage=="string"?I.signedMessage:new TextDecoder().decode(I.signedMessage),v=I.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${T.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${T.href}`,`Issued At: ${(n=(r=y==null?void 0:y.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((i=y==null?void 0:y.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${y.signInWithSolana.notBefore}`]:[],...!((o=y==null?void 0:y.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${y.signInWithSolana.expirationTime}`]:[],...!((a=y==null?void 0:y.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${y.signInWithSolana.chainId}`]:[],...!((l=y==null?void 0:y.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${y.signInWithSolana.nonce}`]:[],...!((u=y==null?void 0:y.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${y.signInWithSolana.requestId}`]:[],...!((c=(d=y==null?void 0:y.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||c===void 0)&&c.length?["Resources",...y.signInWithSolana.resources.map(I=>`- ${I}`)]:[]].join(`
`);const k=await w.signMessage(new TextEncoder().encode(g),"utf8");if(!k||!(k instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=k}}try{const{data:p,error:m}=await C(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:ha(v)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Ie});if(m)throw m;return!p||!p.session||!p.user?{data:{user:null,session:null},error:new Zt}:(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),{data:Object.assign({},p),error:m})}catch(p){if(E(p))return{data:{user:null,session:null},error:p};throw p}}async _exchangeCodeForSession(t){const e=await Ze(this.storage,`${this.storageKey}-code-verifier`),[r,n]=(e??"").split("/");try{const{data:i,error:o}=await C(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:Ie});if(await Le(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Zt}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:o})}catch(i){if(E(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:e,provider:r,token:n,access_token:i,nonce:o}=t,a=await C(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:n,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:e==null?void 0:e.captchaToken}},xform:Ie}),{data:l,error:u}=a;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Zt}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(e){if(E(e))return{data:{user:null,session:null},error:e};throw e}}async signInWithOtp(t){var e,r,n,i,o;try{if("email"in t){const{email:a,options:l}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await gt(this.storage,this.storageKey));const{error:c}=await C(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(e=l==null?void 0:l.data)!==null&&e!==void 0?e:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:c}}if("phone"in t){const{phone:a,options:l}=t,{data:u,error:d}=await C(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new er("You must provide either an email or phone number.")}catch(a){if(E(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(t){var e,r;try{let n,i;"options"in t&&(n=(e=t.options)===null||e===void 0?void 0:e.redirectTo,i=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await C(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:Ie});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(n){if(E(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(t){var e,r,n;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await gt(this.storage,this.storageKey)),await C(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(e=t.options)===null||e===void 0?void 0:e.redirectTo)!==null&&r!==void 0?r:void 0}),!((n=t==null?void 0:t.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:Ra})}catch(i){if(E(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:e},error:r}=t;if(r)throw r;if(!e)throw new qe;const{error:n}=await C(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:e.access_token});return{data:{user:null,session:null},error:n}})}catch(t){if(E(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const e=`${this.url}/resend`;if("email"in t){const{email:r,type:n,options:i}=t,{error:o}=await C(this.fetch,"POST",e,{headers:this.headers,body:{email:r,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:r,type:n,options:i}=t,{data:o,error:a}=await C(this.fetch,"POST",e,{headers:this.headers,body:{phone:r,type:n,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new er("You must provide either an email or phone number and a type")}catch(e){if(E(e))return{data:{user:null,session:null},error:e};throw e}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(t,e){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await r,await e()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=e();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const e=await this.__loadSession();return await t(e)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const e=await Ze(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",e),e!==null&&(this._isValidSession(e)?t=e:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<br:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const o=await Ze(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=xr()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(l,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,d))})}return{data:{session:t},error:null}}const{session:n,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await C(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:He}):await this._useSession(async e=>{var r,n,i;const{data:o,error:a}=e;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new qe}:await C(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:He})})}catch(e){if(E(e))return na(e)&&(await this._removeSession(),await Le(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:e};throw e}}async updateUser(t,e={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,e))}async _updateUser(t,e={}){try{return await this._useSession(async r=>{const{data:n,error:i}=r;if(i)throw i;if(!n.session)throw new qe;const o=n.session;let a=null,l=null;this.flowType==="pkce"&&t.email!=null&&([a,l]=await gt(this.storage,this.storageKey));const{data:u,error:d}=await C(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:e==null?void 0:e.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:He});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(E(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new qe;const e=Date.now()/1e3;let r=e,n=!0,i=null;const{payload:o}=_r(t.access_token);if(o.exp&&(r=o.exp,n=r<=e),n){const{session:a,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(t.access_token);if(l)throw l;i={access_token:t.access_token,refresh_token:t.refresh_token,user:a.user,token_type:"bearer",expires_in:r-e,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(e){if(E(e))return{data:{session:null,user:null},error:e};throw e}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async e=>{var r;if(!t){const{data:o,error:a}=e;if(a)throw a;t=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new qe;const{session:n,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(e){if(E(e))return{data:{user:null,session:null},error:e};throw e}}async _getSessionFromURL(t,e){try{if(!ve())throw new tr("No browser detected.");if(t.error||t.error_description||t.error_code)throw new tr(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(e){case"implicit":if(this.flowType==="pkce")throw new _s("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new tr("Not a valid implicit grant flow url.");break;default:}if(e==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new _s("No code detected.");const{data:x,error:y}=await this._exchangeCodeForSession(t.code);if(y)throw y;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:n,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=t;if(!i||!a||!o||!u)throw new tr("No session defined in URL");const d=Math.round(Date.now()/1e3),c=parseInt(a);let h=d+c;l&&(h=parseInt(l));const f=h-d;f*1e3<=bt&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${c}s`);const g=h-c;d-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,h,d):d-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,h,d);const{data:v,error:p}=await this._getUser(i);if(p)throw p;const m={provider_token:r,provider_refresh_token:n,access_token:i,expires_in:c,expires_at:h,refresh_token:o,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:m,redirectType:t.type},error:null}}catch(r){if(E(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const e=await Ze(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&e)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async e=>{var r;const{data:n,error:i}=e;if(i)return{error:i};const o=(r=n.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,t);if(a&&!(sa(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return t!=="others"&&(await this._removeSession(),await Le(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const e=ga(),r={id:e,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",e),this.stateChangeEmitters.delete(e)}};return this._debug("#onAuthStateChange()","registered callback with id",e),this.stateChangeEmitters.set(e,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(e)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async e=>{var r,n;try{const{data:{session:i},error:o}=e;if(o)throw o;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,e={}){let r=null,n=null;this.flowType==="pkce"&&([r,n]=await gt(this.storage,this.storageKey,!0));try{return await C(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:n,gotrue_meta_security:{captcha_token:e.captchaToken}},headers:this.headers,redirectTo:e.redirectTo})}catch(i){if(E(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:e,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=e.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(e){if(E(e))return{data:null,error:e};throw e}}async linkIdentity(t){var e;try{const{data:r,error:n}=await this._useSession(async i=>{var o,a,l,u,d;const{data:c,error:h}=i;if(h)throw h;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await C(this.fetch,"GET",f,{headers:this.headers,jwt:(d=(u=c.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(n)throw n;return ve()&&!(!((e=t.options)===null||e===void 0)&&e.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(E(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async e=>{var r,n;const{data:i,error:o}=e;if(o)throw o;return await C(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(n=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&n!==void 0?n:void 0})})}catch(e){if(E(e))return{data:null,error:e};throw e}}async _refreshAccessToken(t){const e=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(e,"begin");try{const r=Date.now();return await wa(async n=>(n>0&&await ya(200*Math.pow(2,n-1)),this._debug(e,"refreshing attempt",n),await C(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ie})),(n,i)=>{const o=200*Math.pow(2,n);return i&&vr(i)&&Date.now()+o-r<bt})}catch(r){if(this._debug(e,"error",r),E(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(e,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,e){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:e.redirectTo,scopes:e.scopes,queryParams:e.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",e,"url",r),ve()&&!e.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,e;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await Ze(this.storage,this.storageKey);if(n&&this.userStorage){let o=await Ze(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:n.user},await vt(this.userStorage,this.storageKey+"-user",o)),n.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:xr()}else if(n&&!n.user&&!n.user){const o=await Ze(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(n.user=o.user,await Le(this.storage,this.storageKey+"-user"),await vt(this.storage,this.storageKey,n)):n.user=xr()}if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const i=((e=n.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<br;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${br}s`),i){if(this.autoRefreshToken&&n.refresh_token){const{error:o}=await this._callRefreshToken(n.refresh_token);o&&(console.error(o),vr(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(n.user&&n.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(n.access_token);!a&&(o!=null&&o.user)?(n.user=o.user,await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var e,r;if(!t)throw new qe;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new ur;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new qe;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(n,"error",i),E(i)){const o={session:null,error:i};return vr(i)||await this._removeSession(),(e=this.refreshingDeferred)===null||e===void 0||e.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(t,e,r=!0){const n=`#_notifyAllSubscribers(${t})`;this._debug(n,"begin",e,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:e});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(t,e)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const e=Object.assign({},t),r=e.user&&e.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&e.user&&await vt(this.userStorage,this.storageKey+"-user",{user:e.user});const n=Object.assign({},e);delete n.user;const i=Ss(n);await vt(this.storage,this.storageKey,i)}else{const n=Ss(e);await vt(this.storage,this.storageKey,n)}}async _removeSession(){this._debug("#_removeSession()"),await Le(this.storage,this.storageKey),await Le(this.storage,this.storageKey+"-code-verifier"),await Le(this.storage,this.storageKey+"-user"),this.userStorage&&await Le(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&ve()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(e){console.error("removing visibilitychange callback failed",e)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),bt);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async e=>{const{data:{session:r}}=e;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((r.expires_at*1e3-t)/bt);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${bt}ms, refresh threshold is ${Ir} ticks`),n<=Ir&&await this._callRefreshToken(r.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof yn)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ve()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const e=`#_onVisibilityChanged(${t})`;this._debug(e,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(e,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,e,r){const n=[`provider=${encodeURIComponent(e)}`];if(r!=null&&r.redirectTo&&n.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&n.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await gt(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});n.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);n.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&n.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${n.join("&")}`}async _unenroll(t){try{return await this._useSession(async e=>{var r;const{data:n,error:i}=e;return i?{data:null,error:i}:await C(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token})})}catch(e){if(E(e))return{data:null,error:e};throw e}}async _enroll(t){try{return await this._useSession(async e=>{var r,n;const{data:i,error:o}=e;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:l,error:u}=await C(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((n=l==null?void 0:l.totp)===null||n===void 0)&&n.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(e){if(E(e))return{data:null,error:e};throw e}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async e=>{var r;const{data:n,error:i}=e;if(i)return{data:null,error:i};const{data:o,error:a}=await C(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(e){if(E(e))return{data:null,error:e};throw e}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async e=>{var r;const{data:n,error:i}=e;return i?{data:null,error:i}:await C(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=n==null?void 0:n.session)===null||r===void 0?void 0:r.access_token})})}catch(e){if(E(e))return{data:null,error:e};throw e}})}async _challengeAndVerify(t){const{data:e,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:e.id,code:t.code})}async _listFactors(){const{data:{user:t},error:e}=await this.getUser();if(e)return{data:null,error:e};const r=(t==null?void 0:t.factors)||[],n=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:n,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var e,r;const{data:{session:n},error:i}=t;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=_r(n.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(e=n.user.factors)===null||e===void 0?void 0:e.filter(c=>c.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const d=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,e={keys:[]}){let r=e.keys.find(a=>a.kid===t);if(r)return r;const n=Date.now();if(r=this.jwks.keys.find(a=>a.kid===t),r&&this.jwks_cached_at+ta>n)return r;const{data:i,error:o}=await C(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=n,r=i.keys.find(a=>a.kid===t),!r)?null:r}async getClaims(t,e={}){try{let r=t;if(!r){const{data:f,error:g}=await this.getSession();if(g||!f.session)return{data:null,error:g};r=f.session.access_token}const{header:n,payload:i,signature:o,raw:{header:a,payload:l}}=_r(r);e!=null&&e.allowExpired||Ea(i.exp);const u=!n.alg||n.alg.startsWith("HS")||!n.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(n.kid,e!=null&&e.keys?{keys:e.keys}:e==null?void 0:e.jwks);if(!u){const{error:f}=await this.getUser(r);if(f)throw f;return{data:{claims:i,header:n,signature:o},error:null}}const d=Sa(n.alg),c=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,c,o,da(`${a}.${l}`)))throw new Mr("Invalid JWT signature");return{data:{claims:i,header:n,signature:o},error:null}}catch(r){if(E(r))return{data:null,error:r};throw r}}}Wt.nextInstanceID=0;const qa=Wt;class Fa extends qa{constructor(t){super(t)}}var Ha=function(s,t,e,r){function n(i){return i instanceof e?i:new e(function(o){o(i)})}return new(e||(e=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(c){o(c)}}function l(d){try{u(r.throw(d))}catch(c){o(c)}}function u(d){d.done?i(d.value):n(d.value).then(a,l)}u((r=r.apply(s,t||[])).next())})};class za{constructor(t,e,r){var n,i,o;this.supabaseUrl=t,this.supabaseKey=e;const a=Jo(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,u={db:Bo,realtime:qo,auth:Object.assign(Object.assign({},Wo),{storageKey:l}),global:Uo},d=Ko(r??{},u);this.storageKey=(n=d.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(c,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=Yo(e,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new io(new URL("rest/v1",a).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new Mo(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new Ni(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},r={}){return this.rest.rpc(t,e,r)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,e;return Ha(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(e=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&e!==void 0?e:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:n,userStorage:i,storageKey:o,flowType:a,lock:l,debug:u},d,c){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Fa({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),d),storageKey:o,autoRefreshToken:t,persistSession:e,detectSessionInUrl:r,storage:n,userStorage:i,flowType:a,lock:l,debug:u,fetch:c,hasCustomAuthorizationHeader:Object.keys(this.headers).some(f=>f.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new ko(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,r)=>{this._handleTokenChanged(e,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,e,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Ya=(s,t,e)=>new za(s,t,e);function Ga(){if(typeof window<"u"||typeof process>"u")return!1;const s=process.version;if(s==null)return!1;const t=s.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}Ga()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Va="https://rhibyqyxpkcouaxhicgr.supabase.co",Ka="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJoaWJ5cXl4cGtjb3VheGhpY2dyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzY3NjQwMDAsImV4cCI6MjA1MjM0MDAwMH0.La6DhxuaSSOoEvwiTHh6AL0geOJliwPzg3l7dw9ZBME",Ja=async(s,t)=>{const e=await fetch(s,t),{status:r}=e,n=(t==null?void 0:t.method)==="GET",{auth:{unAuth:i},somethingWentWrong:o}=Gs.error;if(!e.ok&&!n){if(r===403)throw ds.error(i),new Error("Not Authorized");ds.error(o,{id:ji})}return e},zd=Ya(Va,Ka,{global:{fetch:Ja}});class Yd{constructor(t,e,r){_(this,"message");_(this,"statusCode");_(this,"code");this.message=t,this.statusCode=e,this.code=r}}function wn(s){var t,e,r="";if(typeof s=="string"||typeof s=="number")r+=s;else if(typeof s=="object")if(Array.isArray(s)){var n=s.length;for(t=0;t<n;t++)s[t]&&(e=wn(s[t]))&&(r&&(r+=" "),r+=e)}else for(e in s)s[e]&&(r&&(r+=" "),r+=e);return r}function Qa(){for(var s,t,e=0,r="",n=arguments.length;e<n;e++)(s=arguments[e])&&(t=wn(s))&&(r&&(r+=" "),r+=t);return r}const bn=6048e5,Xa=864e5,Za=6e4,el=36e5,tl=1e3,js=Symbol.for("constructDateFrom");function Z(s,t){return typeof s=="function"?s(t):s&&typeof s=="object"&&js in s?s[js](t):s instanceof Date?new s.constructor(t):new Date(t)}function G(s,t){return Z(t||s,s)}function vn(s,t,e){const r=G(s,e==null?void 0:e.in);return isNaN(t)?Z((e==null?void 0:e.in)||s,NaN):(t&&r.setDate(r.getDate()+t),r)}let rl={};function jt(){return rl}function Ve(s,t){var a,l,u,d;const e=jt(),r=(t==null?void 0:t.weekStartsOn)??((l=(a=t==null?void 0:t.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??e.weekStartsOn??((d=(u=e.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,n=G(s,t==null?void 0:t.in),i=n.getDay(),o=(i<r?7:0)+i-r;return n.setDate(n.getDate()-o),n.setHours(0,0,0,0),n}function Pt(s,t){return Ve(s,{...t,weekStartsOn:1})}function _n(s,t){const e=G(s,t==null?void 0:t.in),r=e.getFullYear(),n=Z(e,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const i=Pt(n),o=Z(e,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const a=Pt(o);return e.getTime()>=i.getTime()?r+1:e.getTime()>=a.getTime()?r:r-1}function nr(s){const t=G(s),e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),+s-+e}function sl(s,...t){const e=Z.bind(null,t.find(r=>typeof r=="object"));return t.map(e)}function Nr(s,t){const e=G(s,t==null?void 0:t.in);return e.setHours(0,0,0,0),e}function nl(s,t,e){const[r,n]=sl(e==null?void 0:e.in,s,t),i=Nr(r),o=Nr(n),a=+i-nr(i),l=+o-nr(o);return Math.round((a-l)/Xa)}function il(s,t){const e=_n(s,t),r=Z(s,0);return r.setFullYear(e,0,4),r.setHours(0,0,0,0),Pt(r)}function ol(s){return s instanceof Date||typeof s=="object"&&Object.prototype.toString.call(s)==="[object Date]"}function al(s){return!(!ol(s)&&typeof s!="number"||isNaN(+G(s)))}function ll(s,t){const e=G(s,t==null?void 0:t.in);return e.setFullYear(e.getFullYear(),0,1),e.setHours(0,0,0,0),e}const cl={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},ul=(s,t,e)=>{let r;const n=cl[s];return typeof n=="string"?r=n:t===1?r=n.one:r=n.other.replace("{{count}}",t.toString()),e!=null&&e.addSuffix?e.comparison&&e.comparison>0?"in "+r:r+" ago":r};function _t(s){return(t={})=>{const e=t.width?String(t.width):s.defaultWidth;return s.formats[e]||s.formats[s.defaultWidth]}}const dl={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},hl={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},fl={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},gl={date:_t({formats:dl,defaultWidth:"full"}),time:_t({formats:hl,defaultWidth:"full"}),dateTime:_t({formats:fl,defaultWidth:"full"})},ml={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},pl=(s,t,e,r)=>ml[s];function Se(s){return(t,e)=>{const r=e!=null&&e.context?String(e.context):"standalone";let n;if(r==="formatting"&&s.formattingValues){const o=s.defaultFormattingWidth||s.defaultWidth,a=e!=null&&e.width?String(e.width):o;n=s.formattingValues[a]||s.formattingValues[o]}else{const o=s.defaultWidth,a=e!=null&&e.width?String(e.width):s.defaultWidth;n=s.values[a]||s.values[o]}const i=s.argumentCallback?s.argumentCallback(t):t;return n[i]}}const yl={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},wl={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},bl={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},vl={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},_l={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},xl={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},kl=(s,t)=>{const e=Number(s),r=e%100;if(r>20||r<10)switch(r%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"},Tl={ordinalNumber:kl,era:Se({values:yl,defaultWidth:"wide"}),quarter:Se({values:wl,defaultWidth:"wide",argumentCallback:s=>s-1}),month:Se({values:bl,defaultWidth:"wide"}),day:Se({values:vl,defaultWidth:"wide"}),dayPeriod:Se({values:_l,defaultWidth:"wide",formattingValues:xl,defaultFormattingWidth:"wide"})};function Pe(s){return(t,e={})=>{const r=e.width,n=r&&s.matchPatterns[r]||s.matchPatterns[s.defaultMatchWidth],i=t.match(n);if(!i)return null;const o=i[0],a=r&&s.parsePatterns[r]||s.parsePatterns[s.defaultParseWidth],l=Array.isArray(a)?Sl(a,c=>c.test(o)):El(a,c=>c.test(o));let u;u=s.valueCallback?s.valueCallback(l):l,u=e.valueCallback?e.valueCallback(u):u;const d=t.slice(o.length);return{value:u,rest:d}}}function El(s,t){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e)&&t(s[e]))return e}function Sl(s,t){for(let e=0;e<s.length;e++)if(t(s[e]))return e}function xn(s){return(t,e={})=>{const r=t.match(s.matchPattern);if(!r)return null;const n=r[0],i=t.match(s.parsePattern);if(!i)return null;let o=s.valueCallback?s.valueCallback(i[0]):i[0];o=e.valueCallback?e.valueCallback(o):o;const a=t.slice(n.length);return{value:o,rest:a}}}const Pl=/^(\d+)(th|st|nd|rd)?/i,Ol=/\d+/i,Cl={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Al={any:[/^b/i,/^(a|c)/i]},jl={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Rl={any:[/1/i,/2/i,/3/i,/4/i]},Il={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},$l={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Dl={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Ml={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Nl={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Ll={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Ul={ordinalNumber:xn({matchPattern:Pl,parsePattern:Ol,valueCallback:s=>parseInt(s,10)}),era:Pe({matchPatterns:Cl,defaultMatchWidth:"wide",parsePatterns:Al,defaultParseWidth:"any"}),quarter:Pe({matchPatterns:jl,defaultMatchWidth:"wide",parsePatterns:Rl,defaultParseWidth:"any",valueCallback:s=>s+1}),month:Pe({matchPatterns:Il,defaultMatchWidth:"wide",parsePatterns:$l,defaultParseWidth:"any"}),day:Pe({matchPatterns:Dl,defaultMatchWidth:"wide",parsePatterns:Ml,defaultParseWidth:"any"}),dayPeriod:Pe({matchPatterns:Nl,defaultMatchWidth:"any",parsePatterns:Ll,defaultParseWidth:"any"})},kn={code:"en-US",formatDistance:ul,formatLong:gl,formatRelative:pl,localize:Tl,match:Ul,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Bl(s,t){const e=G(s,t==null?void 0:t.in);return nl(e,ll(e))+1}function Tn(s,t){const e=G(s,t==null?void 0:t.in),r=+Pt(e)-+il(e);return Math.round(r/bn)+1}function Jr(s,t){var d,c,h,f;const e=G(s,t==null?void 0:t.in),r=e.getFullYear(),n=jt(),i=(t==null?void 0:t.firstWeekContainsDate)??((c=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((f=(h=n.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??1,o=Z((t==null?void 0:t.in)||s,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const a=Ve(o,t),l=Z((t==null?void 0:t.in)||s,0);l.setFullYear(r,0,i),l.setHours(0,0,0,0);const u=Ve(l,t);return+e>=+a?r+1:+e>=+u?r:r-1}function Wl(s,t){var a,l,u,d;const e=jt(),r=(t==null?void 0:t.firstWeekContainsDate)??((l=(a=t==null?void 0:t.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??e.firstWeekContainsDate??((d=(u=e.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,n=Jr(s,t),i=Z((t==null?void 0:t.in)||s,0);return i.setFullYear(n,0,r),i.setHours(0,0,0,0),Ve(i,t)}function En(s,t){const e=G(s,t==null?void 0:t.in),r=+Ve(e,t)-+Wl(e,t);return Math.round(r/bn)+1}function D(s,t){const e=s<0?"-":"",r=Math.abs(s).toString().padStart(t,"0");return e+r}const Ue={y(s,t){const e=s.getFullYear(),r=e>0?e:1-e;return D(t==="yy"?r%100:r,t.length)},M(s,t){const e=s.getMonth();return t==="M"?String(e+1):D(e+1,2)},d(s,t){return D(s.getDate(),t.length)},a(s,t){const e=s.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.toUpperCase();case"aaa":return e;case"aaaaa":return e[0];case"aaaa":default:return e==="am"?"a.m.":"p.m."}},h(s,t){return D(s.getHours()%12||12,t.length)},H(s,t){return D(s.getHours(),t.length)},m(s,t){return D(s.getMinutes(),t.length)},s(s,t){return D(s.getSeconds(),t.length)},S(s,t){const e=t.length,r=s.getMilliseconds(),n=Math.trunc(r*Math.pow(10,e-3));return D(n,t.length)}},wt={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Rs={G:function(s,t,e){const r=s.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return e.era(r,{width:"abbreviated"});case"GGGGG":return e.era(r,{width:"narrow"});case"GGGG":default:return e.era(r,{width:"wide"})}},y:function(s,t,e){if(t==="yo"){const r=s.getFullYear(),n=r>0?r:1-r;return e.ordinalNumber(n,{unit:"year"})}return Ue.y(s,t)},Y:function(s,t,e,r){const n=Jr(s,r),i=n>0?n:1-n;if(t==="YY"){const o=i%100;return D(o,2)}return t==="Yo"?e.ordinalNumber(i,{unit:"year"}):D(i,t.length)},R:function(s,t){const e=_n(s);return D(e,t.length)},u:function(s,t){const e=s.getFullYear();return D(e,t.length)},Q:function(s,t,e){const r=Math.ceil((s.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return D(r,2);case"Qo":return e.ordinalNumber(r,{unit:"quarter"});case"QQQ":return e.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return e.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return e.quarter(r,{width:"wide",context:"formatting"})}},q:function(s,t,e){const r=Math.ceil((s.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return D(r,2);case"qo":return e.ordinalNumber(r,{unit:"quarter"});case"qqq":return e.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return e.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return e.quarter(r,{width:"wide",context:"standalone"})}},M:function(s,t,e){const r=s.getMonth();switch(t){case"M":case"MM":return Ue.M(s,t);case"Mo":return e.ordinalNumber(r+1,{unit:"month"});case"MMM":return e.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return e.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return e.month(r,{width:"wide",context:"formatting"})}},L:function(s,t,e){const r=s.getMonth();switch(t){case"L":return String(r+1);case"LL":return D(r+1,2);case"Lo":return e.ordinalNumber(r+1,{unit:"month"});case"LLL":return e.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return e.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return e.month(r,{width:"wide",context:"standalone"})}},w:function(s,t,e,r){const n=En(s,r);return t==="wo"?e.ordinalNumber(n,{unit:"week"}):D(n,t.length)},I:function(s,t,e){const r=Tn(s);return t==="Io"?e.ordinalNumber(r,{unit:"week"}):D(r,t.length)},d:function(s,t,e){return t==="do"?e.ordinalNumber(s.getDate(),{unit:"date"}):Ue.d(s,t)},D:function(s,t,e){const r=Bl(s);return t==="Do"?e.ordinalNumber(r,{unit:"dayOfYear"}):D(r,t.length)},E:function(s,t,e){const r=s.getDay();switch(t){case"E":case"EE":case"EEE":return e.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return e.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return e.day(r,{width:"short",context:"formatting"});case"EEEE":default:return e.day(r,{width:"wide",context:"formatting"})}},e:function(s,t,e,r){const n=s.getDay(),i=(n-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return D(i,2);case"eo":return e.ordinalNumber(i,{unit:"day"});case"eee":return e.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return e.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return e.day(n,{width:"short",context:"formatting"});case"eeee":default:return e.day(n,{width:"wide",context:"formatting"})}},c:function(s,t,e,r){const n=s.getDay(),i=(n-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return D(i,t.length);case"co":return e.ordinalNumber(i,{unit:"day"});case"ccc":return e.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return e.day(n,{width:"narrow",context:"standalone"});case"cccccc":return e.day(n,{width:"short",context:"standalone"});case"cccc":default:return e.day(n,{width:"wide",context:"standalone"})}},i:function(s,t,e){const r=s.getDay(),n=r===0?7:r;switch(t){case"i":return String(n);case"ii":return D(n,t.length);case"io":return e.ordinalNumber(n,{unit:"day"});case"iii":return e.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return e.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return e.day(r,{width:"short",context:"formatting"});case"iiii":default:return e.day(r,{width:"wide",context:"formatting"})}},a:function(s,t,e){const n=s.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return e.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return e.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return e.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(s,t,e){const r=s.getHours();let n;switch(r===12?n=wt.noon:r===0?n=wt.midnight:n=r/12>=1?"pm":"am",t){case"b":case"bb":return e.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return e.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return e.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return e.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(s,t,e){const r=s.getHours();let n;switch(r>=17?n=wt.evening:r>=12?n=wt.afternoon:r>=4?n=wt.morning:n=wt.night,t){case"B":case"BB":case"BBB":return e.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return e.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return e.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(s,t,e){if(t==="ho"){let r=s.getHours()%12;return r===0&&(r=12),e.ordinalNumber(r,{unit:"hour"})}return Ue.h(s,t)},H:function(s,t,e){return t==="Ho"?e.ordinalNumber(s.getHours(),{unit:"hour"}):Ue.H(s,t)},K:function(s,t,e){const r=s.getHours()%12;return t==="Ko"?e.ordinalNumber(r,{unit:"hour"}):D(r,t.length)},k:function(s,t,e){let r=s.getHours();return r===0&&(r=24),t==="ko"?e.ordinalNumber(r,{unit:"hour"}):D(r,t.length)},m:function(s,t,e){return t==="mo"?e.ordinalNumber(s.getMinutes(),{unit:"minute"}):Ue.m(s,t)},s:function(s,t,e){return t==="so"?e.ordinalNumber(s.getSeconds(),{unit:"second"}):Ue.s(s,t)},S:function(s,t){return Ue.S(s,t)},X:function(s,t,e){const r=s.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return $s(r);case"XXXX":case"XX":return tt(r);case"XXXXX":case"XXX":default:return tt(r,":")}},x:function(s,t,e){const r=s.getTimezoneOffset();switch(t){case"x":return $s(r);case"xxxx":case"xx":return tt(r);case"xxxxx":case"xxx":default:return tt(r,":")}},O:function(s,t,e){const r=s.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Is(r,":");case"OOOO":default:return"GMT"+tt(r,":")}},z:function(s,t,e){const r=s.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Is(r,":");case"zzzz":default:return"GMT"+tt(r,":")}},t:function(s,t,e){const r=Math.trunc(+s/1e3);return D(r,t.length)},T:function(s,t,e){return D(+s,t.length)}};function Is(s,t=""){const e=s>0?"-":"+",r=Math.abs(s),n=Math.trunc(r/60),i=r%60;return i===0?e+String(n):e+String(n)+t+D(i,2)}function $s(s,t){return s%60===0?(s>0?"-":"+")+D(Math.abs(s)/60,2):tt(s,t)}function tt(s,t=""){const e=s>0?"-":"+",r=Math.abs(s),n=D(Math.trunc(r/60),2),i=D(r%60,2);return e+n+t+i}const Ds=(s,t)=>{switch(s){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Sn=(s,t)=>{switch(s){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},ql=(s,t)=>{const e=s.match(/(P+)(p+)?/)||[],r=e[1],n=e[2];if(!n)return Ds(s,t);let i;switch(r){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",Ds(r,t)).replace("{{time}}",Sn(n,t))},Lr={p:Sn,P:ql},Fl=/^D+$/,Hl=/^Y+$/,zl=["D","DD","YY","YYYY"];function Pn(s){return Fl.test(s)}function On(s){return Hl.test(s)}function Ur(s,t,e){const r=Yl(s,t,e);if(console.warn(r),zl.includes(s))throw new RangeError(r)}function Yl(s,t,e){const r=s[0]==="Y"?"years":"days of the month";return`Use \`${s.toLowerCase()}\` instead of \`${s}\` (in \`${t}\`) for formatting ${r} to the input \`${e}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Gl=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Vl=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Kl=/^'([^]*?)'?$/,Jl=/''/g,Ql=/[a-zA-Z]/;function Cn(s,t,e){var d,c,h,f,g,v,p,m;const r=jt(),n=(e==null?void 0:e.locale)??r.locale??kn,i=(e==null?void 0:e.firstWeekContainsDate)??((c=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((f=(h=r.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??1,o=(e==null?void 0:e.weekStartsOn)??((v=(g=e==null?void 0:e.locale)==null?void 0:g.options)==null?void 0:v.weekStartsOn)??r.weekStartsOn??((m=(p=r.locale)==null?void 0:p.options)==null?void 0:m.weekStartsOn)??0,a=G(s,e==null?void 0:e.in);if(!al(a))throw new RangeError("Invalid time value");let l=t.match(Vl).map(x=>{const y=x[0];if(y==="p"||y==="P"){const w=Lr[y];return w(x,n.formatLong)}return x}).join("").match(Gl).map(x=>{if(x==="''")return{isToken:!1,value:"'"};const y=x[0];if(y==="'")return{isToken:!1,value:Xl(x)};if(Rs[y])return{isToken:!0,value:x};if(y.match(Ql))throw new RangeError("Format string contains an unescaped latin alphabet character `"+y+"`");return{isToken:!1,value:x}});n.localize.preprocessor&&(l=n.localize.preprocessor(a,l));const u={firstWeekContainsDate:i,weekStartsOn:o,locale:n};return l.map(x=>{if(!x.isToken)return x.value;const y=x.value;(!(e!=null&&e.useAdditionalWeekYearTokens)&&On(y)||!(e!=null&&e.useAdditionalDayOfYearTokens)&&Pn(y))&&Ur(y,t,String(s));const w=Rs[y[0]];return w(a,y,n.localize,u)}).join("")}function Xl(s){const t=s.match(Kl);return t?t[1].replace(Jl,"'"):s}function Zl(){return Object.assign({},jt())}function ec(s,t){const e=G(s,t==null?void 0:t.in).getDay();return e===0?7:e}function tc(s,t){return+G(s)<+G(t)}function rc(s,t){const e=sc(t)?new t(0):Z(t,0);return e.setFullYear(s.getFullYear(),s.getMonth(),s.getDate()),e.setHours(s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()),e}function sc(s){var t;return typeof s=="function"&&((t=s.prototype)==null?void 0:t.constructor)===s}const nc=10;class An{constructor(){_(this,"subPriority",0)}validate(t,e){return!0}}class ic extends An{constructor(t,e,r,n,i){super(),this.value=t,this.validateValue=e,this.setValue=r,this.priority=n,i&&(this.subPriority=i)}validate(t,e){return this.validateValue(t,this.value,e)}set(t,e,r){return this.setValue(t,e,this.value,r)}}class oc extends An{constructor(e,r){super();_(this,"priority",nc);_(this,"subPriority",-1);this.context=e||(n=>Z(r,n))}set(e,r){return r.timestampIsSet?e:Z(e,rc(e,this.context))}}class R{run(t,e,r,n){const i=this.parse(t,e,r,n);return i?{setter:new ic(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}validate(t,e,r){return!0}}class ac extends R{constructor(){super(...arguments);_(this,"priority",140);_(this,"incompatibleTokens",["R","u","t","T"])}parse(e,r,n){switch(r){case"G":case"GG":case"GGG":return n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"});case"GGGGG":return n.era(e,{width:"narrow"});case"GGGG":default:return n.era(e,{width:"wide"})||n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"})}}set(e,r,n){return r.era=n,e.setFullYear(n,0,1),e.setHours(0,0,0,0),e}}const z={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Oe={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Y(s,t){return s&&{value:t(s.value),rest:s.rest}}function W(s,t){const e=t.match(s);return e?{value:parseInt(e[0],10),rest:t.slice(e[0].length)}:null}function Ce(s,t){const e=t.match(s);if(!e)return null;if(e[0]==="Z")return{value:0,rest:t.slice(1)};const r=e[1]==="+"?1:-1,n=e[2]?parseInt(e[2],10):0,i=e[3]?parseInt(e[3],10):0,o=e[5]?parseInt(e[5],10):0;return{value:r*(n*el+i*Za+o*tl),rest:t.slice(e[0].length)}}function jn(s){return W(z.anyDigitsSigned,s)}function F(s,t){switch(s){case 1:return W(z.singleDigit,t);case 2:return W(z.twoDigits,t);case 3:return W(z.threeDigits,t);case 4:return W(z.fourDigits,t);default:return W(new RegExp("^\\d{1,"+s+"}"),t)}}function ir(s,t){switch(s){case 1:return W(z.singleDigitSigned,t);case 2:return W(z.twoDigitsSigned,t);case 3:return W(z.threeDigitsSigned,t);case 4:return W(z.fourDigitsSigned,t);default:return W(new RegExp("^-?\\d{1,"+s+"}"),t)}}function Qr(s){switch(s){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function Rn(s,t){const e=t>0,r=e?t:1-t;let n;if(r<=50)n=s||100;else{const i=r+50,o=Math.trunc(i/100)*100,a=s>=i%100;n=s+o-(a?100:0)}return e?n:1-n}function In(s){return s%400===0||s%4===0&&s%100!==0}class lc extends R{constructor(){super(...arguments);_(this,"priority",130);_(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(e,r,n){const i=o=>({year:o,isTwoDigitYear:r==="yy"});switch(r){case"y":return Y(F(4,e),i);case"yo":return Y(n.ordinalNumber(e,{unit:"year"}),i);default:return Y(F(r.length,e),i)}}validate(e,r){return r.isTwoDigitYear||r.year>0}set(e,r,n){const i=e.getFullYear();if(n.isTwoDigitYear){const a=Rn(n.year,i);return e.setFullYear(a,0,1),e.setHours(0,0,0,0),e}const o=!("era"in r)||r.era===1?n.year:1-n.year;return e.setFullYear(o,0,1),e.setHours(0,0,0,0),e}}class cc extends R{constructor(){super(...arguments);_(this,"priority",130);_(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(e,r,n){const i=o=>({year:o,isTwoDigitYear:r==="YY"});switch(r){case"Y":return Y(F(4,e),i);case"Yo":return Y(n.ordinalNumber(e,{unit:"year"}),i);default:return Y(F(r.length,e),i)}}validate(e,r){return r.isTwoDigitYear||r.year>0}set(e,r,n,i){const o=Jr(e,i);if(n.isTwoDigitYear){const l=Rn(n.year,o);return e.setFullYear(l,0,i.firstWeekContainsDate),e.setHours(0,0,0,0),Ve(e,i)}const a=!("era"in r)||r.era===1?n.year:1-n.year;return e.setFullYear(a,0,i.firstWeekContainsDate),e.setHours(0,0,0,0),Ve(e,i)}}class uc extends R{constructor(){super(...arguments);_(this,"priority",130);_(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(e,r){return ir(r==="R"?4:r.length,e)}set(e,r,n){const i=Z(e,0);return i.setFullYear(n,0,4),i.setHours(0,0,0,0),Pt(i)}}class dc extends R{constructor(){super(...arguments);_(this,"priority",130);_(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(e,r){return ir(r==="u"?4:r.length,e)}set(e,r,n){return e.setFullYear(n,0,1),e.setHours(0,0,0,0),e}}class hc extends R{constructor(){super(...arguments);_(this,"priority",120);_(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,r,n){switch(r){case"Q":case"QQ":return F(r.length,e);case"Qo":return n.ordinalNumber(e,{unit:"quarter"});case"QQQ":return n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(e,{width:"wide",context:"formatting"})||n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,r){return r>=1&&r<=4}set(e,r,n){return e.setMonth((n-1)*3,1),e.setHours(0,0,0,0),e}}class fc extends R{constructor(){super(...arguments);_(this,"priority",120);_(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,r,n){switch(r){case"q":case"qq":return F(r.length,e);case"qo":return n.ordinalNumber(e,{unit:"quarter"});case"qqq":return n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(e,{width:"wide",context:"standalone"})||n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,r){return r>=1&&r<=4}set(e,r,n){return e.setMonth((n-1)*3,1),e.setHours(0,0,0,0),e}}class gc extends R{constructor(){super(...arguments);_(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);_(this,"priority",110)}parse(e,r,n){const i=o=>o-1;switch(r){case"M":return Y(W(z.month,e),i);case"MM":return Y(F(2,e),i);case"Mo":return Y(n.ordinalNumber(e,{unit:"month"}),i);case"MMM":return n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(e,{width:"wide",context:"formatting"})||n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"})}}validate(e,r){return r>=0&&r<=11}set(e,r,n){return e.setMonth(n,1),e.setHours(0,0,0,0),e}}class mc extends R{constructor(){super(...arguments);_(this,"priority",110);_(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(e,r,n){const i=o=>o-1;switch(r){case"L":return Y(W(z.month,e),i);case"LL":return Y(F(2,e),i);case"Lo":return Y(n.ordinalNumber(e,{unit:"month"}),i);case"LLL":return n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(e,{width:"wide",context:"standalone"})||n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"})}}validate(e,r){return r>=0&&r<=11}set(e,r,n){return e.setMonth(n,1),e.setHours(0,0,0,0),e}}function pc(s,t,e){const r=G(s,e==null?void 0:e.in),n=En(r,e)-t;return r.setDate(r.getDate()-n*7),G(r,e==null?void 0:e.in)}class yc extends R{constructor(){super(...arguments);_(this,"priority",100);_(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(e,r,n){switch(r){case"w":return W(z.week,e);case"wo":return n.ordinalNumber(e,{unit:"week"});default:return F(r.length,e)}}validate(e,r){return r>=1&&r<=53}set(e,r,n,i){return Ve(pc(e,n,i),i)}}function wc(s,t,e){const r=G(s,e==null?void 0:e.in),n=Tn(r,e)-t;return r.setDate(r.getDate()-n*7),r}class bc extends R{constructor(){super(...arguments);_(this,"priority",100);_(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(e,r,n){switch(r){case"I":return W(z.week,e);case"Io":return n.ordinalNumber(e,{unit:"week"});default:return F(r.length,e)}}validate(e,r){return r>=1&&r<=53}set(e,r,n){return Pt(wc(e,n))}}const vc=[31,28,31,30,31,30,31,31,30,31,30,31],_c=[31,29,31,30,31,30,31,31,30,31,30,31];class xc extends R{constructor(){super(...arguments);_(this,"priority",90);_(this,"subPriority",1);_(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(e,r,n){switch(r){case"d":return W(z.date,e);case"do":return n.ordinalNumber(e,{unit:"date"});default:return F(r.length,e)}}validate(e,r){const n=e.getFullYear(),i=In(n),o=e.getMonth();return i?r>=1&&r<=_c[o]:r>=1&&r<=vc[o]}set(e,r,n){return e.setDate(n),e.setHours(0,0,0,0),e}}class kc extends R{constructor(){super(...arguments);_(this,"priority",90);_(this,"subpriority",1);_(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(e,r,n){switch(r){case"D":case"DD":return W(z.dayOfYear,e);case"Do":return n.ordinalNumber(e,{unit:"date"});default:return F(r.length,e)}}validate(e,r){const n=e.getFullYear();return In(n)?r>=1&&r<=366:r>=1&&r<=365}set(e,r,n){return e.setMonth(0,n),e.setHours(0,0,0,0),e}}function Xr(s,t,e){var c,h,f,g;const r=jt(),n=(e==null?void 0:e.weekStartsOn)??((h=(c=e==null?void 0:e.locale)==null?void 0:c.options)==null?void 0:h.weekStartsOn)??r.weekStartsOn??((g=(f=r.locale)==null?void 0:f.options)==null?void 0:g.weekStartsOn)??0,i=G(s,e==null?void 0:e.in),o=i.getDay(),l=(t%7+7)%7,u=7-n,d=t<0||t>6?t-(o+u)%7:(l+u)%7-(o+u)%7;return vn(i,d,e)}class Tc extends R{constructor(){super(...arguments);_(this,"priority",90);_(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(e,r,n){switch(r){case"E":case"EE":case"EEE":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}validate(e,r){return r>=0&&r<=6}set(e,r,n,i){return e=Xr(e,n,i),e.setHours(0,0,0,0),e}}class Ec extends R{constructor(){super(...arguments);_(this,"priority",90);_(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(e,r,n,i){const o=a=>{const l=Math.floor((a-1)/7)*7;return(a+i.weekStartsOn+6)%7+l};switch(r){case"e":case"ee":return Y(F(r.length,e),o);case"eo":return Y(n.ordinalNumber(e,{unit:"day"}),o);case"eee":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeeee":return n.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}validate(e,r){return r>=0&&r<=6}set(e,r,n,i){return e=Xr(e,n,i),e.setHours(0,0,0,0),e}}class Sc extends R{constructor(){super(...arguments);_(this,"priority",90);_(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(e,r,n,i){const o=a=>{const l=Math.floor((a-1)/7)*7;return(a+i.weekStartsOn+6)%7+l};switch(r){case"c":case"cc":return Y(F(r.length,e),o);case"co":return Y(n.ordinalNumber(e,{unit:"day"}),o);case"ccc":return n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"ccccc":return n.day(e,{width:"narrow",context:"standalone"});case"cccccc":return n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return n.day(e,{width:"wide",context:"standalone"})||n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"})}}validate(e,r){return r>=0&&r<=6}set(e,r,n,i){return e=Xr(e,n,i),e.setHours(0,0,0,0),e}}function Pc(s,t,e){const r=G(s,e==null?void 0:e.in),n=ec(r,e),i=t-n;return vn(r,i,e)}class Oc extends R{constructor(){super(...arguments);_(this,"priority",90);_(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(e,r,n){const i=o=>o===0?7:o;switch(r){case"i":case"ii":return F(r.length,e);case"io":return n.ordinalNumber(e,{unit:"day"});case"iii":return Y(n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),i);case"iiiii":return Y(n.day(e,{width:"narrow",context:"formatting"}),i);case"iiiiii":return Y(n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),i);case"iiii":default:return Y(n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),i)}}validate(e,r){return r>=1&&r<=7}set(e,r,n){return e=Pc(e,n),e.setHours(0,0,0,0),e}}class Cc extends R{constructor(){super(...arguments);_(this,"priority",80);_(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(e,r,n){switch(r){case"a":case"aa":case"aaa":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,r,n){return e.setHours(Qr(n),0,0,0),e}}class Ac extends R{constructor(){super(...arguments);_(this,"priority",80);_(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(e,r,n){switch(r){case"b":case"bb":case"bbb":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,r,n){return e.setHours(Qr(n),0,0,0),e}}class jc extends R{constructor(){super(...arguments);_(this,"priority",80);_(this,"incompatibleTokens",["a","b","t","T"])}parse(e,r,n){switch(r){case"B":case"BB":case"BBB":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,r,n){return e.setHours(Qr(n),0,0,0),e}}class Rc extends R{constructor(){super(...arguments);_(this,"priority",70);_(this,"incompatibleTokens",["H","K","k","t","T"])}parse(e,r,n){switch(r){case"h":return W(z.hour12h,e);case"ho":return n.ordinalNumber(e,{unit:"hour"});default:return F(r.length,e)}}validate(e,r){return r>=1&&r<=12}set(e,r,n){const i=e.getHours()>=12;return i&&n<12?e.setHours(n+12,0,0,0):!i&&n===12?e.setHours(0,0,0,0):e.setHours(n,0,0,0),e}}class Ic extends R{constructor(){super(...arguments);_(this,"priority",70);_(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(e,r,n){switch(r){case"H":return W(z.hour23h,e);case"Ho":return n.ordinalNumber(e,{unit:"hour"});default:return F(r.length,e)}}validate(e,r){return r>=0&&r<=23}set(e,r,n){return e.setHours(n,0,0,0),e}}class $c extends R{constructor(){super(...arguments);_(this,"priority",70);_(this,"incompatibleTokens",["h","H","k","t","T"])}parse(e,r,n){switch(r){case"K":return W(z.hour11h,e);case"Ko":return n.ordinalNumber(e,{unit:"hour"});default:return F(r.length,e)}}validate(e,r){return r>=0&&r<=11}set(e,r,n){return e.getHours()>=12&&n<12?e.setHours(n+12,0,0,0):e.setHours(n,0,0,0),e}}class Dc extends R{constructor(){super(...arguments);_(this,"priority",70);_(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(e,r,n){switch(r){case"k":return W(z.hour24h,e);case"ko":return n.ordinalNumber(e,{unit:"hour"});default:return F(r.length,e)}}validate(e,r){return r>=1&&r<=24}set(e,r,n){const i=n<=24?n%24:n;return e.setHours(i,0,0,0),e}}class Mc extends R{constructor(){super(...arguments);_(this,"priority",60);_(this,"incompatibleTokens",["t","T"])}parse(e,r,n){switch(r){case"m":return W(z.minute,e);case"mo":return n.ordinalNumber(e,{unit:"minute"});default:return F(r.length,e)}}validate(e,r){return r>=0&&r<=59}set(e,r,n){return e.setMinutes(n,0,0),e}}class Nc extends R{constructor(){super(...arguments);_(this,"priority",50);_(this,"incompatibleTokens",["t","T"])}parse(e,r,n){switch(r){case"s":return W(z.second,e);case"so":return n.ordinalNumber(e,{unit:"second"});default:return F(r.length,e)}}validate(e,r){return r>=0&&r<=59}set(e,r,n){return e.setSeconds(n,0),e}}class Lc extends R{constructor(){super(...arguments);_(this,"priority",30);_(this,"incompatibleTokens",["t","T"])}parse(e,r){const n=i=>Math.trunc(i*Math.pow(10,-r.length+3));return Y(F(r.length,e),n)}set(e,r,n){return e.setMilliseconds(n),e}}class Uc extends R{constructor(){super(...arguments);_(this,"priority",10);_(this,"incompatibleTokens",["t","T","x"])}parse(e,r){switch(r){case"X":return Ce(Oe.basicOptionalMinutes,e);case"XX":return Ce(Oe.basic,e);case"XXXX":return Ce(Oe.basicOptionalSeconds,e);case"XXXXX":return Ce(Oe.extendedOptionalSeconds,e);case"XXX":default:return Ce(Oe.extended,e)}}set(e,r,n){return r.timestampIsSet?e:Z(e,e.getTime()-nr(e)-n)}}class Bc extends R{constructor(){super(...arguments);_(this,"priority",10);_(this,"incompatibleTokens",["t","T","X"])}parse(e,r){switch(r){case"x":return Ce(Oe.basicOptionalMinutes,e);case"xx":return Ce(Oe.basic,e);case"xxxx":return Ce(Oe.basicOptionalSeconds,e);case"xxxxx":return Ce(Oe.extendedOptionalSeconds,e);case"xxx":default:return Ce(Oe.extended,e)}}set(e,r,n){return r.timestampIsSet?e:Z(e,e.getTime()-nr(e)-n)}}class Wc extends R{constructor(){super(...arguments);_(this,"priority",40);_(this,"incompatibleTokens","*")}parse(e){return jn(e)}set(e,r,n){return[Z(e,n*1e3),{timestampIsSet:!0}]}}class qc extends R{constructor(){super(...arguments);_(this,"priority",20);_(this,"incompatibleTokens","*")}parse(e){return jn(e)}set(e,r,n){return[Z(e,n),{timestampIsSet:!0}]}}const Fc={G:new ac,y:new lc,Y:new cc,R:new uc,u:new dc,Q:new hc,q:new fc,M:new gc,L:new mc,w:new yc,I:new bc,d:new xc,D:new kc,E:new Tc,e:new Ec,c:new Sc,i:new Oc,a:new Cc,b:new Ac,B:new jc,h:new Rc,H:new Ic,K:new $c,k:new Dc,m:new Mc,s:new Nc,S:new Lc,X:new Uc,x:new Bc,t:new Wc,T:new qc},Hc=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,zc=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Yc=/^'([^]*?)'?$/,Gc=/''/g,Vc=/\S/,Kc=/[a-zA-Z]/;function Jc(s,t,e,r){var p,m,x,y;const n=()=>Z(e,NaN),i=Zl(),o=i.locale??kn,a=i.firstWeekContainsDate??((m=(p=i.locale)==null?void 0:p.options)==null?void 0:m.firstWeekContainsDate)??1,l=i.weekStartsOn??((y=(x=i.locale)==null?void 0:x.options)==null?void 0:y.weekStartsOn)??0,u={firstWeekContainsDate:a,weekStartsOn:l,locale:o},d=[new oc(r==null?void 0:r.in,e)],c=t.match(zc).map(w=>{const T=w[0];if(T in Lr){const k=Lr[T];return k(w,o.formatLong)}return w}).join("").match(Hc),h=[];for(let w of c){On(w)&&Ur(w,t,s),Pn(w)&&Ur(w,t,s);const T=w[0],k=Fc[T];if(k){const{incompatibleTokens:I}=k;if(Array.isArray(I)){const M=h.find(re=>I.includes(re.token)||re.token===T);if(M)throw new RangeError(`The format string mustn't contain \`${M.fullToken}\` and \`${w}\` at the same time`)}else if(k.incompatibleTokens==="*"&&h.length>0)throw new RangeError(`The format string mustn't contain \`${w}\` and any other token at the same time`);h.push({token:T,fullToken:w});const U=k.run(s,w,o.match,u);if(!U)return n();d.push(U.setter),s=U.rest}else{if(T.match(Kc))throw new RangeError("Format string contains an unescaped latin alphabet character `"+T+"`");if(w==="''"?w="'":T==="'"&&(w=Qc(w)),s.indexOf(w)===0)s=s.slice(w.length);else return n()}}if(s.length>0&&Vc.test(s))return n();const f=d.map(w=>w.priority).sort((w,T)=>T-w).filter((w,T,k)=>k.indexOf(w)===T).map(w=>d.filter(T=>T.priority===w).sort((T,k)=>k.subPriority-T.subPriority)).map(w=>w[0]);let g=G(e,r==null?void 0:r.in);if(isNaN(+g))return n();const v={};for(const w of f){if(!w.validate(g,u))return n();const T=w.set(g,v,u);Array.isArray(T)?(g=T[0],Object.assign(v,T[1])):g=T}return g}function Qc(s){return s.match(Yc)[1].replace(Gc,"'")}function Xc(s){return Nr(Date.now(),s)}const Zc={lessThanXSeconds:{one:"أقل من ثانية",two:"أقل من ثانيتين",threeToTen:"أقل من {{count}} ثواني",other:"أقل من {{count}} ثانية"},xSeconds:{one:"ثانية واحدة",two:"ثانيتان",threeToTen:"{{count}} ثواني",other:"{{count}} ثانية"},halfAMinute:"نصف دقيقة",lessThanXMinutes:{one:"أقل من دقيقة",two:"أقل من دقيقتين",threeToTen:"أقل من {{count}} دقائق",other:"أقل من {{count}} دقيقة"},xMinutes:{one:"دقيقة واحدة",two:"دقيقتان",threeToTen:"{{count}} دقائق",other:"{{count}} دقيقة"},aboutXHours:{one:"ساعة واحدة تقريباً",two:"ساعتين تقريبا",threeToTen:"{{count}} ساعات تقريباً",other:"{{count}} ساعة تقريباً"},xHours:{one:"ساعة واحدة",two:"ساعتان",threeToTen:"{{count}} ساعات",other:"{{count}} ساعة"},xDays:{one:"يوم واحد",two:"يومان",threeToTen:"{{count}} أيام",other:"{{count}} يوم"},aboutXWeeks:{one:"أسبوع واحد تقريبا",two:"أسبوعين تقريبا",threeToTen:"{{count}} أسابيع تقريبا",other:"{{count}} أسبوعا تقريبا"},xWeeks:{one:"أسبوع واحد",two:"أسبوعان",threeToTen:"{{count}} أسابيع",other:"{{count}} أسبوعا"},aboutXMonths:{one:"شهر واحد تقريباً",two:"شهرين تقريبا",threeToTen:"{{count}} أشهر تقريبا",other:"{{count}} شهرا تقريباً"},xMonths:{one:"شهر واحد",two:"شهران",threeToTen:"{{count}} أشهر",other:"{{count}} شهرا"},aboutXYears:{one:"سنة واحدة تقريباً",two:"سنتين تقريبا",threeToTen:"{{count}} سنوات تقريباً",other:"{{count}} سنة تقريباً"},xYears:{one:"سنة واحد",two:"سنتان",threeToTen:"{{count}} سنوات",other:"{{count}} سنة"},overXYears:{one:"أكثر من سنة",two:"أكثر من سنتين",threeToTen:"أكثر من {{count}} سنوات",other:"أكثر من {{count}} سنة"},almostXYears:{one:"ما يقارب سنة واحدة",two:"ما يقارب سنتين",threeToTen:"ما يقارب {{count}} سنوات",other:"ما يقارب {{count}} سنة"}},eu=(s,t,e)=>{const r=Zc[s];let n;return typeof r=="string"?n=r:t===1?n=r.one:t===2?n=r.two:t<=10?n=r.threeToTen.replace("{{count}}",String(t)):n=r.other.replace("{{count}}",String(t)),e!=null&&e.addSuffix?e.comparison&&e.comparison>0?"خلال "+n:"منذ "+n:n},tu={full:"EEEE، do MMMM y",long:"do MMMM y",medium:"d MMM y",short:"dd/MM/yyyy"},ru={full:"HH:mm:ss",long:"HH:mm:ss",medium:"HH:mm:ss",short:"HH:mm"},su={full:"{{date}} 'عند الساعة' {{time}}",long:"{{date}} 'عند الساعة' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},nu={date:_t({formats:tu,defaultWidth:"full"}),time:_t({formats:ru,defaultWidth:"full"}),dateTime:_t({formats:su,defaultWidth:"full"})},iu={lastWeek:"eeee 'الماضي عند الساعة' p",yesterday:"'الأمس عند الساعة' p",today:"'اليوم عند الساعة' p",tomorrow:"'غدا عند الساعة' p",nextWeek:"eeee 'القادم عند الساعة' p",other:"P"},ou=s=>iu[s],au={narrow:["ق","ب"],abbreviated:["ق.م.","ب.م."],wide:["قبل الميلاد","بعد الميلاد"]},lu={narrow:["1","2","3","4"],abbreviated:["ر1","ر2","ر3","ر4"],wide:["الربع الأول","الربع الثاني","الربع الثالث","الربع الرابع"]},cu={narrow:["ي","ف","م","أ","م","ي","ي","أ","س","أ","ن","د"],abbreviated:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"],wide:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"]},uu={narrow:["ح","ن","ث","ر","خ","ج","س"],short:["أحد","اثنين","ثلاثاء","أربعاء","خميس","جمعة","سبت"],abbreviated:["أحد","اثنين","ثلاثاء","أربعاء","خميس","جمعة","سبت"],wide:["الأحد","الاثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"]},du={narrow:{am:"ص",pm:"م",morning:"الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"المساء",night:"الليل",midnight:"منتصف الليل"},abbreviated:{am:"ص",pm:"م",morning:"الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"المساء",night:"الليل",midnight:"منتصف الليل"},wide:{am:"ص",pm:"م",morning:"الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"المساء",night:"الليل",midnight:"منتصف الليل"}},hu={narrow:{am:"ص",pm:"م",morning:"في الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"في المساء",night:"في الليل",midnight:"منتصف الليل"},abbreviated:{am:"ص",pm:"م",morning:"في الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"في المساء",night:"في الليل",midnight:"منتصف الليل"},wide:{am:"ص",pm:"م",morning:"في الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"في المساء",night:"في الليل",midnight:"منتصف الليل"}},fu=s=>String(s),gu={ordinalNumber:fu,era:Se({values:au,defaultWidth:"wide"}),quarter:Se({values:lu,defaultWidth:"wide",argumentCallback:s=>s-1}),month:Se({values:cu,defaultWidth:"wide"}),day:Se({values:uu,defaultWidth:"wide"}),dayPeriod:Se({values:du,defaultWidth:"wide",formattingValues:hu,defaultFormattingWidth:"wide"})},mu=/^(\d+)(th|st|nd|rd)?/i,pu=/\d+/i,yu={narrow:/[قب]/,abbreviated:/[قب]\.م\./,wide:/(قبل|بعد) الميلاد/},wu={any:[/قبل/,/بعد/]},bu={narrow:/^[1234]/i,abbreviated:/ر[1234]/,wide:/الربع (الأول|الثاني|الثالث|الرابع)/},vu={any:[/1/i,/2/i,/3/i,/4/i]},_u={narrow:/^[أيفمسند]/,abbreviated:/^(يناير|فبراير|مارس|أبريل|مايو|يونيو|يوليو|أغسطس|سبتمبر|أكتوبر|نوفمبر|ديسمبر)/,wide:/^(يناير|فبراير|مارس|أبريل|مايو|يونيو|يوليو|أغسطس|سبتمبر|أكتوبر|نوفمبر|ديسمبر)/},xu={narrow:[/^ي/i,/^ف/i,/^م/i,/^أ/i,/^م/i,/^ي/i,/^ي/i,/^أ/i,/^س/i,/^أ/i,/^ن/i,/^د/i],any:[/^يناير/i,/^فبراير/i,/^مارس/i,/^أبريل/i,/^مايو/i,/^يونيو/i,/^يوليو/i,/^أغسطس/i,/^سبتمبر/i,/^أكتوبر/i,/^نوفمبر/i,/^ديسمبر/i]},ku={narrow:/^[حنثرخجس]/i,short:/^(أحد|اثنين|ثلاثاء|أربعاء|خميس|جمعة|سبت)/i,abbreviated:/^(أحد|اثنين|ثلاثاء|أربعاء|خميس|جمعة|سبت)/i,wide:/^(الأحد|الاثنين|الثلاثاء|الأربعاء|الخميس|الجمعة|السبت)/i},Tu={narrow:[/^ح/i,/^ن/i,/^ث/i,/^ر/i,/^خ/i,/^ج/i,/^س/i],wide:[/^الأحد/i,/^الاثنين/i,/^الثلاثاء/i,/^الأربعاء/i,/^الخميس/i,/^الجمعة/i,/^السبت/i],any:[/^أح/i,/^اث/i,/^ث/i,/^أر/i,/^خ/i,/^ج/i,/^س/i]},Eu={narrow:/^(ص|م|منتصف الليل|الظهر|بعد الظهر|في الصباح|في المساء|في الليل)/,any:/^(ص|م|منتصف الليل|الظهر|بعد الظهر|في الصباح|في المساء|في الليل)/},Su={any:{am:/^ص/,pm:/^م/,midnight:/منتصف الليل/,noon:/الظهر/,afternoon:/بعد الظهر/,morning:/في الصباح/,evening:/في المساء/,night:/في الليل/}},Pu={ordinalNumber:xn({matchPattern:mu,parsePattern:pu,valueCallback:s=>parseInt(s,10)}),era:Pe({matchPatterns:yu,defaultMatchWidth:"wide",parsePatterns:wu,defaultParseWidth:"any"}),quarter:Pe({matchPatterns:bu,defaultMatchWidth:"wide",parsePatterns:vu,defaultParseWidth:"any",valueCallback:s=>s+1}),month:Pe({matchPatterns:_u,defaultMatchWidth:"wide",parsePatterns:xu,defaultParseWidth:"any"}),day:Pe({matchPatterns:ku,defaultMatchWidth:"wide",parsePatterns:Tu,defaultParseWidth:"any"}),dayPeriod:Pe({matchPatterns:Eu,defaultMatchWidth:"any",parsePatterns:Su,defaultParseWidth:"any"})},Ou={code:"ar",formatDistance:eu,formatLong:nu,formatRelative:ou,localize:gu,match:Pu,options:{weekStartsOn:6,firstWeekContainsDate:1}},Zr="-",Cu=s=>{const t=ju(s),{conflictingClassGroups:e,conflictingClassGroupModifiers:r}=s;return{getClassGroupId:o=>{const a=o.split(Zr);return a[0]===""&&a.length!==1&&a.shift(),$n(a,t)||Au(o)},getConflictingClassGroupIds:(o,a)=>{const l=e[o]||[];return a&&r[o]?[...l,...r[o]]:l}}},$n=(s,t)=>{var o;if(s.length===0)return t.classGroupId;const e=s[0],r=t.nextPart.get(e),n=r?$n(s.slice(1),r):void 0;if(n)return n;if(t.validators.length===0)return;const i=s.join(Zr);return(o=t.validators.find(({validator:a})=>a(i)))==null?void 0:o.classGroupId},Ms=/^\[(.+)\]$/,Au=s=>{if(Ms.test(s)){const t=Ms.exec(s)[1],e=t==null?void 0:t.substring(0,t.indexOf(":"));if(e)return"arbitrary.."+e}},ju=s=>{const{theme:t,prefix:e}=s,r={nextPart:new Map,validators:[]};return Iu(Object.entries(s.classGroups),e).forEach(([i,o])=>{Br(o,r,i,t)}),r},Br=(s,t,e,r)=>{s.forEach(n=>{if(typeof n=="string"){const i=n===""?t:Ns(t,n);i.classGroupId=e;return}if(typeof n=="function"){if(Ru(n)){Br(n(r),t,e,r);return}t.validators.push({validator:n,classGroupId:e});return}Object.entries(n).forEach(([i,o])=>{Br(o,Ns(t,i),e,r)})})},Ns=(s,t)=>{let e=s;return t.split(Zr).forEach(r=>{e.nextPart.has(r)||e.nextPart.set(r,{nextPart:new Map,validators:[]}),e=e.nextPart.get(r)}),e},Ru=s=>s.isThemeGetter,Iu=(s,t)=>t?s.map(([e,r])=>{const n=r.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[t+o,a])):i);return[e,n]}):s,$u=s=>{if(s<1)return{get:()=>{},set:()=>{}};let t=0,e=new Map,r=new Map;const n=(i,o)=>{e.set(i,o),t++,t>s&&(t=0,r=e,e=new Map)};return{get(i){let o=e.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return n(i,o),o},set(i,o){e.has(i)?e.set(i,o):n(i,o)}}},Dn="!",Du=s=>{const{separator:t,experimentalParseClassName:e}=s,r=t.length===1,n=t[0],i=t.length,o=a=>{const l=[];let u=0,d=0,c;for(let p=0;p<a.length;p++){let m=a[p];if(u===0){if(m===n&&(r||a.slice(p,p+i)===t)){l.push(a.slice(d,p)),d=p+i;continue}if(m==="/"){c=p;continue}}m==="["?u++:m==="]"&&u--}const h=l.length===0?a:a.substring(d),f=h.startsWith(Dn),g=f?h.substring(1):h,v=c&&c>d?c-d:void 0;return{modifiers:l,hasImportantModifier:f,baseClassName:g,maybePostfixModifierPosition:v}};return e?a=>e({className:a,parseClassName:o}):o},Mu=s=>{if(s.length<=1)return s;const t=[];let e=[];return s.forEach(r=>{r[0]==="["?(t.push(...e.sort(),r),e=[]):e.push(r)}),t.push(...e.sort()),t},Nu=s=>({cache:$u(s.cacheSize),parseClassName:Du(s),...Cu(s)}),Lu=/\s+/,Uu=(s,t)=>{const{parseClassName:e,getClassGroupId:r,getConflictingClassGroupIds:n}=t,i=[],o=s.trim().split(Lu);let a="";for(let l=o.length-1;l>=0;l-=1){const u=o[l],{modifiers:d,hasImportantModifier:c,baseClassName:h,maybePostfixModifierPosition:f}=e(u);let g=!!f,v=r(g?h.substring(0,f):h);if(!v){if(!g){a=u+(a.length>0?" "+a:a);continue}if(v=r(h),!v){a=u+(a.length>0?" "+a:a);continue}g=!1}const p=Mu(d).join(":"),m=c?p+Dn:p,x=m+v;if(i.includes(x))continue;i.push(x);const y=n(v,g);for(let w=0;w<y.length;++w){const T=y[w];i.push(m+T)}a=u+(a.length>0?" "+a:a)}return a};function Bu(){let s=0,t,e,r="";for(;s<arguments.length;)(t=arguments[s++])&&(e=Mn(t))&&(r&&(r+=" "),r+=e);return r}const Mn=s=>{if(typeof s=="string")return s;let t,e="";for(let r=0;r<s.length;r++)s[r]&&(t=Mn(s[r]))&&(e&&(e+=" "),e+=t);return e};function Wu(s,...t){let e,r,n,i=o;function o(l){const u=t.reduce((d,c)=>c(d),s());return e=Nu(u),r=e.cache.get,n=e.cache.set,i=a,a(l)}function a(l){const u=r(l);if(u)return u;const d=Uu(l,e);return n(l,d),d}return function(){return i(Bu.apply(null,arguments))}}const L=s=>{const t=e=>e[s]||[];return t.isThemeGetter=!0,t},Nn=/^\[(?:([a-z-]+):)?(.+)\]$/i,qu=/^\d+\/\d+$/,Fu=new Set(["px","full","screen"]),Hu=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,zu=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Yu=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Gu=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Vu=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Re=s=>xt(s)||Fu.has(s)||qu.test(s),Be=s=>Rt(s,"length",rd),xt=s=>!!s&&!Number.isNaN(Number(s)),Tr=s=>Rt(s,"number",xt),Dt=s=>!!s&&Number.isInteger(Number(s)),Ku=s=>s.endsWith("%")&&xt(s.slice(0,-1)),P=s=>Nn.test(s),We=s=>Hu.test(s),Ju=new Set(["length","size","percentage"]),Qu=s=>Rt(s,Ju,Ln),Xu=s=>Rt(s,"position",Ln),Zu=new Set(["image","url"]),ed=s=>Rt(s,Zu,nd),td=s=>Rt(s,"",sd),Mt=()=>!0,Rt=(s,t,e)=>{const r=Nn.exec(s);return r?r[1]?typeof t=="string"?r[1]===t:t.has(r[1]):e(r[2]):!1},rd=s=>zu.test(s)&&!Yu.test(s),Ln=()=>!1,sd=s=>Gu.test(s),nd=s=>Vu.test(s),id=()=>{const s=L("colors"),t=L("spacing"),e=L("blur"),r=L("brightness"),n=L("borderColor"),i=L("borderRadius"),o=L("borderSpacing"),a=L("borderWidth"),l=L("contrast"),u=L("grayscale"),d=L("hueRotate"),c=L("invert"),h=L("gap"),f=L("gradientColorStops"),g=L("gradientColorStopPositions"),v=L("inset"),p=L("margin"),m=L("opacity"),x=L("padding"),y=L("saturate"),w=L("scale"),T=L("sepia"),k=L("skew"),I=L("space"),U=L("translate"),M=()=>["auto","contain","none"],re=()=>["auto","hidden","clip","visible","scroll"],Je=()=>["auto",P,t],$=()=>[P,t],ue=()=>["",Re,Be],Ae=()=>["auto",xt,P],De=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],j=()=>["solid","dashed","dotted","double","none"],V=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ge=()=>["start","end","center","between","around","evenly","stretch"],de=()=>["","0",P],oe=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ee=()=>[xt,P];return{cacheSize:500,separator:":",theme:{colors:[Mt],spacing:[Re,Be],blur:["none","",We,P],brightness:ee(),borderColor:[s],borderRadius:["none","","full",We,P],borderSpacing:$(),borderWidth:ue(),contrast:ee(),grayscale:de(),hueRotate:ee(),invert:de(),gap:$(),gradientColorStops:[s],gradientColorStopPositions:[Ku,Be],inset:Je(),margin:Je(),opacity:ee(),padding:$(),saturate:ee(),scale:ee(),sepia:de(),skew:ee(),space:$(),translate:$()},classGroups:{aspect:[{aspect:["auto","square","video",P]}],container:["container"],columns:[{columns:[We]}],"break-after":[{"break-after":oe()}],"break-before":[{"break-before":oe()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...De(),P]}],overflow:[{overflow:re()}],"overflow-x":[{"overflow-x":re()}],"overflow-y":[{"overflow-y":re()}],overscroll:[{overscroll:M()}],"overscroll-x":[{"overscroll-x":M()}],"overscroll-y":[{"overscroll-y":M()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Dt,P]}],basis:[{basis:Je()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",P]}],grow:[{grow:de()}],shrink:[{shrink:de()}],order:[{order:["first","last","none",Dt,P]}],"grid-cols":[{"grid-cols":[Mt]}],"col-start-end":[{col:["auto",{span:["full",Dt,P]},P]}],"col-start":[{"col-start":Ae()}],"col-end":[{"col-end":Ae()}],"grid-rows":[{"grid-rows":[Mt]}],"row-start-end":[{row:["auto",{span:[Dt,P]},P]}],"row-start":[{"row-start":Ae()}],"row-end":[{"row-end":Ae()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",P]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",P]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...ge()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...ge(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...ge(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[p]}],mx:[{mx:[p]}],my:[{my:[p]}],ms:[{ms:[p]}],me:[{me:[p]}],mt:[{mt:[p]}],mr:[{mr:[p]}],mb:[{mb:[p]}],ml:[{ml:[p]}],"space-x":[{"space-x":[I]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[I]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",P,t]}],"min-w":[{"min-w":[P,t,"min","max","fit"]}],"max-w":[{"max-w":[P,t,"none","full","min","max","fit","prose",{screen:[We]},We]}],h:[{h:[P,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[P,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[P,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[P,t,"auto","min","max","fit"]}],"font-size":[{text:["base",We,Be]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Tr]}],"font-family":[{font:[Mt]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",P]}],"line-clamp":[{"line-clamp":["none",xt,Tr]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Re,P]}],"list-image":[{"list-image":["none",P]}],"list-style-type":[{list:["none","disc","decimal",P]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[s]}],"placeholder-opacity":[{"placeholder-opacity":[m]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[s]}],"text-opacity":[{"text-opacity":[m]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...j(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Re,Be]}],"underline-offset":[{"underline-offset":["auto",Re,P]}],"text-decoration-color":[{decoration:[s]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:$()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",P]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",P]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[m]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...De(),Xu]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Qu]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},ed]}],"bg-color":[{bg:[s]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[m]}],"border-style":[{border:[...j(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[m]}],"divide-style":[{divide:j()}],"border-color":[{border:[n]}],"border-color-x":[{"border-x":[n]}],"border-color-y":[{"border-y":[n]}],"border-color-s":[{"border-s":[n]}],"border-color-e":[{"border-e":[n]}],"border-color-t":[{"border-t":[n]}],"border-color-r":[{"border-r":[n]}],"border-color-b":[{"border-b":[n]}],"border-color-l":[{"border-l":[n]}],"divide-color":[{divide:[n]}],"outline-style":[{outline:["",...j()]}],"outline-offset":[{"outline-offset":[Re,P]}],"outline-w":[{outline:[Re,Be]}],"outline-color":[{outline:[s]}],"ring-w":[{ring:ue()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[s]}],"ring-opacity":[{"ring-opacity":[m]}],"ring-offset-w":[{"ring-offset":[Re,Be]}],"ring-offset-color":[{"ring-offset":[s]}],shadow:[{shadow:["","inner","none",We,td]}],"shadow-color":[{shadow:[Mt]}],opacity:[{opacity:[m]}],"mix-blend":[{"mix-blend":[...V(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":V()}],filter:[{filter:["","none"]}],blur:[{blur:[e]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",We,P]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[c]}],saturate:[{saturate:[y]}],sepia:[{sepia:[T]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[e]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[c]}],"backdrop-opacity":[{"backdrop-opacity":[m]}],"backdrop-saturate":[{"backdrop-saturate":[y]}],"backdrop-sepia":[{"backdrop-sepia":[T]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",P]}],duration:[{duration:ee()}],ease:[{ease:["linear","in","out","in-out",P]}],delay:[{delay:ee()}],animate:[{animate:["none","spin","ping","pulse","bounce",P]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[w]}],"scale-x":[{"scale-x":[w]}],"scale-y":[{"scale-y":[w]}],rotate:[{rotate:[Dt,P]}],"translate-x":[{"translate-x":[U]}],"translate-y":[{"translate-y":[U]}],"skew-x":[{"skew-x":[k]}],"skew-y":[{"skew-y":[k]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",P]}],accent:[{accent:["auto",s]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",P]}],"caret-color":[{caret:[s]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":$()}],"scroll-mx":[{"scroll-mx":$()}],"scroll-my":[{"scroll-my":$()}],"scroll-ms":[{"scroll-ms":$()}],"scroll-me":[{"scroll-me":$()}],"scroll-mt":[{"scroll-mt":$()}],"scroll-mr":[{"scroll-mr":$()}],"scroll-mb":[{"scroll-mb":$()}],"scroll-ml":[{"scroll-ml":$()}],"scroll-p":[{"scroll-p":$()}],"scroll-px":[{"scroll-px":$()}],"scroll-py":[{"scroll-py":$()}],"scroll-ps":[{"scroll-ps":$()}],"scroll-pe":[{"scroll-pe":$()}],"scroll-pt":[{"scroll-pt":$()}],"scroll-pr":[{"scroll-pr":$()}],"scroll-pb":[{"scroll-pb":$()}],"scroll-pl":[{"scroll-pl":$()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",P]}],fill:[{fill:[s,"none"]}],"stroke-w":[{stroke:[Re,Be,Tr]}],stroke:[{stroke:[s,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},od=Wu(id);function Gd(...s){return od(Qa(s))}const Vd=s=>{const{key:t,code:e,ctrlKey:r}=s;t.length>1||r||(isNaN(Number(t))||e==="Space")&&s.preventDefault()};function Kd(s){if(!s)return s;const[t,e]=s.split(":").map(Number),r=t>=12?"PM":"AM",n=t%12||12;return`${`${String(n).padStart(2,"0")}:${String(e).padStart(2,"0")}`} ${r}`}const Jd=s=>{const t=Xc();return tc(s,t)},Qd=s=>{const t=s.split(" ");if(t.length<=2)return s;const e=t[0],r=t[t.length-1];return`${e} ${r}`},Xd=s=>{if(!s)return"";const t=s.getFullYear(),e=String(s.getMonth()+1).padStart(2,"0"),r=String(s.getDate()).padStart(2,"0");return`${t}-${e}-${r}`},Zd=s=>{const t=new Date(2024,0,7),e=new Date(t);return e.setDate(t.getDate()+Number(s)),Cn(e,"EEEE",{locale:Ou})},eh=s=>{const t=Jc(s,"HH:mm:ss",new Date);return Cn(t,"hh:mm a")},th=()=>{const s=Ot.useContext(Ys),{authData:t}=s,e=t==null?void 0:t.user,r=(e==null?void 0:e.role)==="doctor",n=(e==null?void 0:e.role)==="nurse",i=e==null?void 0:e.is_admin,o=e==null?void 0:e.name,a=e==null?void 0:e.id;return{...s,isAdmin:i,isDoctor:r,isNurse:n,userName:o,userId:a}};var Un=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(s){return this.listeners.add(s),this.onSubscribe(),()=>{this.listeners.delete(s),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ad={setTimeout:(s,t)=>setTimeout(s,t),clearTimeout:s=>clearTimeout(s),setInterval:(s,t)=>setInterval(s,t),clearInterval:s=>clearInterval(s)},ze,Hr,Bs,ld=(Bs=class{constructor(){ae(this,ze,ad);ae(this,Hr,!1)}setTimeoutProvider(s){X(this,ze,s)}setTimeout(s,t){return O(this,ze).setTimeout(s,t)}clearTimeout(s){O(this,ze).clearTimeout(s)}setInterval(s,t){return O(this,ze).setInterval(s,t)}clearInterval(s){O(this,ze).clearInterval(s)}},ze=new WeakMap,Hr=new WeakMap,Bs),Wr=new ld;function cd(s){setTimeout(s,0)}var dr=typeof window>"u"||"Deno"in globalThis;function rh(){}function sh(s,t){return typeof s=="function"?s(t):s}function ud(s){return typeof s=="number"&&s>=0&&s!==1/0}function nh(s,t){return Math.max(s+(t||0)-Date.now(),0)}function ih(s,t){return typeof s=="function"?s(t):s}function oh(s,t){return typeof s=="function"?s(t):s}function ah(s,t){const{type:e="all",exact:r,fetchStatus:n,predicate:i,queryKey:o,stale:a}=s;if(o){if(r){if(t.queryHash!==dd(o,t.options))return!1}else if(!es(t.queryKey,o))return!1}if(e!=="all"){const l=t.isActive();if(e==="active"&&!l||e==="inactive"&&l)return!1}return!(typeof a=="boolean"&&t.isStale()!==a||n&&n!==t.state.fetchStatus||i&&!i(t))}function lh(s,t){const{exact:e,status:r,predicate:n,mutationKey:i}=s;if(i){if(!t.options.mutationKey)return!1;if(e){if(qr(t.options.mutationKey)!==qr(i))return!1}else if(!es(t.options.mutationKey,i))return!1}return!(r&&t.state.status!==r||n&&!n(t))}function dd(s,t){return((t==null?void 0:t.queryKeyHashFn)||qr)(s)}function qr(s){return JSON.stringify(s,(t,e)=>Fr(e)?Object.keys(e).sort().reduce((r,n)=>(r[n]=e[n],r),{}):e)}function es(s,t){return s===t?!0:typeof s!=typeof t?!1:s&&t&&typeof s=="object"&&typeof t=="object"?Object.keys(t).every(e=>es(s[e],t[e])):!1}var hd=Object.prototype.hasOwnProperty;function Bn(s,t){if(s===t)return s;const e=Ls(s)&&Ls(t);if(!e&&!(Fr(s)&&Fr(t)))return t;const n=(e?s:Object.keys(s)).length,i=e?t:Object.keys(t),o=i.length,a=e?new Array(o):{};let l=0;for(let u=0;u<o;u++){const d=e?u:i[u],c=s[d],h=t[d];if(c===h){a[d]=c,(e?u<n:hd.call(s,d))&&l++;continue}if(c===null||h===null||typeof c!="object"||typeof h!="object"){a[d]=h;continue}const f=Bn(c,h);a[d]=f,f===c&&l++}return n===o&&l===n?s:a}function ch(s,t){if(!t||Object.keys(s).length!==Object.keys(t).length)return!1;for(const e in s)if(s[e]!==t[e])return!1;return!0}function Ls(s){return Array.isArray(s)&&s.length===Object.keys(s).length}function Fr(s){if(!Us(s))return!1;const t=s.constructor;if(t===void 0)return!0;const e=t.prototype;return!(!Us(e)||!e.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(s)!==Object.prototype)}function Us(s){return Object.prototype.toString.call(s)==="[object Object]"}function fd(s){return new Promise(t=>{Wr.setTimeout(t,s)})}function uh(s,t,e){return typeof e.structuralSharing=="function"?e.structuralSharing(s,t):e.structuralSharing!==!1?Bn(s,t):t}function dh(s,t,e=0){const r=[...s,t];return e&&r.length>e?r.slice(1):r}function hh(s,t,e=0){const r=[t,...s];return e&&r.length>e?r.slice(0,-1):r}var gd=Symbol();function fh(s,t){return!s.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!s.queryFn||s.queryFn===gd?()=>Promise.reject(new Error(`Missing queryFn: '${s.queryHash}'`)):s.queryFn}function gh(s,t){return typeof s=="function"?s(...t):!!s}var st,Ye,kt,Ws,md=(Ws=class extends Un{constructor(){super();ae(this,st);ae(this,Ye);ae(this,kt);X(this,kt,t=>{if(!dr&&window.addEventListener){const e=()=>t();return window.addEventListener("visibilitychange",e,!1),()=>{window.removeEventListener("visibilitychange",e)}}})}onSubscribe(){O(this,Ye)||this.setEventListener(O(this,kt))}onUnsubscribe(){var t;this.hasListeners()||((t=O(this,Ye))==null||t.call(this),X(this,Ye,void 0))}setEventListener(t){var e;X(this,kt,t),(e=O(this,Ye))==null||e.call(this),X(this,Ye,t(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(t){O(this,st)!==t&&(X(this,st,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(e=>{e(t)})}isFocused(){var t;return typeof O(this,st)=="boolean"?O(this,st):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},st=new WeakMap,Ye=new WeakMap,kt=new WeakMap,Ws),pd=new md;function yd(){let s,t;const e=new Promise((n,i)=>{s=n,t=i});e.status="pending",e.catch(()=>{});function r(n){Object.assign(e,n),delete e.resolve,delete e.reject}return e.resolve=n=>{r({status:"fulfilled",value:n}),s(n)},e.reject=n=>{r({status:"rejected",reason:n}),t(n)},e}var wd=cd;function bd(){let s=[],t=0,e=a=>{a()},r=a=>{a()},n=wd;const i=a=>{t?s.push(a):n(()=>{e(a)})},o=()=>{const a=s;s=[],a.length&&n(()=>{r(()=>{a.forEach(l=>{e(l)})})})};return{batch:a=>{let l;t++;try{l=a()}finally{t--,t||o()}return l},batchCalls:a=>(...l)=>{i(()=>{a(...l)})},schedule:i,setNotifyFunction:a=>{e=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{n=a}}}var vd=bd(),Tt,Ge,Et,qs,_d=(qs=class extends Un{constructor(){super();ae(this,Tt,!0);ae(this,Ge);ae(this,Et);X(this,Et,t=>{if(!dr&&window.addEventListener){const e=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",e,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",r)}}})}onSubscribe(){O(this,Ge)||this.setEventListener(O(this,Et))}onUnsubscribe(){var t;this.hasListeners()||((t=O(this,Ge))==null||t.call(this),X(this,Ge,void 0))}setEventListener(t){var e;X(this,Et,t),(e=O(this,Ge))==null||e.call(this),X(this,Ge,t(this.setOnline.bind(this)))}setOnline(t){O(this,Tt)!==t&&(X(this,Tt,t),this.listeners.forEach(r=>{r(t)}))}isOnline(){return O(this,Tt)}},Tt=new WeakMap,Ge=new WeakMap,Et=new WeakMap,qs),Wn=new _d;function xd(s){return Math.min(1e3*2**s,3e4)}function kd(s){return(s??"online")==="online"?Wn.isOnline():!0}var Td=class extends Error{constructor(s){super("CancelledError"),this.revert=s==null?void 0:s.revert,this.silent=s==null?void 0:s.silent}};function Ed(s){let t=!1,e=0,r;const n=yd(),i=()=>n.status!=="pending",o=v=>{var p;if(!i()){const m=new Td(v);h(m),(p=s.onCancel)==null||p.call(s,m)}},a=()=>{t=!0},l=()=>{t=!1},u=()=>pd.isFocused()&&(s.networkMode==="always"||Wn.isOnline())&&s.canRun(),d=()=>kd(s.networkMode)&&s.canRun(),c=v=>{i()||(r==null||r(),n.resolve(v))},h=v=>{i()||(r==null||r(),n.reject(v))},f=()=>new Promise(v=>{var p;r=m=>{(i()||u())&&v(m)},(p=s.onPause)==null||p.call(s)}).then(()=>{var v;r=void 0,i()||(v=s.onContinue)==null||v.call(s)}),g=()=>{if(i())return;let v;const p=e===0?s.initialPromise:void 0;try{v=p??s.fn()}catch(m){v=Promise.reject(m)}Promise.resolve(v).then(c).catch(m=>{var k;if(i())return;const x=s.retry??(dr?0:3),y=s.retryDelay??xd,w=typeof y=="function"?y(e,m):y,T=x===!0||typeof x=="number"&&e<x||typeof x=="function"&&x(e,m);if(t||!T){h(m);return}e++,(k=s.onFail)==null||k.call(s,e,m),fd(w).then(()=>u()?void 0:f()).then(()=>{t?h(m):g()})})};return{promise:n,status:()=>n.status,cancel:o,continue:()=>(r==null||r(),n),cancelRetry:a,continueRetry:l,canStart:d,start:()=>(d()?g():f().then(g),n)}}var nt,Fs,Sd=(Fs=class{constructor(){ae(this,nt)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),ud(this.gcTime)&&X(this,nt,Wr.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(s){this.gcTime=Math.max(this.gcTime||0,s??(dr?1/0:5*60*1e3))}clearGcTimeout(){O(this,nt)&&(Wr.clearTimeout(O(this,nt)),X(this,nt,void 0))}},nt=new WeakMap,Fs),Te,ie,it,Ee,Fe,Hs,mh=(Hs=class extends Sd{constructor(t){super();ae(this,Ee);ae(this,Te);ae(this,ie);ae(this,it);this.mutationId=t.mutationId,X(this,ie,t.mutationCache),X(this,Te,[]),this.state=t.state||Pd(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){O(this,Te).includes(t)||(O(this,Te).push(t),this.clearGcTimeout(),O(this,ie).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){X(this,Te,O(this,Te).filter(e=>e!==t)),this.scheduleGc(),O(this,ie).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){O(this,Te).length||(this.state.status==="pending"?this.scheduleGc():O(this,ie).remove(this))}continue(){var t;return((t=O(this,it))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,o,a,l,u,d,c,h,f,g,v,p,m,x,y,w,T,k,I,U;const e=()=>{Ne(this,Ee,Fe).call(this,{type:"continue"})};X(this,it,Ed({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(M,re)=>{Ne(this,Ee,Fe).call(this,{type:"failed",failureCount:M,error:re})},onPause:()=>{Ne(this,Ee,Fe).call(this,{type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>O(this,ie).canRun(this)}));const r=this.state.status==="pending",n=!O(this,it).canStart();try{if(r)e();else{Ne(this,Ee,Fe).call(this,{type:"pending",variables:t,isPaused:n}),await((o=(i=O(this,ie).config).onMutate)==null?void 0:o.call(i,t,this));const re=await((l=(a=this.options).onMutate)==null?void 0:l.call(a,t));re!==this.state.context&&Ne(this,Ee,Fe).call(this,{type:"pending",context:re,variables:t,isPaused:n})}const M=await O(this,it).start();return await((d=(u=O(this,ie).config).onSuccess)==null?void 0:d.call(u,M,t,this.state.context,this)),await((h=(c=this.options).onSuccess)==null?void 0:h.call(c,M,t,this.state.context)),await((g=(f=O(this,ie).config).onSettled)==null?void 0:g.call(f,M,null,this.state.variables,this.state.context,this)),await((p=(v=this.options).onSettled)==null?void 0:p.call(v,M,null,t,this.state.context)),Ne(this,Ee,Fe).call(this,{type:"success",data:M}),M}catch(M){try{throw await((x=(m=O(this,ie).config).onError)==null?void 0:x.call(m,M,t,this.state.context,this)),await((w=(y=this.options).onError)==null?void 0:w.call(y,M,t,this.state.context)),await((k=(T=O(this,ie).config).onSettled)==null?void 0:k.call(T,void 0,M,this.state.variables,this.state.context,this)),await((U=(I=this.options).onSettled)==null?void 0:U.call(I,void 0,M,t,this.state.context)),M}finally{Ne(this,Ee,Fe).call(this,{type:"error",error:M})}}finally{O(this,ie).runNext(this)}}},Te=new WeakMap,ie=new WeakMap,it=new WeakMap,Ee=new WeakSet,Fe=function(t){const e=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=e(this.state),vd.batch(()=>{O(this,Te).forEach(r=>{r.onMutationUpdate(t)}),O(this,ie).notify({mutation:this,type:"updated",action:t})})},Hs);function Pd(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var qn=Ot.createContext(void 0),ph=s=>{const t=Ot.useContext(qn);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},yh=({client:s,children:t})=>(Ot.useEffect(()=>(s.mount(),()=>{s.unmount()}),[s]),zs.jsx(qn.Provider,{value:s,children:t}));export{yd as $,jd as A,jt as B,nl as C,Cn as D,Tn as E,En as F,tc as G,ol as H,Pt as I,Ve as J,ll as K,kn as L,mh as M,Kd as N,Xd as O,ph as P,yh as Q,Zd as R,Un as S,Rd as T,eh as U,zd as V,ji as W,Jd as X,Id as Y,Vd as Z,qt as _,hh as a,oh as a0,ch as a1,dr as a2,ud as a3,nh as a4,Wr as a5,uh as a6,gh as a7,kd as a8,Sd as a9,Ed as aa,Td as ab,Qa as ac,Yd as ad,Pd as ae,dh as b,lh as c,rh as d,fh as e,ah as f,pd as g,dd as h,sh as i,qr as j,$d as k,Gd as l,Gs as m,vd as n,Wn as o,es as p,Qd as q,ih as r,gd as s,ds as t,th as u,G as v,Z as w,vn as x,sl as y,Nr as z};
