const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/browser-BDmdcz6z.js","assets/chunk-SYFQ2XB5-BeKHOpyI.js"])))=>i.map(i=>d[i]);
var Cs=Object.defineProperty;var fn=s=>{throw TypeError(s)};var $s=(s,e,t)=>e in s?Cs(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var gt=(s,e,t)=>$s(s,typeof e!="symbol"?e+"":e,t),Rt=(s,e,t)=>e.has(s)||fn("Cannot "+t);var k=(s,e,t)=>(Rt(s,e,"read from private field"),t?t.call(s):e.get(s)),te=(s,e,t)=>e.has(s)?fn("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t),N=(s,e,t,n)=>(Rt(s,e,"write to private field"),n?n.call(s,t):e.set(s,t),t),we=(s,e,t)=>(Rt(s,e,"access private method"),t);import{A as Bn,B as Nn,C as Fn,D as As,r as ct,E as Rs,n as Is,w as p,y as Ls,G as Ds,H as ne}from"./chunk-SYFQ2XB5-BeKHOpyI.js";function Ja(s){return function(){const t={params:Bn(),loaderData:Nn(),actionData:Fn(),matches:As()};return ct.createElement(s,t)}}function Ga(s){return function(){const t={params:Bn(),loaderData:Nn(),actionData:Fn(),error:Rs()};return ct.createElement(s,t)}}var zn=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(s){return this.listeners.add(s),this.onSubscribe(),()=>{this.listeners.delete(s),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},kt=typeof window>"u"||"Deno"in globalThis;function Ka(){}function Wa(s,e){return typeof s=="function"?s(e):s}function Us(s){return typeof s=="number"&&s>=0&&s!==1/0}function Va(s,e){return Math.max(s+(e||0)-Date.now(),0)}function Ya(s,e){return typeof s=="function"?s(e):s}function Qa(s,e){return typeof s=="function"?s(e):s}function Xa(s,e){const{type:t="all",exact:n,fetchStatus:r,predicate:i,queryKey:a,stale:o}=s;if(a){if(n){if(e.queryHash!==Ms(a,e.options))return!1}else if(!Yt(e.queryKey,a))return!1}if(t!=="all"){const l=e.isActive();if(t==="active"&&!l||t==="inactive"&&l)return!1}return!(typeof o=="boolean"&&e.isStale()!==o||r&&r!==e.state.fetchStatus||i&&!i(e))}function Za(s,e){const{exact:t,status:n,predicate:r,mutationKey:i}=s;if(i){if(!e.options.mutationKey)return!1;if(t){if(Bt(e.options.mutationKey)!==Bt(i))return!1}else if(!Yt(e.options.mutationKey,i))return!1}return!(n&&e.state.status!==n||r&&!r(e))}function Ms(s,e){return((e==null?void 0:e.queryKeyHashFn)||Bt)(s)}function Bt(s){return JSON.stringify(s,(e,t)=>Nt(t)?Object.keys(t).sort().reduce((n,r)=>(n[r]=t[r],n),{}):t)}function Yt(s,e){return s===e?!0:typeof s!=typeof e?!1:s&&e&&typeof s=="object"&&typeof e=="object"?!Object.keys(e).some(t=>!Yt(s[t],e[t])):!1}function Hn(s,e){if(s===e)return s;const t=pn(s)&&pn(e);if(t||Nt(s)&&Nt(e)){const n=t?s:Object.keys(s),r=n.length,i=t?e:Object.keys(e),a=i.length,o=t?[]:{};let l=0;for(let u=0;u<a;u++){const d=t?u:i[u];(!t&&n.includes(d)||t)&&s[d]===void 0&&e[d]===void 0?(o[d]=void 0,l++):(o[d]=Hn(s[d],e[d]),o[d]===s[d]&&s[d]!==void 0&&l++)}return r===a&&l===r?s:o}return e}function eo(s,e){if(!e||Object.keys(s).length!==Object.keys(e).length)return!1;for(const t in s)if(s[t]!==e[t])return!1;return!0}function pn(s){return Array.isArray(s)&&s.length===Object.keys(s).length}function Nt(s){if(!gn(s))return!1;const e=s.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!gn(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(s)!==Object.prototype)}function gn(s){return Object.prototype.toString.call(s)==="[object Object]"}function Bs(s){return new Promise(e=>{setTimeout(e,s)})}function to(s,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(s,e):t.structuralSharing!==!1?Hn(s,e):e}function no(s,e,t=0){const n=[...s,e];return t&&n.length>t?n.slice(1):n}function so(s,e,t=0){const n=[e,...s];return t&&n.length>t?n.slice(0,-1):n}var Ns=Symbol();function ro(s,e){return!s.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!s.queryFn||s.queryFn===Ns?()=>Promise.reject(new Error(`Missing queryFn: '${s.queryHash}'`)):s.queryFn}var $e,Se,qe,Ln,Fs=(Ln=class extends zn{constructor(){super();te(this,$e);te(this,Se);te(this,qe);N(this,qe,e=>{if(!kt&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){k(this,Se)||this.setEventListener(k(this,qe))}onUnsubscribe(){var e;this.hasListeners()||((e=k(this,Se))==null||e.call(this),N(this,Se,void 0))}setEventListener(e){var t;N(this,qe,e),(t=k(this,Se))==null||t.call(this),N(this,Se,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){k(this,$e)!==e&&(N(this,$e,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof k(this,$e)=="boolean"?k(this,$e):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},$e=new WeakMap,Se=new WeakMap,qe=new WeakMap,Ln),zs=new Fs,Je,xe,Ge,Dn,Hs=(Dn=class extends zn{constructor(){super();te(this,Je,!0);te(this,xe);te(this,Ge);N(this,Ge,e=>{if(!kt&&window.addEventListener){const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}})}onSubscribe(){k(this,xe)||this.setEventListener(k(this,Ge))}onUnsubscribe(){var e;this.hasListeners()||((e=k(this,xe))==null||e.call(this),N(this,xe,void 0))}setEventListener(e){var t;N(this,Ge,e),(t=k(this,xe))==null||t.call(this),N(this,xe,e(this.setOnline.bind(this)))}setOnline(e){k(this,Je)!==e&&(N(this,Je,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return k(this,Je)}},Je=new WeakMap,xe=new WeakMap,Ge=new WeakMap,Dn),qn=new Hs;function qs(){let s,e;const t=new Promise((r,i)=>{s=r,e=i});t.status="pending",t.catch(()=>{});function n(r){Object.assign(t,r),delete t.resolve,delete t.reject}return t.resolve=r=>{n({status:"fulfilled",value:r}),s(r)},t.reject=r=>{n({status:"rejected",reason:r}),e(r)},t}function Js(s){return Math.min(1e3*2**s,3e4)}function Gs(s){return(s??"online")==="online"?qn.isOnline():!0}var Jn=class extends Error{constructor(s){super("CancelledError"),this.revert=s==null?void 0:s.revert,this.silent=s==null?void 0:s.silent}};function io(s){return s instanceof Jn}function Ks(s){let e=!1,t=0,n=!1,r;const i=qs(),a=m=>{var f;n||(h(new Jn(m)),(f=s.abort)==null||f.call(s))},o=()=>{e=!0},l=()=>{e=!1},u=()=>zs.isFocused()&&(s.networkMode==="always"||qn.isOnline())&&s.canRun(),d=()=>Gs(s.networkMode)&&s.canRun(),c=m=>{var f;n||(n=!0,(f=s.onSuccess)==null||f.call(s,m),r==null||r(),i.resolve(m))},h=m=>{var f;n||(n=!0,(f=s.onError)==null||f.call(s,m),r==null||r(),i.reject(m))},g=()=>new Promise(m=>{var f;r=_=>{(n||u())&&m(_)},(f=s.onPause)==null||f.call(s)}).then(()=>{var m;r=void 0,n||(m=s.onContinue)==null||m.call(s)}),y=()=>{if(n)return;let m;const f=t===0?s.initialPromise:void 0;try{m=f??s.fn()}catch(_){m=Promise.reject(_)}Promise.resolve(m).then(c).catch(_=>{var G;if(n)return;const j=s.retry??(kt?0:3),T=s.retryDelay??Js,C=typeof T=="function"?T(t,_):T,S=j===!0||typeof j=="number"&&t<j||typeof j=="function"&&j(t,_);if(e||!S){h(_);return}t++,(G=s.onFail)==null||G.call(s,t,_),Bs(C).then(()=>u()?void 0:g()).then(()=>{e?h(_):y()})})};return{promise:i,cancel:a,continue:()=>(r==null||r(),i),cancelRetry:o,continueRetry:l,canStart:d,start:()=>(d()?y():g().then(y),i)}}function Ws(){let s=[],e=0,t=o=>{o()},n=o=>{o()},r=o=>setTimeout(o,0);const i=o=>{e?s.push(o):r(()=>{t(o)})},a=()=>{const o=s;s=[],o.length&&r(()=>{n(()=>{o.forEach(l=>{t(l)})})})};return{batch:o=>{let l;e++;try{l=o()}finally{e--,e||a()}return l},batchCalls:o=>(...l)=>{i(()=>{o(...l)})},schedule:i,setNotifyFunction:o=>{t=o},setBatchNotifyFunction:o=>{n=o},setScheduler:o=>{r=o}}}var Vs=Ws(),Ae,Un,Ys=(Un=class{constructor(){te(this,Ae)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Us(this.gcTime)&&N(this,Ae,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(s){this.gcTime=Math.max(this.gcTime||0,s??(kt?1/0:5*60*1e3))}clearGcTimeout(){k(this,Ae)&&(clearTimeout(k(this,Ae)),N(this,Ae,void 0))}},Ae=new WeakMap,Un),ue,J,Re,de,be,Mn,ao=(Mn=class extends Ys{constructor(e){super();te(this,de);te(this,ue);te(this,J);te(this,Re);this.mutationId=e.mutationId,N(this,J,e.mutationCache),N(this,ue,[]),this.state=e.state||Qs(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){k(this,ue).includes(e)||(k(this,ue).push(e),this.clearGcTimeout(),k(this,J).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){N(this,ue,k(this,ue).filter(t=>t!==e)),this.scheduleGc(),k(this,J).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){k(this,ue).length||(this.state.status==="pending"?this.scheduleGc():k(this,J).remove(this))}continue(){var e;return((e=k(this,Re))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var r,i,a,o,l,u,d,c,h,g,y,m,f,_,j,T,C,S,G,oe;N(this,Re,Ks({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(v,A)=>{we(this,de,be).call(this,{type:"failed",failureCount:v,error:A})},onPause:()=>{we(this,de,be).call(this,{type:"pause"})},onContinue:()=>{we(this,de,be).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>k(this,J).canRun(this)}));const t=this.state.status==="pending",n=!k(this,Re).canStart();try{if(!t){we(this,de,be).call(this,{type:"pending",variables:e,isPaused:n}),await((i=(r=k(this,J).config).onMutate)==null?void 0:i.call(r,e,this));const A=await((o=(a=this.options).onMutate)==null?void 0:o.call(a,e));A!==this.state.context&&we(this,de,be).call(this,{type:"pending",context:A,variables:e,isPaused:n})}const v=await k(this,Re).start();return await((u=(l=k(this,J).config).onSuccess)==null?void 0:u.call(l,v,e,this.state.context,this)),await((c=(d=this.options).onSuccess)==null?void 0:c.call(d,v,e,this.state.context)),await((g=(h=k(this,J).config).onSettled)==null?void 0:g.call(h,v,null,this.state.variables,this.state.context,this)),await((m=(y=this.options).onSettled)==null?void 0:m.call(y,v,null,e,this.state.context)),we(this,de,be).call(this,{type:"success",data:v}),v}catch(v){try{throw await((_=(f=k(this,J).config).onError)==null?void 0:_.call(f,v,e,this.state.context,this)),await((T=(j=this.options).onError)==null?void 0:T.call(j,v,e,this.state.context)),await((S=(C=k(this,J).config).onSettled)==null?void 0:S.call(C,void 0,v,this.state.variables,this.state.context,this)),await((oe=(G=this.options).onSettled)==null?void 0:oe.call(G,void 0,v,e,this.state.context)),v}finally{we(this,de,be).call(this,{type:"error",error:v})}}finally{k(this,J).runNext(this)}}},ue=new WeakMap,J=new WeakMap,Re=new WeakMap,de=new WeakSet,be=function(e){const t=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Vs.batch(()=>{k(this,ue).forEach(n=>{n.onMutationUpdate(e)}),k(this,J).notify({mutation:this,type:"updated",action:e})})},Mn);function Qs(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Gn=ct.createContext(void 0),oo=s=>{const e=ct.useContext(Gn);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},lo=({client:s,children:e})=>(ct.useEffect(()=>(s.mount(),()=>{s.unmount()}),[s]),Is.jsx(Gn.Provider,{value:s,children:e}));function Xs(s){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.appendChild(t),t.styleSheet?t.styleSheet.cssText=s:t.appendChild(document.createTextNode(s))}const Zs=s=>{switch(s){case"success":return nr;case"info":return rr;case"warning":return sr;case"error":return ir;default:return null}},er=Array(12).fill(0),tr=({visible:s,className:e})=>p.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":s},p.createElement("div",{className:"sonner-spinner"},er.map((t,n)=>p.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),nr=p.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},p.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),sr=p.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},p.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),rr=p.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},p.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),ir=p.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},p.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),ar=p.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},p.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),p.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),or=()=>{const[s,e]=p.useState(document.hidden);return p.useEffect(()=>{const t=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",t),()=>window.removeEventListener("visibilitychange",t)},[]),s};let Ft=1;class lr{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;const{message:n,...r}=e,i=typeof(e==null?void 0:e.id)=="number"||((t=e.id)==null?void 0:t.length)>0?e.id:Ft++,a=this.toasts.find(l=>l.id===i),o=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),a?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...e,id:i,title:n}),{...l,...e,id:i,dismissible:o,title:n}):l):this.addToast({title:n,...r,dismissible:o,id:i}),i},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(t=>{this.subscribers.forEach(n=>n({id:t.id,dismiss:!0}))}),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:e,dismiss:!0}))),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:e,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));const r=Promise.resolve(e instanceof Function?e():e);let i=n!==void 0,a;const o=r.then(async u=>{if(a=["resolve",u],p.isValidElement(u))i=!1,this.create({id:n,type:"default",message:u});else if(ur(u)&&!u.ok){i=!1;const c=typeof t.error=="function"?await t.error(`HTTP error! status: ${u.status}`):t.error,h=typeof t.description=="function"?await t.description(`HTTP error! status: ${u.status}`):t.description,g=typeof c=="object"?c:{message:c};this.create({id:n,type:"error",description:h,...g})}else if(u instanceof Error){i=!1;const c=typeof t.error=="function"?await t.error(u):t.error,h=typeof t.description=="function"?await t.description(u):t.description,g=typeof c=="object"?c:{message:c};this.create({id:n,type:"error",description:h,...g})}else if(t.success!==void 0){i=!1;const c=typeof t.success=="function"?await t.success(u):t.success,h=typeof t.description=="function"?await t.description(u):t.description,g=typeof c=="object"?c:{message:c};this.create({id:n,type:"success",description:h,...g})}}).catch(async u=>{if(a=["reject",u],t.error!==void 0){i=!1;const d=typeof t.error=="function"?await t.error(u):t.error,c=typeof t.description=="function"?await t.description(u):t.description,h=typeof d=="object"?d:{message:d};this.create({id:n,type:"error",description:c,...h})}}).finally(()=>{i&&(this.dismiss(n),n=void 0),t.finally==null||t.finally.call(t)}),l=()=>new Promise((u,d)=>o.then(()=>a[0]==="reject"?d(a[1]):u(a[1])).catch(d));return typeof n!="string"&&typeof n!="number"?{unwrap:l}:Object.assign(n,{unwrap:l})},this.custom=(e,t)=>{const n=(t==null?void 0:t.id)||Ft++;return this.create({jsx:e(n),id:n,...t}),n},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const W=new lr,cr=(s,e)=>{const t=(e==null?void 0:e.id)||Ft++;return W.addToast({title:s,...e,id:t}),t},ur=s=>s&&typeof s=="object"&&"ok"in s&&typeof s.ok=="boolean"&&"status"in s&&typeof s.status=="number",dr=cr,hr=()=>W.toasts,fr=()=>W.getActiveToasts(),co=Object.assign(dr,{success:W.success,info:W.info,warning:W.warning,error:W.error,custom:W.custom,message:W.message,promise:W.promise,dismiss:W.dismiss,loading:W.loading},{getHistory:hr,getToasts:fr});Xs("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}[data-sonner-toaster][data-lifted=true]{transform:translateY(-8px)}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function mt(s){return s.label!==void 0}const pr=3,gr="24px",mr="16px",mn=4e3,yr=356,wr=14,br=45,_r=200;function le(...s){return s.filter(Boolean).join(" ")}function vr(s){const[e,t]=s.split("-"),n=[];return e&&n.push(e),t&&n.push(t),n}const kr=s=>{var e,t,n,r,i,a,o,l,u;const{invert:d,toast:c,unstyled:h,interacting:g,setHeights:y,visibleToasts:m,heights:f,index:_,toasts:j,expanded:T,removeToast:C,defaultRichColors:S,closeButton:G,style:oe,cancelButtonStyle:v,actionButtonStyle:A,className:z="",descriptionClassName:L="",duration:H,position:M,gap:me,expandByDefault:q,classNames:x,icons:he,closeButtonAriaLabel:fe="Close toast"}=s,[se,Xe]=p.useState(null),[P,R]=p.useState(null),[$,X]=p.useState(!1),[Te,I]=p.useState(!1),[Ze,De]=p.useState(!1),[et,tt]=p.useState(!1),[ws,nn]=p.useState(!1),[bs,Ct]=p.useState(0),[_s,sn]=p.useState(0),nt=p.useRef(c.duration||H||mn),rn=p.useRef(null),pe=p.useRef(null),vs=_===0,ks=_+1<=m,Z=c.type,Ue=c.dismissible!==!1,Es=c.className||"",Ss=c.descriptionClassName||"",ht=p.useMemo(()=>f.findIndex(w=>w.toastId===c.id)||0,[f,c.id]),xs=p.useMemo(()=>{var w;return(w=c.closeButton)!=null?w:G},[c.closeButton,G]),an=p.useMemo(()=>c.duration||H||mn,[c.duration,H]),$t=p.useRef(0),Me=p.useRef(0),on=p.useRef(0),Be=p.useRef(null),[Ts,Ps]=M.split("-"),ln=p.useMemo(()=>f.reduce((w,D,F)=>F>=ht?w:w+D.height,0),[f,ht]),cn=or(),Os=c.invert||d,At=Z==="loading";Me.current=p.useMemo(()=>ht*me+ln,[ht,ln]),p.useEffect(()=>{nt.current=an},[an]),p.useEffect(()=>{X(!0)},[]),p.useEffect(()=>{const w=pe.current;if(w){const D=w.getBoundingClientRect().height;return sn(D),y(F=>[{toastId:c.id,height:D,position:c.position},...F]),()=>y(F=>F.filter(Y=>Y.toastId!==c.id))}},[y,c.id]),p.useLayoutEffect(()=>{if(!$)return;const w=pe.current,D=w.style.height;w.style.height="auto";const F=w.getBoundingClientRect().height;w.style.height=D,sn(F),y(Y=>Y.find(B=>B.toastId===c.id)?Y.map(B=>B.toastId===c.id?{...B,height:F}:B):[{toastId:c.id,height:F,position:c.position},...Y])},[$,c.title,c.description,y,c.id]);const ye=p.useCallback(()=>{I(!0),Ct(Me.current),y(w=>w.filter(D=>D.toastId!==c.id)),setTimeout(()=>{C(c)},_r)},[c,C,y,Me]);p.useEffect(()=>{if(c.promise&&Z==="loading"||c.duration===1/0||c.type==="loading")return;let w;return T||g||cn?(()=>{if(on.current<$t.current){const Y=new Date().getTime()-$t.current;nt.current=nt.current-Y}on.current=new Date().getTime()})():(()=>{nt.current!==1/0&&($t.current=new Date().getTime(),w=setTimeout(()=>{c.onAutoClose==null||c.onAutoClose.call(c,c),ye()},nt.current))})(),()=>clearTimeout(w)},[T,g,c,Z,cn,ye]),p.useEffect(()=>{c.delete&&ye()},[ye,c.delete]);function js(){var w;if(he!=null&&he.loading){var D;return p.createElement("div",{className:le(x==null?void 0:x.loader,c==null||(D=c.classNames)==null?void 0:D.loader,"sonner-loader"),"data-visible":Z==="loading"},he.loading)}return p.createElement(tr,{className:le(x==null?void 0:x.loader,c==null||(w=c.classNames)==null?void 0:w.loader),visible:Z==="loading"})}var un,dn;return p.createElement("li",{tabIndex:0,ref:pe,className:le(z,Es,x==null?void 0:x.toast,c==null||(e=c.classNames)==null?void 0:e.toast,x==null?void 0:x.default,x==null?void 0:x[Z],c==null||(t=c.classNames)==null?void 0:t[Z]),"data-sonner-toast":"","data-rich-colors":(un=c.richColors)!=null?un:S,"data-styled":!(c.jsx||c.unstyled||h),"data-mounted":$,"data-promise":!!c.promise,"data-swiped":ws,"data-removed":Te,"data-visible":ks,"data-y-position":Ts,"data-x-position":Ps,"data-index":_,"data-front":vs,"data-swiping":Ze,"data-dismissible":Ue,"data-type":Z,"data-invert":Os,"data-swipe-out":et,"data-swipe-direction":P,"data-expanded":!!(T||q&&$),style:{"--index":_,"--toasts-before":_,"--z-index":j.length-_,"--offset":`${Te?bs:Me.current}px`,"--initial-height":q?"auto":`${_s}px`,...oe,...c.style},onDragEnd:()=>{De(!1),Xe(null),Be.current=null},onPointerDown:w=>{At||!Ue||(rn.current=new Date,Ct(Me.current),w.target.setPointerCapture(w.pointerId),w.target.tagName!=="BUTTON"&&(De(!0),Be.current={x:w.clientX,y:w.clientY}))},onPointerUp:()=>{var w,D,F;if(et||!Ue)return;Be.current=null;const Y=Number(((w=pe.current)==null?void 0:w.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),ft=Number(((D=pe.current)==null?void 0:D.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),B=new Date().getTime()-((F=rn.current)==null?void 0:F.getTime()),ee=se==="x"?Y:ft,pt=Math.abs(ee)/B;if(Math.abs(ee)>=br||pt>.11){Ct(Me.current),c.onDismiss==null||c.onDismiss.call(c,c),R(se==="x"?Y>0?"right":"left":ft>0?"down":"up"),ye(),tt(!0);return}else{var re,ie;(re=pe.current)==null||re.style.setProperty("--swipe-amount-x","0px"),(ie=pe.current)==null||ie.style.setProperty("--swipe-amount-y","0px")}nn(!1),De(!1),Xe(null)},onPointerMove:w=>{var D,F,Y;if(!Be.current||!Ue||((D=window.getSelection())==null?void 0:D.toString().length)>0)return;const B=w.clientY-Be.current.y,ee=w.clientX-Be.current.x;var pt;const re=(pt=s.swipeDirections)!=null?pt:vr(M);!se&&(Math.abs(ee)>1||Math.abs(B)>1)&&Xe(Math.abs(ee)>Math.abs(B)?"x":"y");let ie={x:0,y:0};const hn=Pe=>1/(1.5+Math.abs(Pe)/20);if(se==="y"){if(re.includes("top")||re.includes("bottom"))if(re.includes("top")&&B<0||re.includes("bottom")&&B>0)ie.y=B;else{const Pe=B*hn(B);ie.y=Math.abs(Pe)<Math.abs(B)?Pe:B}}else if(se==="x"&&(re.includes("left")||re.includes("right")))if(re.includes("left")&&ee<0||re.includes("right")&&ee>0)ie.x=ee;else{const Pe=ee*hn(ee);ie.x=Math.abs(Pe)<Math.abs(ee)?Pe:ee}(Math.abs(ie.x)>0||Math.abs(ie.y)>0)&&nn(!0),(F=pe.current)==null||F.style.setProperty("--swipe-amount-x",`${ie.x}px`),(Y=pe.current)==null||Y.style.setProperty("--swipe-amount-y",`${ie.y}px`)}},xs&&!c.jsx&&Z!=="loading"?p.createElement("button",{"aria-label":fe,"data-disabled":At,"data-close-button":!0,onClick:At||!Ue?()=>{}:()=>{ye(),c.onDismiss==null||c.onDismiss.call(c,c)},className:le(x==null?void 0:x.closeButton,c==null||(n=c.classNames)==null?void 0:n.closeButton)},(dn=he==null?void 0:he.close)!=null?dn:ar):null,Z||c.icon||c.promise?p.createElement("div",{"data-icon":"",className:le(x==null?void 0:x.icon,c==null||(r=c.classNames)==null?void 0:r.icon)},c.promise||c.type==="loading"&&!c.icon?c.icon||js():null,c.type!=="loading"?c.icon||(he==null?void 0:he[Z])||Zs(Z):null):null,p.createElement("div",{"data-content":"",className:le(x==null?void 0:x.content,c==null||(i=c.classNames)==null?void 0:i.content)},p.createElement("div",{"data-title":"",className:le(x==null?void 0:x.title,c==null||(a=c.classNames)==null?void 0:a.title)},c.jsx?c.jsx:typeof c.title=="function"?c.title():c.title),c.description?p.createElement("div",{"data-description":"",className:le(L,Ss,x==null?void 0:x.description,c==null||(o=c.classNames)==null?void 0:o.description)},typeof c.description=="function"?c.description():c.description):null),p.isValidElement(c.cancel)?c.cancel:c.cancel&&mt(c.cancel)?p.createElement("button",{"data-button":!0,"data-cancel":!0,style:c.cancelButtonStyle||v,onClick:w=>{mt(c.cancel)&&Ue&&(c.cancel.onClick==null||c.cancel.onClick.call(c.cancel,w),ye())},className:le(x==null?void 0:x.cancelButton,c==null||(l=c.classNames)==null?void 0:l.cancelButton)},c.cancel.label):null,p.isValidElement(c.action)?c.action:c.action&&mt(c.action)?p.createElement("button",{"data-button":!0,"data-action":!0,style:c.actionButtonStyle||A,onClick:w=>{mt(c.action)&&(c.action.onClick==null||c.action.onClick.call(c.action,w),!w.defaultPrevented&&ye())},className:le(x==null?void 0:x.actionButton,c==null||(u=c.classNames)==null?void 0:u.actionButton)},c.action.label):null)};function yn(){if(typeof window>"u"||typeof document>"u")return"ltr";const s=document.documentElement.getAttribute("dir");return s==="auto"||!s?window.getComputedStyle(document.documentElement).direction:s}function Er(s,e){const t={};return[s,e].forEach((n,r)=>{const i=r===1,a=i?"--mobile-offset":"--offset",o=i?mr:gr;function l(u){["top","right","bottom","left"].forEach(d=>{t[`${a}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof n=="number"||typeof n=="string"?l(n):typeof n=="object"?["top","right","bottom","left"].forEach(u=>{n[u]===void 0?t[`${a}-${u}`]=o:t[`${a}-${u}`]=typeof n[u]=="number"?`${n[u]}px`:n[u]}):l(o)}),t}const uo=p.forwardRef(function(e,t){const{invert:n,position:r="bottom-right",hotkey:i=["altKey","KeyT"],expand:a,closeButton:o,className:l,offset:u,mobileOffset:d,theme:c="light",richColors:h,duration:g,style:y,visibleToasts:m=pr,toastOptions:f,dir:_=yn(),gap:j=wr,icons:T,containerAriaLabel:C="Notifications"}=e,[S,G]=p.useState([]),oe=p.useMemo(()=>Array.from(new Set([r].concat(S.filter(P=>P.position).map(P=>P.position)))),[S,r]),[v,A]=p.useState([]),[z,L]=p.useState(!1),[H,M]=p.useState(!1),[me,q]=p.useState(c!=="system"?c:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),x=p.useRef(null),he=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),fe=p.useRef(null),se=p.useRef(!1),Xe=p.useCallback(P=>{G(R=>{var $;return($=R.find(X=>X.id===P.id))!=null&&$.delete||W.dismiss(P.id),R.filter(({id:X})=>X!==P.id)})},[]);return p.useEffect(()=>W.subscribe(P=>{if(P.dismiss){const R=S.map($=>$.id===P.id?{...$,delete:!0}:$);requestAnimationFrame(()=>{G(R)});return}setTimeout(()=>{Ls.flushSync(()=>{G(R=>{const $=R.findIndex(X=>X.id===P.id);return $!==-1?[...R.slice(0,$),{...R[$],...P},...R.slice($+1)]:[P,...R]})})})}),[S]),p.useEffect(()=>{if(c!=="system"){q(c);return}if(c==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?q("dark"):q("light")),typeof window>"u")return;const P=window.matchMedia("(prefers-color-scheme: dark)");try{P.addEventListener("change",({matches:R})=>{q(R?"dark":"light")})}catch{P.addListener(({matches:$})=>{try{q($?"dark":"light")}catch(X){console.error(X)}})}},[c]),p.useEffect(()=>{S.length<=1&&L(!1)},[S]),p.useEffect(()=>{const P=R=>{var $;if(i.every(I=>R[I]||R.code===I)){var Te;L(!0),(Te=x.current)==null||Te.focus()}R.code==="Escape"&&(document.activeElement===x.current||($=x.current)!=null&&$.contains(document.activeElement))&&L(!1)};return document.addEventListener("keydown",P),()=>document.removeEventListener("keydown",P)},[i]),p.useEffect(()=>{if(x.current)return()=>{fe.current&&(fe.current.focus({preventScroll:!0}),fe.current=null,se.current=!1)}},[x.current]),p.createElement("section",{ref:t,"aria-label":`${C} ${he}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},oe.map((P,R)=>{var $;const[X,Te]=P.split("-");return S.length?p.createElement("ol",{key:P,dir:_==="auto"?yn():_,tabIndex:-1,ref:x,className:l,"data-sonner-toaster":!0,"data-sonner-theme":me,"data-y-position":X,"data-lifted":z&&S.length>1&&!a,"data-x-position":Te,style:{"--front-toast-height":`${(($=v[0])==null?void 0:$.height)||0}px`,"--width":`${yr}px`,"--gap":`${j}px`,...y,...Er(u,d)},onBlur:I=>{se.current&&!I.currentTarget.contains(I.relatedTarget)&&(se.current=!1,fe.current&&(fe.current.focus({preventScroll:!0}),fe.current=null))},onFocus:I=>{I.target instanceof HTMLElement&&I.target.dataset.dismissible==="false"||se.current||(se.current=!0,fe.current=I.relatedTarget)},onMouseEnter:()=>L(!0),onMouseMove:()=>L(!0),onMouseLeave:()=>{H||L(!1)},onDragEnd:()=>L(!1),onPointerDown:I=>{I.target instanceof HTMLElement&&I.target.dataset.dismissible==="false"||M(!0)},onPointerUp:()=>M(!1)},S.filter(I=>!I.position&&R===0||I.position===P).map((I,Ze)=>{var De,et;return p.createElement(kr,{key:I.id,icons:T,index:Ze,toast:I,defaultRichColors:h,duration:(De=f==null?void 0:f.duration)!=null?De:g,className:f==null?void 0:f.className,descriptionClassName:f==null?void 0:f.descriptionClassName,invert:n,visibleToasts:m,closeButton:(et=f==null?void 0:f.closeButton)!=null?et:o,interacting:H,position:P,style:f==null?void 0:f.style,unstyled:f==null?void 0:f.unstyled,classNames:f==null?void 0:f.classNames,cancelButtonStyle:f==null?void 0:f.cancelButtonStyle,actionButtonStyle:f==null?void 0:f.actionButtonStyle,closeButtonAriaLabel:f==null?void 0:f.closeButtonAriaLabel,removeToast:Xe,toasts:S.filter(tt=>tt.position==I.position),heights:v.filter(tt=>tt.position==I.position),setHeights:A,expandByDefault:a,gap:j,expanded:z,swipeDirections:e.swipeDirections})})):null}))}),Sr="modulepreload",xr=function(s){return"/"+s},wn={},Ke=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));r=Promise.allSettled(t.map(l=>{if(l=xr(l),l in wn)return;wn[l]=!0;const u=l.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const c=document.createElement("link");if(c.rel=u?"stylesheet":Sr,u||(c.as="script"),c.crossOrigin="",c.href=l,o&&c.setAttribute("nonce",o),document.head.appendChild(c),u)return new Promise((h,g)=>{c.addEventListener("load",h),c.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return r.then(a=>{for(const o of a||[])o.status==="rejected"&&i(o.reason);return e().catch(i)})},Tr=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>Ke(async()=>{const{default:n}=await Promise.resolve().then(()=>Ye);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)};class Qt extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class Pr extends Qt{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Or extends Qt{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class jr extends Qt{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var zt;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(zt||(zt={}));var Cr=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{u(n.next(d))}catch(c){a(c)}}function l(d){try{u(n.throw(d))}catch(c){a(c)}}function u(d){d.done?i(d.value):r(d.value).then(o,l)}u((n=n.apply(s,e||[])).next())})};class $r{constructor(e,{headers:t={},customFetch:n,region:r=zt.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=Tr(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var n;return Cr(this,void 0,void 0,function*(){try{const{headers:r,method:i,body:a}=t;let o={},{region:l}=t;l||(l=this.region),l&&l!=="any"&&(o["x-region"]=l);let u;a&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",u=a):typeof a=="string"?(o["Content-Type"]="text/plain",u=a):typeof FormData<"u"&&a instanceof FormData?u=a:(o["Content-Type"]="application/json",u=JSON.stringify(a)));const d=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),r),body:u}).catch(y=>{throw new Pr(y)}),c=d.headers.get("x-relay-error");if(c&&c==="true")throw new Or(d);if(!d.ok)throw new jr(d);let h=((n=d.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),g;return h==="application/json"?g=yield d.json():h==="application/octet-stream"?g=yield d.blob():h==="text/event-stream"?g=d:h==="multipart/form-data"?g=yield d.formData():g=yield d.text(),{data:g,error:null}}catch(r){return{data:null,error:r}}})}}var V={},Xt={},Et={},ut={},St={},xt={},Ar=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},We=Ar();const Rr=We.fetch,Kn=We.fetch.bind(We),Wn=We.Headers,Ir=We.Request,Lr=We.Response,Ye=Object.freeze(Object.defineProperty({__proto__:null,Headers:Wn,Request:Ir,Response:Lr,default:Kn,fetch:Rr},Symbol.toStringTag,{value:"Module"})),Dr=Ds(Ye);var Tt={};Object.defineProperty(Tt,"__esModule",{value:!0});let Ur=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Tt.default=Ur;var Vn=ne&&ne.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(xt,"__esModule",{value:!0});const Mr=Vn(Dr),Br=Vn(Tt);let Nr=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Mr.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let r=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var a,o,l;let u=null,d=null,c=null,h=i.status,g=i.statusText;if(i.ok){if(this.method!=="HEAD"){const _=await i.text();_===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=_:d=JSON.parse(_))}const m=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),f=(o=i.headers.get("content-range"))===null||o===void 0?void 0:o.split("/");m&&f&&f.length>1&&(c=parseInt(f[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,c=null,h=406,g="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const m=await i.text();try{u=JSON.parse(m),Array.isArray(u)&&i.status===404&&(d=[],u=null,h=200,g="OK")}catch{i.status===404&&m===""?(h=204,g="No Content"):u={message:m}}if(u&&this.isMaybeSingle&&(!((l=u==null?void 0:u.details)===null||l===void 0)&&l.includes("0 rows"))&&(u=null,h=200,g="OK"),u&&this.shouldThrowOnError)throw new Br.default(u)}return{error:u,data:d,count:c,status:h,statusText:g}});return this.shouldThrowOnError||(r=r.catch(i=>{var a,o,l;return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(o=i==null?void 0:i.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}};xt.default=Nr;var Fr=ne&&ne.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(St,"__esModule",{value:!0});const zr=Fr(xt);let Hr=class extends zr.default{select(e){let t=!1;const n=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){const a=i?`${i}.order`:"order",o=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"offset":`${r}.offset`,a=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(a,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:a="text"}={}){var o;const l=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(o=this.headers.Accept)!==null&&o!==void 0?o:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${u}"; options=${l};`,a==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};St.default=Hr;var qr=ne&&ne.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(ut,"__esModule",{value:!0});const Jr=qr(St);let Gr=class extends Jr.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(r=>typeof r=="string"&&new RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const a=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}};ut.default=Gr;var Kr=ne&&ne.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Et,"__esModule",{value:!0});const st=Kr(ut);let Wr=class{constructor(e,{headers:t={},schema:n,fetch:r}){this.url=e,this.headers=t,this.schema=n,this.fetch=r}select(e,{head:t=!1,count:n}={}){const r=t?"HEAD":"GET";let i=!1;const a=(e??"*").split("").map(o=>/\s/.test(o)&&!i?"":(o==='"'&&(i=!i),o)).join("");return this.url.searchParams.set("select",a),n&&(this.headers.Prefer=`count=${n}`),new st.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:n=!0}={}){const r="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const a=e.reduce((o,l)=>o.concat(Object.keys(l)),[]);if(a.length>0){const o=[...new Set(a)].map(l=>`"${l}"`);this.url.searchParams.set("columns",o.join(","))}}return new st.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){const a="POST",o=[`resolution=${n?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&o.push(this.headers.Prefer),r&&o.push(`count=${r}`),i||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(e)){const l=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(l.length>0){const u=[...new Set(l)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new st.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const n="PATCH",r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),t&&r.push(`count=${t}`),this.headers.Prefer=r.join(","),new st.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new st.default({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Et.default=Wr;var Pt={},Ot={};Object.defineProperty(Ot,"__esModule",{value:!0});Ot.version=void 0;Ot.version="0.0.0-automated";Object.defineProperty(Pt,"__esModule",{value:!0});Pt.DEFAULT_HEADERS=void 0;const Vr=Ot;Pt.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Vr.version}`};var Yn=ne&&ne.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Xt,"__esModule",{value:!0});const Yr=Yn(Et),Qr=Yn(ut),Xr=Pt;let Zr=class Qn{constructor(e,{headers:t={},schema:n,fetch:r}={}){this.url=e,this.headers=Object.assign(Object.assign({},Xr.DEFAULT_HEADERS),t),this.schemaName=n,this.fetch=r}from(e){const t=new URL(`${this.url}/${e}`);return new Yr.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Qn(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:n=!1,get:r=!1,count:i}={}){let a;const o=new URL(`${this.url}/rpc/${e}`);let l;n||r?(a=n?"HEAD":"GET",Object.entries(t).filter(([d,c])=>c!==void 0).map(([d,c])=>[d,Array.isArray(c)?`{${c.join(",")}}`:`${c}`]).forEach(([d,c])=>{o.searchParams.append(d,c)})):(a="POST",l=t);const u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new Qr.default({method:a,url:o,headers:u,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};Xt.default=Zr;var Qe=ne&&ne.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(V,"__esModule",{value:!0});V.PostgrestError=V.PostgrestBuilder=V.PostgrestTransformBuilder=V.PostgrestFilterBuilder=V.PostgrestQueryBuilder=V.PostgrestClient=void 0;const Xn=Qe(Xt);V.PostgrestClient=Xn.default;const Zn=Qe(Et);V.PostgrestQueryBuilder=Zn.default;const es=Qe(ut);V.PostgrestFilterBuilder=es.default;const ts=Qe(St);V.PostgrestTransformBuilder=ts.default;const ns=Qe(xt);V.PostgrestBuilder=ns.default;const ss=Qe(Tt);V.PostgrestError=ss.default;var ei=V.default={PostgrestClient:Xn.default,PostgrestQueryBuilder:Zn.default,PostgrestFilterBuilder:es.default,PostgrestTransformBuilder:ts.default,PostgrestBuilder:ns.default,PostgrestError:ss.default};const{PostgrestClient:ti,PostgrestQueryBuilder:yo,PostgrestFilterBuilder:wo,PostgrestTransformBuilder:bo,PostgrestBuilder:_o,PostgrestError:vo}=ei,ni="2.11.2",si={"X-Client-Info":`realtime-js/${ni}`},ri="1.0.0",rs=1e4,ii=1e3;var He;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(He||(He={}));var Q;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(Q||(Q={}));var ae;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(ae||(ae={}));var Ht;(function(s){s.websocket="websocket"})(Ht||(Ht={}));var Ce;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(Ce||(Ce={}));class ai{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const r=t.getUint8(1),i=t.getUint8(2);let a=this.HEADER_LENGTH+2;const o=n.decode(e.slice(a,a+r));a=a+r;const l=n.decode(e.slice(a,a+i));a=a+i;const u=JSON.parse(n.decode(e.slice(a,e.byteLength)));return{ref:null,topic:o,event:l,payload:u}}}class is{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var O;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(O||(O={}));const bn=(s,e,t={})=>{var n;const r=(n=t.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((i,a)=>(i[a]=oi(a,s,e,r),i),{})},oi=(s,e,t,n)=>{const r=e.find(o=>o.name===s),i=r==null?void 0:r.type,a=t[s];return i&&!n.includes(i)?as(i,a):qt(a)},as=(s,e)=>{if(s.charAt(0)==="_"){const t=s.slice(1,s.length);return di(e,t)}switch(s){case O.bool:return li(e);case O.float4:case O.float8:case O.int2:case O.int4:case O.int8:case O.numeric:case O.oid:return ci(e);case O.json:case O.jsonb:return ui(e);case O.timestamp:return hi(e);case O.abstime:case O.date:case O.daterange:case O.int4range:case O.int8range:case O.money:case O.reltime:case O.text:case O.time:case O.timestamptz:case O.timetz:case O.tsrange:case O.tstzrange:return qt(e);default:return qt(e)}},qt=s=>s,li=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},ci=s=>{if(typeof s=="string"){const e=parseFloat(s);if(!Number.isNaN(e))return e}return s},ui=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch(e){return console.log(`JSON parse error: ${e}`),s}return s},di=(s,e)=>{if(typeof s!="string")return s;const t=s.length-1,n=s[t];if(s[0]==="{"&&n==="}"){let i;const a=s.slice(1,t);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(o=>as(e,o))}return s},hi=s=>typeof s=="string"?s.replace(" ","T"):s,os=s=>{let e=s;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class It{constructor(e,t,n={},r=rs){this.channel=e,this.event=t,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var _n;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(_n||(_n={}));class at{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},r=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=at.syncState(this.state,r,i,a),this.pendingDiffs.forEach(l=>{this.state=at.syncDiff(this.state,l,i,a)}),this.pendingDiffs=[],o()}),this.channel._on(n.diff,{},r=>{const{onJoin:i,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=at.syncDiff(this.state,r,i,a),o())}),this.onJoin((r,i,a)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:i,newPresences:a})}),this.onLeave((r,i,a)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,r){const i=this.cloneDeep(e),a=this.transformState(t),o={},l={};return this.map(i,(u,d)=>{a[u]||(l[u]=d)}),this.map(a,(u,d)=>{const c=i[u];if(c){const h=d.map(f=>f.presence_ref),g=c.map(f=>f.presence_ref),y=d.filter(f=>g.indexOf(f.presence_ref)<0),m=c.filter(f=>h.indexOf(f.presence_ref)<0);y.length>0&&(o[u]=y),m.length>0&&(l[u]=m)}else o[u]=d}),this.syncDiff(i,{joins:o,leaves:l},n,r)}static syncDiff(e,t,n,r){const{joins:i,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(i,(o,l)=>{var u;const d=(u=e[o])!==null&&u!==void 0?u:[];if(e[o]=this.cloneDeep(l),d.length>0){const c=e[o].map(g=>g.presence_ref),h=d.filter(g=>c.indexOf(g.presence_ref)<0);e[o].unshift(...h)}n(o,d,l)}),this.map(a,(o,l)=>{let u=e[o];if(!u)return;const d=l.map(c=>c.presence_ref);u=u.filter(c=>d.indexOf(c.presence_ref)<0),e[o]=u,r(o,u,l),u.length===0&&delete e[o]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const r=e[n];return"metas"in r?t[n]=r.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[n]=r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var vn;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(vn||(vn={}));var kn;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(kn||(kn={}));var ge;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(ge||(ge={}));class Zt{constructor(e,t={config:{}},n){this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=Q.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new It(this,ae.join,this.params,this.timeout),this.rejoinTimer=new is(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Q.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Q.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=Q.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Q.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ae.reply,{},(r,i)=>{this._trigger(this._replyEventName(i),r)}),this.presence=new at(this),this.broadcastEndpointURL=os(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var n,r;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:a,private:o}}=this.params;this._onError(d=>e==null?void 0:e(ge.CHANNEL_ERROR,d)),this._onClose(()=>e==null?void 0:e(ge.CLOSED));const l={},u={broadcast:i,presence:a,postgres_changes:(r=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(d=>d.filter))!==null&&r!==void 0?r:[],private:o};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},l)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:d})=>{var c;if(this.socket.setAuth(),d===void 0){e==null||e(ge.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,g=(c=h==null?void 0:h.length)!==null&&c!==void 0?c:0,y=[];for(let m=0;m<g;m++){const f=h[m],{filter:{event:_,schema:j,table:T,filter:C}}=f,S=d&&d[m];if(S&&S.event===_&&S.schema===j&&S.table===T&&S.filter===C)y.push(Object.assign(Object.assign({},f),{id:S.id}));else{this.unsubscribe(),e==null||e(ge.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,e&&e(ge.SUBSCRIBED);return}}).receive("error",d=>{e==null||e(ge.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ge.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this._on(e,t,n)}async send(e,t={}){var n,r;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:a}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=t.timeout)!==null&&n!==void 0?n:this.timeout);return await((r=u.body)===null||r===void 0?void 0:r.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,o,l;const u=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Q.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ae.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const r=new It(this,ae.leave,{},e);r.receive("ok",()=>{t(),n("ok")}).receive("timeout",()=>{t(),n("timed out")}).receive("error",()=>{n("error")}),r.send(),this._canPush()||r.trigger("ok",{})})}async _fetchWithTimeout(e,t,n){const r=new AbortController,i=setTimeout(()=>r.abort(),n),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(i),a}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new It(this,e,t,n);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var r,i;const a=e.toLocaleLowerCase(),{close:o,error:l,leave:u,join:d}=ae;if(n&&[o,l,u,d].indexOf(a)>=0&&n!==this._joinRef())return;let h=this._onMessage(a,t,n);if(t&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(g=>{var y,m,f;return((y=g.filter)===null||y===void 0?void 0:y.event)==="*"||((f=(m=g.filter)===null||m===void 0?void 0:m.event)===null||f===void 0?void 0:f.toLocaleLowerCase())===a}).map(g=>g.callback(h,n)):(i=this.bindings[a])===null||i===void 0||i.filter(g=>{var y,m,f,_,j,T;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in g){const C=g.id,S=(y=g.filter)===null||y===void 0?void 0:y.event;return C&&((m=t.ids)===null||m===void 0?void 0:m.includes(C))&&(S==="*"||(S==null?void 0:S.toLocaleLowerCase())===((f=t.data)===null||f===void 0?void 0:f.type.toLocaleLowerCase()))}else{const C=(j=(_=g==null?void 0:g.filter)===null||_===void 0?void 0:_.event)===null||j===void 0?void 0:j.toLocaleLowerCase();return C==="*"||C===((T=t==null?void 0:t.event)===null||T===void 0?void 0:T.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===a}).map(g=>{if(typeof h=="object"&&"ids"in h){const y=h.data,{schema:m,table:f,commit_timestamp:_,type:j,errors:T}=y;h=Object.assign(Object.assign({},{schema:m,table:f,commit_timestamp:_,eventType:j,new:{},old:{},errors:T}),this._getPayloadRecords(y))}g.callback(h,n)})}_isClosed(){return this.state===Q.closed}_isJoined(){return this.state===Q.joined}_isJoining(){return this.state===Q.joining}_isLeaving(){return this.state===Q.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const r=e.toLocaleLowerCase(),i={type:r,filter:t,callback:n};return this.bindings[r]?this.bindings[r].push(i):this.bindings[r]=[i],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(r=>{var i;return!(((i=r.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Zt.isEqual(r.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ae.close,{},e)}_onError(e){this._on(ae.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Q.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=bn(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=bn(e.columns,e.old_record)),t}}const fi=()=>{},pi=typeof WebSocket<"u",gi=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class mi{constructor(e,t){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=si,this.params={},this.timeout=rs,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=fi,this.conn=null,this.sendBuffer=[],this.serializer=new ai,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...o)=>Ke(async()=>{const{default:l}=await Promise.resolve().then(()=>Ye);return{default:l}},void 0).then(({default:l})=>l(...o)):a=fetch,(...o)=>a(...o)},this.endPoint=`${e}/${Ht.websocket}`,this.httpEndpoint=os(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const r=(n=t==null?void 0:t.params)===null||n===void 0?void 0:n.apikey;if(r&&(this.accessTokenValue=r,this.apiKey=r),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(i,a)=>a(JSON.stringify(i)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new is(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(pi){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new yi(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),Ke(async()=>{const{default:e}=await import("./browser-BDmdcz6z.js").then(t=>t.b);return{default:e}},__vite__mapDeps([0,1])).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:ri}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case He.connecting:return Ce.Connecting;case He.open:return Ce.Open;case He.closing:return Ce.Closing;default:return Ce.Closed}}isConnected(){return this.connectionState()===Ce.Open}channel(e,t={config:{}}){const n=new Zt(`realtime:${e}`,t,this);return this.channels.push(n),n}push(e){const{topic:t,event:n,payload:r,ref:i}=e,a=()=>{this.encode(e,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${t} ${n} (${i})`,r),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(t){let n=null;try{n=JSON.parse(atob(t.split(".")[1]))}catch{}if(n&&n.exp&&!(Math.floor(Date.now()/1e3)-n.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${n.exp}`);this.accessTokenValue=t,this.channels.forEach(r=>{t&&r.updateJoinPayload({access_token:t}),r.joinedOnce&&r._isJoined()&&r._push(ae.access_token,{access_token:t})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(ii,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:n,event:r,payload:i,ref:a}=t;a&&a===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${r} ${a&&"("+a+")"||""}`,i),this.channels.filter(o=>o._isMember(n)).forEach(o=>o._trigger(r,i,a)),this.stateChangeCallbacks.message.forEach(o=>o(t))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(ae.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const n=e.match(/\?/)?"&":"?",r=new URLSearchParams(t);return`${e}${n}${r}`}_workerObjectUrl(e){let t;if(e)t=e;else{const n=new Blob([gi],{type:"application/javascript"});t=URL.createObjectURL(n)}return t}}class yi{constructor(e,t,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=He.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=n.close}}class en extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function U(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}class wi extends en{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Jt extends en{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var bi=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{u(n.next(d))}catch(c){a(c)}}function l(d){try{u(n.throw(d))}catch(c){a(c)}}function u(d){d.done?i(d.value):r(d.value).then(o,l)}u((n=n.apply(s,e||[])).next())})};const ls=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>Ke(async()=>{const{default:n}=await Promise.resolve().then(()=>Ye);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},_i=()=>bi(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ke(()=>Promise.resolve().then(()=>Ye),void 0)).Response:Response}),Gt=s=>{if(Array.isArray(s))return s.map(t=>Gt(t));if(typeof s=="function"||s!==Object(s))return s;const e={};return Object.entries(s).forEach(([t,n])=>{const r=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[r]=Gt(n)}),e};var Ie=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{u(n.next(d))}catch(c){a(c)}}function l(d){try{u(n.throw(d))}catch(c){a(c)}}function u(d){d.done?i(d.value):r(d.value).then(o,l)}u((n=n.apply(s,e||[])).next())})};const Lt=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),vi=(s,e,t)=>Ie(void 0,void 0,void 0,function*(){const n=yield _i();s instanceof n&&!(t!=null&&t.noResolveJson)?s.json().then(r=>{e(new wi(Lt(r),s.status||500))}).catch(r=>{e(new Jt(Lt(r),r))}):e(new Jt(Lt(s),s))}),ki=(s,e,t,n)=>{const r={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n&&(r.body=JSON.stringify(n)),Object.assign(Object.assign({},r),t))};function dt(s,e,t,n,r,i){return Ie(this,void 0,void 0,function*(){return new Promise((a,o)=>{s(t,ki(e,n,r,i)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>vi(l,o,n))})})}function vt(s,e,t,n){return Ie(this,void 0,void 0,function*(){return dt(s,"GET",e,t,n)})}function ke(s,e,t,n,r){return Ie(this,void 0,void 0,function*(){return dt(s,"POST",e,n,r,t)})}function Ei(s,e,t,n,r){return Ie(this,void 0,void 0,function*(){return dt(s,"PUT",e,n,r,t)})}function Si(s,e,t,n){return Ie(this,void 0,void 0,function*(){return dt(s,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),n)})}function cs(s,e,t,n,r){return Ie(this,void 0,void 0,function*(){return dt(s,"DELETE",e,n,r,t)})}var K=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{u(n.next(d))}catch(c){a(c)}}function l(d){try{u(n.throw(d))}catch(c){a(c)}}function u(d){d.done?i(d.value):r(d.value).then(o,l)}u((n=n.apply(s,e||[])).next())})};const xi={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},En={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Ti{constructor(e,t={},n,r){this.url=e,this.headers=t,this.bucketId=n,this.fetch=ls(r)}uploadOrUpdate(e,t,n,r){return K(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},En),r);let o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const l=a.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",a.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=n,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType,l&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),r!=null&&r.headers&&(o=Object.assign(Object.assign({},o),r.headers));const u=this._removeEmptyFolders(t),d=this._getFinalPath(u),c=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:e,body:i,headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{})),h=yield c.json();return c.ok?{data:{path:u,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(i){if(U(i))return{data:null,error:i};throw i}})}upload(e,t,n){return K(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,r){return K(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),a=this._getFinalPath(i),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",t);try{let l;const u=Object.assign({upsert:En.upsert},r),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",u.cacheControl)):(l=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const c=yield this.fetch(o.toString(),{method:"PUT",body:l,headers:d}),h=yield c.json();return c.ok?{data:{path:i,fullPath:h.Key},error:null}:{data:null,error:h}}catch(l){if(U(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return K(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const r=Object.assign({},this.headers);t!=null&&t.upsert&&(r["x-upsert"]="true");const i=yield ke(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:r}),a=new URL(this.url+i.url),o=a.searchParams.get("token");if(!o)throw new en("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:o},error:null}}catch(n){if(U(n))return{data:null,error:n};throw n}})}update(e,t,n){return K(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return K(this,void 0,void 0,function*(){try{return{data:yield ke(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(U(r))return{data:null,error:r};throw r}})}copy(e,t,n){return K(this,void 0,void 0,function*(){try{return{data:{path:(yield ke(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(U(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,n){return K(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),i=yield ke(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(r){if(U(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,n){return K(this,void 0,void 0,function*(){try{const r=yield ke(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:r.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(r){if(U(r))return{data:null,error:r};throw r}})}download(e,t){return K(this,void 0,void 0,function*(){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),a=i?`?${i}`:"";try{const o=this._getFinalPath(e);return{data:yield(yield vt(this.fetch,`${this.url}/${r}/${o}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(U(o))return{data:null,error:o};throw o}})}info(e){return K(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const n=yield vt(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Gt(n),error:null}}catch(n){if(U(n))return{data:null,error:n};throw n}})}exists(e){return K(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield Si(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(U(n)&&n instanceof Jt){const r=n.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),r=[],i=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&r.push(i);const o=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&r.push(l);let u=r.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${u}`)}}}remove(e){return K(this,void 0,void 0,function*(){try{return{data:yield cs(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(U(t))return{data:null,error:t};throw t}})}list(e,t,n){return K(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},xi),t),{prefix:e||""});return{data:yield ke(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(U(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Pi="2.7.1",Oi={"X-Client-Info":`storage-js/${Pi}`};var Ne=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{u(n.next(d))}catch(c){a(c)}}function l(d){try{u(n.throw(d))}catch(c){a(c)}}function u(d){d.done?i(d.value):r(d.value).then(o,l)}u((n=n.apply(s,e||[])).next())})};class ji{constructor(e,t={},n){this.url=e,this.headers=Object.assign(Object.assign({},Oi),t),this.fetch=ls(n)}listBuckets(){return Ne(this,void 0,void 0,function*(){try{return{data:yield vt(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(U(e))return{data:null,error:e};throw e}})}getBucket(e){return Ne(this,void 0,void 0,function*(){try{return{data:yield vt(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(U(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Ne(this,void 0,void 0,function*(){try{return{data:yield ke(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(U(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return Ne(this,void 0,void 0,function*(){try{return{data:yield Ei(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(U(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Ne(this,void 0,void 0,function*(){try{return{data:yield ke(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(U(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Ne(this,void 0,void 0,function*(){try{return{data:yield cs(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(U(t))return{data:null,error:t};throw t}})}}class Ci extends ji{constructor(e,t={},n){super(e,t,n)}from(e){return new Ti(this.url,this.headers,e,this.fetch)}}const $i="2.47.16";let it="";typeof Deno<"u"?it="deno":typeof document<"u"?it="web":typeof navigator<"u"&&navigator.product==="ReactNative"?it="react-native":it="node";const Ai={"X-Client-Info":`supabase-js-${it}/${$i}`},Ri={headers:Ai},Ii={schema:"public"},Li={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Di={};var Ui=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{u(n.next(d))}catch(c){a(c)}}function l(d){try{u(n.throw(d))}catch(c){a(c)}}function u(d){d.done?i(d.value):r(d.value).then(o,l)}u((n=n.apply(s,e||[])).next())})};const Mi=s=>{let e;return s?e=s:typeof fetch>"u"?e=Kn:e=fetch,(...t)=>e(...t)},Bi=()=>typeof Headers>"u"?Wn:Headers,Ni=(s,e,t)=>{const n=Mi(t),r=Bi();return(i,a)=>Ui(void 0,void 0,void 0,function*(){var o;const l=(o=yield e())!==null&&o!==void 0?o:s;let u=new r(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",s),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),n(i,Object.assign(Object.assign({},a),{headers:u}))})};var Fi=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{u(n.next(d))}catch(c){a(c)}}function l(d){try{u(n.throw(d))}catch(c){a(c)}}function u(d){d.done?i(d.value):r(d.value).then(o,l)}u((n=n.apply(s,e||[])).next())})};function zi(s){return s.replace(/\/$/,"")}function Hi(s,e){const{db:t,auth:n,realtime:r,global:i}=s,{db:a,auth:o,realtime:l,global:u}=e,d={db:Object.assign(Object.assign({},a),t),auth:Object.assign(Object.assign({},o),n),realtime:Object.assign(Object.assign({},l),r),global:Object.assign(Object.assign({},u),i),accessToken:()=>Fi(this,void 0,void 0,function*(){return""})};return s.accessToken?d.accessToken=s.accessToken:delete d.accessToken,d}const us="2.67.3",qi="http://localhost:9999",Ji="supabase.auth.token",Gi={"X-Client-Info":`gotrue-js/${us}`},Sn=10,Kt="X-Supabase-Api-Version",ds={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function Ki(s){return Math.round(Date.now()/1e3)+s}function Wi(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){const e=Math.random()*16|0;return(s=="x"?e:e&3|8).toString(16)})}const ce=()=>typeof window<"u"&&typeof document<"u",Oe={tested:!1,writable:!1},ot=()=>{if(!ce())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Oe.tested)return Oe.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),Oe.tested=!0,Oe.writable=!0}catch{Oe.tested=!0,Oe.writable=!1}return Oe.writable};function Vi(s){const e={},t=new URL(s);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((r,i)=>{e[i]=r})}catch{}return t.searchParams.forEach((n,r)=>{e[r]=n}),e}const hs=s=>{let e;return s?e=s:typeof fetch>"u"?e=(...t)=>Ke(async()=>{const{default:n}=await Promise.resolve().then(()=>Ye);return{default:n}},void 0).then(({default:n})=>n(...t)):e=fetch,(...t)=>e(...t)},Yi=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",fs=async(s,e,t)=>{await s.setItem(e,JSON.stringify(t))},yt=async(s,e)=>{const t=await s.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},wt=async(s,e)=>{await s.removeItem(e)};function Qi(s){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",n,r,i,a,o,l,u,d=0;for(s=s.replace("-","+").replace("_","/");d<s.length;)a=e.indexOf(s.charAt(d++)),o=e.indexOf(s.charAt(d++)),l=e.indexOf(s.charAt(d++)),u=e.indexOf(s.charAt(d++)),n=a<<2|o>>4,r=(o&15)<<4|l>>2,i=(l&3)<<6|u,t=t+String.fromCharCode(n),l!=64&&r!=0&&(t=t+String.fromCharCode(r)),u!=64&&i!=0&&(t=t+String.fromCharCode(i));return t}class jt{constructor(){this.promise=new jt.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}jt.promiseConstructor=Promise;function xn(s){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=s.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const n=t[1];return JSON.parse(Qi(n))}async function Xi(s){return await new Promise(e=>{setTimeout(()=>e(null),s)})}function Zi(s,e){return new Promise((n,r)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await s(i);if(!e(i,null,a)){n(a);return}}catch(a){if(!e(i,a)){r(a);return}}})()})}function ea(s){return("0"+s.toString(16)).substr(-2)}function ta(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=t.length;let r="";for(let i=0;i<56;i++)r+=t.charAt(Math.floor(Math.random()*n));return r}return crypto.getRandomValues(e),Array.from(e,ea).join("")}async function na(s){const t=new TextEncoder().encode(s),n=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(n);return Array.from(r).map(i=>String.fromCharCode(i)).join("")}function sa(s){return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ra(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const t=await na(s);return sa(t)}async function Fe(s,e,t=!1){const n=ta();let r=n;t&&(r+="/PASSWORD_RECOVERY"),await fs(s,`${e}-code-verifier`,r);const i=await ra(n);return[i,n===i?"plain":"s256"]}const ia=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function aa(s){const e=s.headers.get(Kt);if(!e||!e.match(ia))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class tn extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function b(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class oa extends tn{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}function la(s){return b(s)&&s.name==="AuthApiError"}class ps extends tn{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Le extends tn{constructor(e,t,n,r){super(e,n,r),this.name=t,this.status=n}}class _e extends Le{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function ca(s){return b(s)&&s.name==="AuthSessionMissingError"}class Dt extends Le{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class bt extends Le{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class _t extends Le{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function ua(s){return b(s)&&s.name==="AuthImplicitGrantRedirectError"}class Tn extends Le{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Wt extends Le{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Ut(s){return b(s)&&s.name==="AuthRetryableFetchError"}class Pn extends Le{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}var da=function(s,e){var t={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&e.indexOf(n)<0&&(t[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(s);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(s,n[r])&&(t[n[r]]=s[n[r]]);return t};const je=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),ha=[502,503,504];async function On(s){var e;if(!Yi(s))throw new Wt(je(s),0);if(ha.includes(s.status))throw new Wt(je(s),s.status);let t;try{t=await s.json()}catch(i){throw new ps(je(i),i)}let n;const r=aa(s);if(r&&r.getTime()>=ds["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?n=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(n=t.error_code),n){if(n==="weak_password")throw new Pn(je(t),s.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new _e}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new Pn(je(t),s.status,t.weak_password.reasons);throw new oa(je(t),s.status||500,n)}const fa=(s,e,t,n)=>{const r={method:s,headers:(e==null?void 0:e.headers)||{}};return s==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(n),Object.assign(Object.assign({},r),t))};async function E(s,e,t,n){var r;const i=Object.assign({},n==null?void 0:n.headers);i[Kt]||(i[Kt]=ds["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const a=(r=n==null?void 0:n.query)!==null&&r!==void 0?r:{};n!=null&&n.redirectTo&&(a.redirect_to=n.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await pa(s,e,t+o,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function pa(s,e,t,n,r,i){const a=fa(e,n,r,i);let o;try{o=await s(t,Object.assign({},a))}catch(l){throw console.error(l),new Wt(je(l),0)}if(o.ok||await On(o),n!=null&&n.noResolveJson)return o;try{return await o.json()}catch(l){await On(l)}}function ve(s){var e;let t=null;wa(s)&&(t=Object.assign({},s),s.expires_at||(t.expires_at=Ki(s.expires_in)));const n=(e=s.user)!==null&&e!==void 0?e:s;return{data:{session:t,user:n},error:null}}function jn(s){const e=ve(s);return!e.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((t,n)=>t&&typeof n=="string",!0)&&(e.data.weak_password=s.weak_password),e}function Ee(s){var e;return{data:{user:(e=s.user)!==null&&e!==void 0?e:s},error:null}}function ga(s){return{data:s,error:null}}function ma(s){const{action_link:e,email_otp:t,hashed_token:n,redirect_to:r,verification_type:i}=s,a=da(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:t,hashed_token:n,redirect_to:r,verification_type:i},l=Object.assign({},a);return{data:{properties:o,user:l},error:null}}function ya(s){return s}function wa(s){return s.access_token&&s.refresh_token&&s.expires_in}var ba=function(s,e){var t={};for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&e.indexOf(n)<0&&(t[n]=s[n]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(s);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(s,n[r])&&(t[n[r]]=s[n[r]]);return t};class _a{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=hs(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await E(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(b(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await E(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Ee})}catch(n){if(b(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=ba(e,["options"]),r=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(r.new_email=n==null?void 0:n.newEmail,delete r.newEmail),await E(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:ma,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(b(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await E(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ee})}catch(t){if(b(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,r,i,a,o,l;try{const u={nextPage:null,lastPage:0,total:0},d=await E(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(i=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:""},xform:ya});if(d.error)throw d.error;const c=await d.json(),h=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,g=(l=(o=d.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(y=>{const m=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),f=JSON.parse(y.split(";")[1].split("=")[1]);u[`${f}Page`]=m}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},c),u),error:null}}catch(u){if(b(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){try{return await E(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ee})}catch(t){if(b(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await E(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Ee})}catch(n){if(b(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){try{return await E(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Ee})}catch(n){if(b(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){try{const{data:t,error:n}=await E(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:t,error:n}}catch(t){if(b(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await E(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(b(t))return{data:null,error:t};throw t}}}const va={getItem:s=>ot()?globalThis.localStorage.getItem(s):null,setItem:(s,e)=>{ot()&&globalThis.localStorage.setItem(s,e)},removeItem:s=>{ot()&&globalThis.localStorage.removeItem(s)}};function Cn(s={}){return{getItem:e=>s[e]||null,setItem:(e,t)=>{s[e]=t},removeItem:e=>{delete s[e]}}}function ka(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const ze={debug:!!(globalThis&&ot()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class gs extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Ea extends gs{}async function Sa(s,e,t){ze.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),ze.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(s,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async r=>{if(r){ze.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,r.name);try{return await t()}finally{ze.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,r.name)}}else{if(e===0)throw ze.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new Ea(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(ze.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}ka();const xa={url:qi,storageKey:Ji,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Gi,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},rt=30*1e3,$n=3;async function An(s,e,t){return await t()}class lt{constructor(e){var t,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=lt.nextInstanceID,lt.nextInstanceID+=1,this.instanceID>0&&ce()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},xa),e);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new _a({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=hs(r.fetch),this.lock=r.lock||An,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:ce()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=Sa:this.lock=An,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?r.storage?this.storage=r.storage:ot()?this.storage=va:(this.memoryStorage={},this.storage=Cn(this.memoryStorage)):(this.memoryStorage={},this.storage=Cn(this.memoryStorage)),ce()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${us}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=Vi(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),ce()&&this.detectSessionInUrl&&n!=="none"){const{data:r,error:i}=await this._getSessionFromURL(t,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),ua(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:o}=r;return this._debug("#_initialize()","detected session in URL",a,"redirect type",o),await this._saveSession(a),setTimeout(async()=>{o==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return b(t)?{error:t}:{error:new ps("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,r;try{const i=await E(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:ve}),{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(b(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,n,r;try{let i;if("email"in e){const{email:d,password:c,options:h}=e;let g=null,y=null;this.flowType==="pkce"&&([g,y]=await Fe(this.storage,this.storageKey)),i=await E(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:c,data:(t=h==null?void 0:h.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:g,code_challenge_method:y},xform:ve})}else if("phone"in e){const{phone:d,password:c,options:h}=e;i=await E(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:c,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(r=h==null?void 0:h.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:ve})}else throw new bt("You must provide either an email or phone number and a password");const{data:a,error:o}=i;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(b(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:i,password:a,options:o}=e;t=await E(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:jn})}else if("phone"in e){const{phone:i,password:a,options:o}=e;t=await E(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:jn})}else throw new bt("You must provide either an email or phone number and a password");const{data:n,error:r}=t;return r?{data:{user:null,session:null},error:r}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Dt}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r})}catch(t){if(b(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,r,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await yt(this.storage,`${this.storageKey}-code-verifier`),[n,r]=(t??"").split("/");try{const{data:i,error:a}=await E(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:ve});if(await wt(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Dt}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:r??null}),error:a})}catch(i){if(b(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:n,token:r,access_token:i,nonce:a}=e,o=await E(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:r,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:ve}),{data:l,error:u}=o;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Dt}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(t){if(b(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,r,i,a;try{if("email"in e){const{email:o,options:l}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Fe(this.storage,this.storageKey));const{error:c}=await E(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:c}}if("phone"in e){const{phone:o,options:l}=e,{data:u,error:d}=await E(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new bt("You must provide either an email or phone number.")}catch(o){if(b(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var t,n;try{let r,i;"options"in e&&(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:a,error:o}=await E(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:r,xform:ve});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,u=a.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(r){if(b(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,n,r;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await Fe(this.storage,this.storageKey)),await E(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&n!==void 0?n:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:ga})}catch(i){if(b(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new _e;const{error:r}=await E(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(b(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:r,options:i}=e,{error:a}=await E(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:n,type:r,options:i}=e,{data:a,error:o}=await E(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o}}throw new bt("You must provide either an email or phone number and a type")}catch(t){if(b(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await n,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=t();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await yt(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.storage.isServer){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,u,d)=>(!a&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,d))})}return{data:{session:e},error:null}}const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await E(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ee}):await this._useSession(async t=>{var n,r,i;const{data:a,error:o}=t;if(o)throw o;return!(!((n=a.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new _e}:await E(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0,xform:Ee})})}catch(t){if(b(t))return ca(t)&&(await this._removeSession(),await wt(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{const{data:r,error:i}=n;if(i)throw i;if(!r.session)throw new _e;const a=r.session;let o=null,l=null;this.flowType==="pkce"&&e.email!=null&&([o,l]=await Fe(this.storage,this.storageKey));const{data:u,error:d}=await E(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:l}),jwt:a.access_token,xform:Ee});if(d)throw d;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(n){if(b(n))return{data:{user:null},error:n};throw n}}_decodeJWT(e){return xn(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new _e;const t=Date.now()/1e3;let n=t,r=!0,i=null;const a=xn(e.access_token);if(a.exp&&(n=a.exp,r=n<=t),r){const{session:o,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!o)return{data:{user:null,session:null},error:null};i=o}else{const{data:o,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(b(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:a,error:o}=t;if(o)throw o;e=(n=a.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new _e;const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(b(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!ce())throw new _t("No browser detected.");if(e.error||e.error_description||e.error_code)throw new _t(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Tn("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new _t("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Tn("No code detected.");const{data:j,error:T}=await this._exchangeCodeForSession(e.code);if(T)throw T;const C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:j.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:i,refresh_token:a,expires_in:o,expires_at:l,token_type:u}=e;if(!i||!o||!a||!u)throw new _t("No session defined in URL");const d=Math.round(Date.now()/1e3),c=parseInt(o);let h=d+c;l&&(h=parseInt(l));const g=h-d;g*1e3<=rt&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${c}s`);const y=h-c;d-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,h,d):d-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,h,d);const{data:m,error:f}=await this._getUser(i);if(f)throw f;const _={provider_token:n,provider_refresh_token:r,access_token:i,expires_in:c,expires_at:h,refresh_token:a,token_type:u,user:m.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:_,redirectType:e.type},error:null}}catch(n){if(b(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await yt(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:r,error:i}=t;if(i)return{error:i};const a=(n=r.session)===null||n===void 0?void 0:n.access_token;if(a){const{error:o}=await this.admin.signOut(a,e);if(o&&!(la(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return e!=="others"&&(await this._removeSession(),await wt(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=Wi(),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,r;try{const{data:{session:i},error:a}=t;if(a)throw a;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let n=null,r=null;this.flowType==="pkce"&&([n,r]=await Fe(this.storage,this.storageKey,!0));try{return await E(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(b(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(b(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:r}=await this._useSession(async i=>{var a,o,l,u,d;const{data:c,error:h}=i;if(h)throw h;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await E(this.fetch,"GET",g,{headers:this.headers,jwt:(d=(u=c.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(r)throw r;return ce()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(b(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,r;const{data:i,error:a}=t;if(a)throw a;return await E(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&r!==void 0?r:void 0})})}catch(t){if(b(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return await Zi(async r=>(r>0&&await Xi(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await E(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ve})),(r,i)=>{const a=200*Math.pow(2,r);return i&&Ut(i)&&Date.now()+a-n<rt})}catch(n){if(this._debug(t,"error",n),b(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),ce()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const n=await yt(this.storage,this.storageKey);if(this._debug(t,"session from storage",n),!this._isValidSession(n)){this._debug(t,"session is not valid"),n!==null&&await this._removeSession();return}const r=Math.round(Date.now()/1e3),i=((e=n.expires_at)!==null&&e!==void 0?e:1/0)<r+Sn;if(this._debug(t,`session has${i?"":" not"} expired with margin of ${Sn}s`),i){if(this.autoRefreshToken&&n.refresh_token){const{error:a}=await this._callRefreshToken(n.refresh_token);a&&(console.error(a),Ut(a)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(t,"error",n),console.error(n);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new _e;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new jt;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new _e;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={session:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(this._debug(r,"error",i),b(i)){const a={session:null,error:i};return Ut(i)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(a),a}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t,n=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,t)}catch(l){i.push(l)}});if(await Promise.all(a),i.length>0){for(let o=0;o<i.length;o+=1)console.error(i[o]);throw i[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await fs(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await wt(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ce()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),rt);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((n.expires_at*1e3-e)/rt);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${rt}ms, refresh threshold is ${$n} ticks`),r<=$n&&await this._callRefreshToken(n.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof gs)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ce()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const r=[`provider=${encodeURIComponent(t)}`];if(n!=null&&n.redirectTo&&r.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&r.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,a]=await Fe(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});r.push(o.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);r.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&r.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:r,error:i}=t;return i?{data:null,error:i}:await E(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(b(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,r;const{data:i,error:a}=t;if(a)return{data:null,error:a};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:u}=await E(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((r=l==null?void 0:l.totp)===null||r===void 0)&&r.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(b(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:i}=t;if(i)return{data:null,error:i};const{data:a,error:o}=await E(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:o})})}catch(t){if(b(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:r,error:i}=t;return i?{data:null,error:i}:await E(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(b(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(e==null?void 0:e.factors)||[],r=n.filter(a=>a.factor_type==="totp"&&a.status==="verified"),i=n.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:n,totp:r,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:r},error:i}=e;if(i)return{data:null,error:i};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const a=this._decodeJWT(r.access_token);let o=null;a.aal&&(o=a.aal);let l=o;((n=(t=r.user.factors)===null||t===void 0?void 0:t.filter(c=>c.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const d=a.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:d},error:null}}))}}lt.nextInstanceID=0;const Ta=lt;class Pa extends Ta{constructor(e){super(e)}}var Oa=function(s,e,t,n){function r(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function o(d){try{u(n.next(d))}catch(c){a(c)}}function l(d){try{u(n.throw(d))}catch(c){a(c)}}function u(d){d.done?i(d.value):r(d.value).then(o,l)}u((n=n.apply(s,e||[])).next())})};class ja{constructor(e,t,n){var r,i,a;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const o=zi(e);this.realtimeUrl=`${o}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${o}/auth/v1`,this.storageUrl=`${o}/storage/v1`,this.functionsUrl=`${o}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,u={db:Ii,realtime:Di,auth:Object.assign(Object.assign({},Li),{storageKey:l}),global:Ri},d=Hi(n??{},u);this.storageKey=(r=d.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(c,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=d.auth)!==null&&a!==void 0?a:{},this.headers,d.global.fetch),this.fetch=Ni(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new ti(`${o}/rest/v1`,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new $r(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Ci(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Oa(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(t=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,storageKey:i,flowType:a,lock:o,debug:l},u,d){const c={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Pa({url:this.authUrl,headers:Object.assign(Object.assign({},c),u),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,flowType:a,lock:o,debug:l,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new mi(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,n)=>{this._handleTokenChanged(t,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Ca=(s,e,t)=>new ja(s,e,t),$a="https://rhibyqyxpkcouaxhicgr.supabase.co",Aa="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJoaWJ5cXl4cGtjb3VheGhpY2dyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzY3NjQwMDAsImV4cCI6MjA1MjM0MDAwMH0.La6DhxuaSSOoEvwiTHh6AL0geOJliwPzg3l7dw9ZBME",ko=Ca($a,Aa,{});class Eo{constructor(e,t,n){gt(this,"message");gt(this,"statusCode");gt(this,"code");this.message=e,this.statusCode=t,this.code=n}}/*! Capacitor: https://capacitorjs.com/ - MIT License */var Ve;(function(s){s.Unimplemented="UNIMPLEMENTED",s.Unavailable="UNAVAILABLE"})(Ve||(Ve={}));class Mt extends Error{constructor(e,t,n){super(e),this.message=e,this.code=t,this.data=n}}const Ra=s=>{var e,t;return s!=null&&s.androidBridge?"android":!((t=(e=s==null?void 0:s.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},Ia=s=>{const e=s.CapacitorCustomPlatform||null,t=s.Capacitor||{},n=t.Plugins=t.Plugins||{},r=()=>e!==null?e.name:Ra(s),i=()=>r()!=="web",a=c=>{const h=u.get(c);return!!(h!=null&&h.platforms.has(r())||o(c))},o=c=>{var h;return(h=t.PluginHeaders)===null||h===void 0?void 0:h.find(g=>g.name===c)},l=c=>s.console.error(c),u=new Map,d=(c,h={})=>{const g=u.get(c);if(g)return console.warn(`Capacitor plugin "${c}" already registered. Cannot register plugins twice.`),g.proxy;const y=r(),m=o(c);let f;const _=async()=>(!f&&y in h?f=typeof h[y]=="function"?f=await h[y]():f=h[y]:e!==null&&!f&&"web"in h&&(f=typeof h.web=="function"?f=await h.web():f=h.web),f),j=(v,A)=>{var z,L;if(m){const H=m==null?void 0:m.methods.find(M=>A===M.name);if(H)return H.rtype==="promise"?M=>t.nativePromise(c,A.toString(),M):(M,me)=>t.nativeCallback(c,A.toString(),M,me);if(v)return(z=v[A])===null||z===void 0?void 0:z.bind(v)}else{if(v)return(L=v[A])===null||L===void 0?void 0:L.bind(v);throw new Mt(`"${c}" plugin is not implemented on ${y}`,Ve.Unimplemented)}},T=v=>{let A;const z=(...L)=>{const H=_().then(M=>{const me=j(M,v);if(me){const q=me(...L);return A=q==null?void 0:q.remove,q}else throw new Mt(`"${c}.${v}()" is not implemented on ${y}`,Ve.Unimplemented)});return v==="addListener"&&(H.remove=async()=>A()),H};return z.toString=()=>`${v.toString()}() { [capacitor code] }`,Object.defineProperty(z,"name",{value:v,writable:!1,configurable:!1}),z},C=T("addListener"),S=T("removeListener"),G=(v,A)=>{const z=C({eventName:v},A),L=async()=>{const M=await z;S({eventName:v,callbackId:M},A)},H=new Promise(M=>z.then(()=>M({remove:L})));return H.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await L()},H},oe=new Proxy({},{get(v,A){switch(A){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return m?G:C;case"removeListener":return S;default:return T(A)}}});return n[c]=oe,u.set(c,{name:c,proxy:oe,platforms:new Set([...Object.keys(h),...m?[y]:[]])}),oe};return t.convertFileSrc||(t.convertFileSrc=c=>c),t.getPlatform=r,t.handleError=l,t.isNativePlatform=i,t.isPluginAvailable=a,t.registerPlugin=d,t.Exception=Mt,t.DEBUG=!!t.DEBUG,t.isLoggingEnabled=!!t.isLoggingEnabled,t},La=s=>s.Capacitor=Ia(s),Vt=La(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),ms=Vt.registerPlugin;class ys{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let n=!1;this.listeners[e]||(this.listeners[e]=[],n=!0),this.listeners[e].push(t);const i=this.windowListeners[e];i&&!i.registered&&this.addWindowListener(i),n&&this.sendRetainedArgumentsForEvent(e);const a=async()=>this.removeListener(e,t);return Promise.resolve({remove:a})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,n){const r=this.listeners[e];if(!r){if(n){let i=this.retainedEventArguments[e];i||(i=[]),i.push(t),this.retainedEventArguments[e]=i}return}r.forEach(i=>i(t))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:n=>{this.notifyListeners(t,n)}}}unimplemented(e="not implemented"){return new Vt.Exception(e,Ve.Unimplemented)}unavailable(e="not available"){return new Vt.Exception(e,Ve.Unavailable)}async removeListener(e,t){const n=this.listeners[e];if(!n)return;const r=n.indexOf(t);this.listeners[e].splice(r,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(n=>{this.notifyListeners(e,n)}))}}const Rn=s=>encodeURIComponent(s).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),In=s=>s.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class Da extends ys{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(n=>{if(n.length<=0)return;let[r,i]=n.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");r=In(r).trim(),i=In(i).trim(),t[r]=i}),t}async setCookie(e){try{const t=Rn(e.key),n=Rn(e.value),r=`; expires=${(e.expires||"").replace("expires=","")}`,i=(e.path||"/").replace("path=",""),a=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${n||""}${r}; path=${i}; ${a};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}ms("CapacitorCookies",{web:()=>new Da});const Ua=async s=>new Promise((e,t)=>{const n=new FileReader;n.onload=()=>{const r=n.result;e(r.indexOf(",")>=0?r.split(",")[1]:r)},n.onerror=r=>t(r),n.readAsDataURL(s)}),Ma=(s={})=>{const e=Object.keys(s);return Object.keys(s).map(r=>r.toLocaleLowerCase()).reduce((r,i,a)=>(r[i]=s[e[a]],r),{})},Ba=(s,e=!0)=>s?Object.entries(s).reduce((n,r)=>{const[i,a]=r;let o,l;return Array.isArray(a)?(l="",a.forEach(u=>{o=e?encodeURIComponent(u):u,l+=`${i}=${o}&`}),l.slice(0,-1)):(o=e?encodeURIComponent(a):a,l=`${i}=${o}`),`${n}&${l}`},"").substr(1):null,Na=(s,e={})=>{const t=Object.assign({method:s.method||"GET",headers:s.headers},e),r=Ma(s.headers)["content-type"]||"";if(typeof s.data=="string")t.body=s.data;else if(r.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[a,o]of Object.entries(s.data||{}))i.set(a,o);t.body=i.toString()}else if(r.includes("multipart/form-data")||s.data instanceof FormData){const i=new FormData;if(s.data instanceof FormData)s.data.forEach((o,l)=>{i.append(l,o)});else for(const o of Object.keys(s.data))i.append(o,s.data[o]);t.body=i;const a=new Headers(t.headers);a.delete("content-type"),t.headers=a}else(r.includes("application/json")||typeof s.data=="object")&&(t.body=JSON.stringify(s.data));return t};class Fa extends ys{async request(e){const t=Na(e,e.webFetchExtra),n=Ba(e.params,e.shouldEncodeUrlParams),r=n?`${e.url}?${n}`:e.url,i=await fetch(r,t),a=i.headers.get("content-type")||"";let{responseType:o="text"}=i.ok?e:{};a.includes("application/json")&&(o="json");let l,u;switch(o){case"arraybuffer":case"blob":u=await i.blob(),l=await Ua(u);break;case"json":l=await i.json();break;case"document":case"text":default:l=await i.text()}const d={};return i.headers.forEach((c,h)=>{d[h]=c}),{data:l,headers:d,status:i.status,url:i.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}ms("CapacitorHttp",{web:()=>new Fa});export{to as A,oo as B,Ks as C,io as D,Gs as E,Eo as F,Qs as G,ao as M,lo as Q,Ys as R,zn as S,uo as T,ys as W,Ke as _,Za as a,Ka as b,so as c,no as d,ro as e,zs as f,Wa as g,Ms as h,Bt as i,ko as j,ms as k,Ga as l,Xa as m,Vs as n,qn as o,Yt as p,qs as q,Ya as r,Ns as s,co as t,Qa as u,eo as v,Ja as w,kt as x,Us as y,Va as z};
