import{r as m,t as l,n as r,N as u}from"./chunk-SYFQ2XB5-BFxPMBKg.js";import{k as i}from"./supabase-4kc8f4RQ.js";import{P as x}from"./useAttachBackBtn-CVzedvxQ.js";import{u as b}from"./AuthContext-DZx1nRom.js";function E({children:n}){const{isChecking:c,setIsChecking:f,user:p,setUser:a}=b();m.useEffect(()=>{(async()=>{var s;const{data:e}=await i.auth.getSession(),t=(s=e==null?void 0:e.session)==null?void 0:s.user;a(t||null),f(!1)})();const{data:h}=i.auth.onAuthStateChange((e,t)=>{const s=t==null?void 0:t.user;a(s||null)});return()=>h.subscription.unsubscribe()},[]);const{pathname:g}=l(),o=g==="/login";return c?r.jsx(x,{}):p?o?r.jsx(u,{to:"/",replace:!0}):n:o?n:r.jsx(u,{to:"/login",replace:!0})}export{E as A};
