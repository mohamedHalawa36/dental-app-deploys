import{p as s,r as f,y as v,w as b}from"./chunk-PVWAREVJ-BUjujdbQ.js";import{u as h}from"./Input-DpTjAwei.js";import{c as w,a as l,F as j,d as y,I as m}from"./index.esm-BVSsHdqe.js";import{i as d,m as t,u as N,t as c,W as E}from"./QueryClientProvider-BCBcHSdt.js";import{b as C}from"./auth-Cl8YoNcu.js";import{B as F}from"./Button-2iwES88b.js";function S({children:r}){return s.jsx("span",{className:"border-s-4 border-s-secondary bg-secondary/10 px-2 py-3 text-center text-sm font-semibold text-secondary max-sm:text-xs",children:r})}const{invalidEmail:I}=t.error.auth,M=w({email:l().email(I).required(d),password:l().min(6,"يجب أن لا تقل كلمة السر عن 6 حروف").required(d)}),{login:P}=t.error.auth;function q(){const[r,o]=f.useState(null),{setAuthData:u}=N(),x=v(),{mutate:p,isPending:a}=h({mutationFn:C,onMutate:()=>o(null),onSuccess:async e=>{u(()=>({user:{...e.user,...e.userProfile},session:e.session})),x("/")},onError:e=>{const{code:i,statusCode:n}=e;if(n===400&&i==="invalid_credentials"||n===406&&i==="PGRST116"){const{invalidCredentials:g}=t.error.auth;o(g)}else c.dismiss(E),c.error(P)}});return s.jsx(j,{initialValues:{email:"",password:""},validationSchema:M,onSubmit:e=>p(e),children:s.jsx(y,{className:"flex-1",children:s.jsxs("div",{className:"flex flex-1 flex-col gap-3 overflow-auto px-7 max-sm:px-5",children:[s.jsx(m,{className:"[&>div]:border-primary/50 [&>div]:transition",name:"email",label:"البريد الإلكتروني",disabled:a,autoComplete:"on",autoFocus:!0}),s.jsx(m,{className:"[&>div]:border-primary/50 [&>div]:transition",name:"password",label:"كلمة السر",disabled:a,type:"password",autoComplete:"on"}),r&&s.jsx(S,{children:r}),s.jsx(F,{variant:"primary",className:"w-full",disabled:a,type:"submit",children:"تسجيل الدخول"})]})})})}const D=b(function(){return s.jsx("div",{className:"flex h-full w-full items-center justify-center bg-[linear-gradient(45deg,rgb(var(--secondary)),rgb(var(--primary)))]",children:s.jsxs("div",{className:"flex max-h-[90%] w-[27rem] flex-col gap-5 overflow-hidden rounded-[50px] bg-white pb-8 pt-3 max-sm:max-w-[90%] max-sm:rounded-3xl max-sm:pb-5",children:[s.jsx("img",{src:"/images/full-logo.webp",alt:"logo",className:"mx-auto w-48 object-contain max-sm:w-40"}),s.jsx(q,{})]})})});export{D as default};
