var N=t=>{throw TypeError(t)};var H=(t,e,s)=>e.has(t)||N("Cannot "+s);var a=(t,e,s)=>(H(t,e,"read from private field"),s?s.call(t):e.get(t)),h=(t,e,s)=>e.has(t)?N("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),d=(t,e,s,i)=>(H(t,e,"write to private field"),i?i.call(t,s):e.set(t,s),s);var A=(t,e,s,i)=>({set _(r){d(t,e,r,s)},get _(){return a(t,e,i)}});import{p as n,r as Q,q as se,t as O,w as ie,v as ae,M as ne,L as re,S as oe,x as ce,O as de,i as he}from"./chunk-PVWAREVJ-BUjujdbQ.js";import{M as le,Q as ue}from"./query-CmYIeNDQ.js";import{c as pe,u as fe,t as L,m as S,A as _e,S as Y,M as ge,n as l,a as I,b as _,h as Z,d as B,f as me,o as K,r as X,e as xe,g as z,p as G,s as ve,Q as ye,T as Pe}from"./QueryClientProvider-BCBcHSdt.js";import{g as we,a as be,l as Me}from"./auth-Cl8YoNcu.js";import{P as Oe}from"./PageLoader-CdiJtOqw.js";import{i as U}from"./infiniteQueryBehavior-BY3zC02m.js";const Qe="/assets/app-C0M-VOGk.css",je=[{rel:"apple-touch-startup-image",href:"splash_screens/iPhone_16_Pro_Max_landscape.png",media:"screen and (device-width: 440px) and (device-height: 956px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"},{rel:"apple-touch-startup-image",href:"splash_screens/iPhone_16_Pro_landscape.png",media:"screen and (device-width: 402px) and (device-height: 874px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"},{rel:"apple-touch-startup-image",href:"splash_screens/iPhone_16_Plus__iPhone_15_Pro_Max__iPhone_15_Plus__iPhone_14_Pro_Max_landscape.png",media:"screen and (device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"},{rel:"apple-touch-startup-image",href:"splash_screens/iPhone_16__iPhone_15_Pro__iPhone_15__iPhone_14_Pro_landscape.png",media:"screen and (device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"},{rel:"apple-touch-startup-image",href:"splash_screens/iPhone_14_Plus__iPhone_13_Pro_Max__iPhone_12_Pro_Max_landscape.png",media:"screen and (device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"},{rel:"apple-touch-startup-image",href:"splash_screens/iPhone_16e__iPhone_14__iPhone_13_Pro__iPhone_13__iPhone_12_Pro__iPhone_12_landscape.png",media:"screen and (device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"},{rel:"apple-touch-startup-image",href:"splash_screens/iPhone_13_mini__iPhone_12_mini__iPhone_11_Pro__iPhone_XS__iPhone_X_landscape.png",media:"screen and (device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"},{rel:"apple-touch-startup-image",href:"splash_screens/iPhone_11_Pro_Max__iPhone_XS_Max_landscape.png",media:"screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"},{rel:"apple-touch-startup-image",href:"splash_screens/iPhone_11__iPhone_XR_landscape.png",media:"screen and (device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"},{rel:"apple-touch-startup-image",href:"splash_screens/iPhone_8_Plus__iPhone_7_Plus__iPhone_6s_Plus__iPhone_6_Plus_landscape.png",media:"screen and (device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"},{rel:"apple-touch-startup-image",href:"splash_screens/iPhone_8__iPhone_7__iPhone_6s__iPhone_6__4.7__iPhone_SE_landscape.png",media:"screen and (device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"},{rel:"apple-touch-startup-image",href:"splash_screens/4__iPhone_SE__iPod_touch_5th_generation_and_later_landscape.png",media:"screen and (device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"},{rel:"apple-touch-startup-image",href:"splash_screens/13__iPad_Pro_M4_landscape.png",media:"screen and (device-width: 1032px) and (device-height: 1376px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"},{rel:"apple-touch-startup-image",href:"splash_screens/12.9__iPad_Pro_landscape.png",media:"screen and (device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"},{rel:"apple-touch-startup-image",href:"splash_screens/11__iPad_Pro_M4_landscape.png",media:"screen and (device-width: 834px) and (device-height: 1210px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"},{rel:"apple-touch-startup-image",href:"splash_screens/11__iPad_Pro__10.5__iPad_Pro_landscape.png",media:"screen and (device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"},{rel:"apple-touch-startup-image",href:"splash_screens/10.9__iPad_Air_landscape.png",media:"screen and (device-width: 820px) and (device-height: 1180px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"},{rel:"apple-touch-startup-image",href:"splash_screens/10.5__iPad_Air_landscape.png",media:"screen and (device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"},{rel:"apple-touch-startup-image",href:"splash_screens/10.2__iPad_landscape.png",media:"screen and (device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"},{rel:"apple-touch-startup-image",href:"splash_screens/9.7__iPad_Pro__7.9__iPad_mini__9.7__iPad_Air__9.7__iPad_landscape.png",media:"screen and (device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"},{rel:"apple-touch-startup-image",href:"splash_screens/8.3__iPad_Mini_landscape.png",media:"screen and (device-width: 744px) and (device-height: 1133px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"}];function ke({className:t}){return n.jsx("svg",{version:"1.1",id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",width:"27px",height:"27px",viewBox:"0 0 862.899 862.9",className:pe("fill-black",t),children:n.jsx("g",{children:n.jsxs("g",{children:[n.jsx("circle",{cx:"385.6",cy:"656.1",r:"79.8"}),n.jsx("path",{d:`M561.7,401c-15.801-10.3-32.601-19.2-50.2-26.6c-39.9-16.9-82.3-25.5-126-25.5c-44.601,0-87.9,8.9-128.6,26.6
			c-39.3,17-74.3,41.3-104.1,72.2L253.5,545c34.899-36.1,81.8-56,132-56c49,0,95.1,19.1,129.8,53.8l25.4-25.399L493,469.7L561.7,401
			z`}),n.jsx("path",{d:`M385.6,267.1c107.601,0,208.9,41.7,285.3,117.4l98.5-99.5c-50-49.5-108.1-88.4-172.699-115.6
			c-66.9-28.1-138-42.4-211.101-42.4c-73.6,0-145,14.4-212.3,42.9c-65,27.5-123.3,66.8-173.3,116.9l99,99
			C175.5,309.299,277.3,267.1,385.6,267.1z`}),n.jsx("polygon",{className:"fill-red-600",points:`616.8,402.5 549.7,469.599 639.2,559.099 549.7,648.599 616.8,715.7 706.3,626.2 795.8,715.7 862.899,648.599 
			773.399,559.099 862.899,469.599 795.8,402.5 706.3,492 		`})]})})})}function Ae(){const[t,e]=Q.useState(!1),s=()=>{navigator.onLine?e(!1):e(!0)};return Q.useEffect(()=>(window.addEventListener("online",s),window.addEventListener("offline",s),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",s)}),[]),n.jsx(le,{title:"فقد الاتصال بالشبكة",isOpen:t,className:"duration-1000 data-[state=closed]:slide-out-to-bottom-0 data-[state=open]:slide-in-from-top-0",children:n.jsxs("div",{className:"flex flex-col items-center gap-3 text-secondary",children:[n.jsx("div",{children:n.jsx(ke,{className:"size-16 fill-primary"})}),n.jsx("p",{className:"text-lg sm:text-xl",children:" لا يوجد اتصال بالانترنت"})]})})}const Ee=["/users"],Ce=["/availability"],Le=(t,e,s)=>{if(s)return!0;const i=Ce.includes(t),r=Ee.includes(t);if(!i&&!r)return!0;const o=e==="doctor";if(i)return o;if(r)return s},{userNotFound:Se}=S.error.auth;function De({children:t}){var R;const[e,s]=Q.useState(!0),{authData:i,setAuthData:r}=fe(),o=i==null?void 0:i.user,{pathname:u}=se();Q.useEffect(()=>{(async()=>{var T;const{data:k,error:$}=await we();if($){r(null),s(!1),L.error(Se);return}const y=(T=k==null?void 0:k.session)==null?void 0:T.user,ee=(y==null?void 0:y.id)===(o==null?void 0:o.id);if(!y)r(null);else if(!ee){const{data:F,error:te}=await be(y.id);!te&&F.is_active?r({user:{...y,...F},session:k.session}):Me()}s(!1)})()},[r,o==null?void 0:o.id,u]);const D=u==="/login";if(e)return n.jsx(Oe,{className:"h-full"});if(!o)return D?t:n.jsx(O,{to:"/login",replace:!0});if(D)return n.jsx(O,{to:"/",replace:!0});const q=u==="/reset-password";return((R=i.user)==null?void 0:R.has_reseted_password)?q?n.jsx(O,{to:"/",replace:!0}):Le(u,o.role,o.is_admin)?t:n.jsx(O,{to:"/",replace:!0}):q?t:n.jsx(O,{to:"/reset-password",replace:!0})}const E=()=>{const t=S.error.connection,e=S.success.connection;L.dismiss(),navigator.onLine||L.error(t,{duration:1/0,closeButton:!1,dismissible:!1}),navigator.onLine&&L.success(e)};function qe({children:t}){return Q.useEffect(()=>(window.addEventListener("online",E),window.addEventListener("offline",E),()=>{window.removeEventListener("online",E),window.removeEventListener("offline",E)}),[]),n.jsx(_e,{children:n.jsxs(De,{children:[n.jsx(Ae,{}),n.jsx("div",{className:"h-screen w-screen overflow-hidden",children:t})]})})}var g,p,j,V,Re=(V=class extends Y{constructor(e={}){super();h(this,g);h(this,p);h(this,j);this.config=e,d(this,g,new Set),d(this,p,new Map),d(this,j,0)}build(e,s,i){const r=new ge({mutationCache:this,mutationId:++A(this,j)._,options:e.defaultMutationOptions(s),state:i});return this.add(r),r}add(e){a(this,g).add(e);const s=C(e);if(typeof s=="string"){const i=a(this,p).get(s);i?i.push(e):a(this,p).set(s,[e])}this.notify({type:"added",mutation:e})}remove(e){if(a(this,g).delete(e)){const s=C(e);if(typeof s=="string"){const i=a(this,p).get(s);if(i)if(i.length>1){const r=i.indexOf(e);r!==-1&&i.splice(r,1)}else i[0]===e&&a(this,p).delete(s)}}this.notify({type:"removed",mutation:e})}canRun(e){const s=C(e);if(typeof s=="string"){const i=a(this,p).get(s),r=i==null?void 0:i.find(o=>o.state.status==="pending");return!r||r===e}else return!0}runNext(e){var i;const s=C(e);if(typeof s=="string"){const r=(i=a(this,p).get(s))==null?void 0:i.find(o=>o!==e&&o.state.isPaused);return(r==null?void 0:r.continue())??Promise.resolve()}else return Promise.resolve()}clear(){l.batch(()=>{a(this,g).forEach(e=>{this.notify({type:"removed",mutation:e})}),a(this,g).clear(),a(this,p).clear()})}getAll(){return Array.from(a(this,g))}find(e){const s={exact:!0,...e};return this.getAll().find(i=>I(s,i))}findAll(e={}){return this.getAll().filter(s=>I(e,s))}notify(e){l.batch(()=>{this.listeners.forEach(s=>{s(e)})})}resumePausedMutations(){const e=this.getAll().filter(s=>s.state.isPaused);return l.batch(()=>Promise.all(e.map(s=>s.continue().catch(_))))}},g=new WeakMap,p=new WeakMap,j=new WeakMap,V);function C(t){var e;return(e=t.options.scope)==null?void 0:e.id}var f,J,Te=(J=class extends Y{constructor(e={}){super();h(this,f);this.config=e,d(this,f,new Map)}build(e,s,i){const r=s.queryKey,o=s.queryHash??Z(r,s);let u=this.get(o);return u||(u=new ue({client:e,queryKey:r,queryHash:o,options:e.defaultQueryOptions(s),state:i,defaultOptions:e.getQueryDefaults(r)}),this.add(u)),u}add(e){a(this,f).has(e.queryHash)||(a(this,f).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const s=a(this,f).get(e.queryHash);s&&(e.destroy(),s===e&&a(this,f).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){l.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return a(this,f).get(e)}getAll(){return[...a(this,f).values()]}find(e){const s={exact:!0,...e};return this.getAll().find(i=>B(s,i))}findAll(e={}){const s=this.getAll();return Object.keys(e).length>0?s.filter(i=>B(e,i)):s}notify(e){l.batch(()=>{this.listeners.forEach(s=>{s(e)})})}onFocus(){l.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){l.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},f=new WeakMap,J),c,m,x,P,w,v,b,M,W,Fe=(W=class{constructor(t={}){h(this,c);h(this,m);h(this,x);h(this,P);h(this,w);h(this,v);h(this,b);h(this,M);d(this,c,t.queryCache||new Te),d(this,m,t.mutationCache||new Re),d(this,x,t.defaultOptions||{}),d(this,P,new Map),d(this,w,new Map),d(this,v,0)}mount(){A(this,v)._++,a(this,v)===1&&(d(this,b,me.subscribe(async t=>{t&&(await this.resumePausedMutations(),a(this,c).onFocus())})),d(this,M,K.subscribe(async t=>{t&&(await this.resumePausedMutations(),a(this,c).onOnline())})))}unmount(){var t,e;A(this,v)._--,a(this,v)===0&&((t=a(this,b))==null||t.call(this),d(this,b,void 0),(e=a(this,M))==null||e.call(this),d(this,M,void 0))}isFetching(t){return a(this,c).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return a(this,m).findAll({...t,status:"pending"}).length}getQueryData(t){var s;const e=this.defaultQueryOptions({queryKey:t});return(s=a(this,c).get(e.queryHash))==null?void 0:s.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),s=a(this,c).build(this,e),i=s.state.data;return i===void 0?this.fetchQuery(t):(t.revalidateIfStale&&s.isStaleByTime(X(e.staleTime,s))&&this.prefetchQuery(e),Promise.resolve(i))}getQueriesData(t){return a(this,c).findAll(t).map(({queryKey:e,state:s})=>{const i=s.data;return[e,i]})}setQueryData(t,e,s){const i=this.defaultQueryOptions({queryKey:t}),r=a(this,c).get(i.queryHash),o=r==null?void 0:r.state.data,u=xe(e,o);if(u!==void 0)return a(this,c).build(this,i).setData(u,{...s,manual:!0})}setQueriesData(t,e,s){return l.batch(()=>a(this,c).findAll(t).map(({queryKey:i})=>[i,this.setQueryData(i,e,s)]))}getQueryState(t){var s;const e=this.defaultQueryOptions({queryKey:t});return(s=a(this,c).get(e.queryHash))==null?void 0:s.state}removeQueries(t){const e=a(this,c);l.batch(()=>{e.findAll(t).forEach(s=>{e.remove(s)})})}resetQueries(t,e){const s=a(this,c);return l.batch(()=>(s.findAll(t).forEach(i=>{i.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const s={revert:!0,...e},i=l.batch(()=>a(this,c).findAll(t).map(r=>r.cancel(s)));return Promise.all(i).then(_).catch(_)}invalidateQueries(t,e={}){return l.batch(()=>(a(this,c).findAll(t).forEach(s=>{s.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const s={...e,cancelRefetch:e.cancelRefetch??!0},i=l.batch(()=>a(this,c).findAll(t).filter(r=>!r.isDisabled()&&!r.isStatic()).map(r=>{let o=r.fetch(void 0,s);return s.throwOnError||(o=o.catch(_)),r.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(i).then(_)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const s=a(this,c).build(this,e);return s.isStaleByTime(X(e.staleTime,s))?s.fetch(e):Promise.resolve(s.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(_).catch(_)}fetchInfiniteQuery(t){return t.behavior=U(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(_).catch(_)}ensureInfiniteQueryData(t){return t.behavior=U(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return K.isOnline()?a(this,m).resumePausedMutations():Promise.resolve()}getQueryCache(){return a(this,c)}getMutationCache(){return a(this,m)}getDefaultOptions(){return a(this,x)}setDefaultOptions(t){d(this,x,t)}setQueryDefaults(t,e){a(this,P).set(z(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...a(this,P).values()],s={};return e.forEach(i=>{G(t,i.queryKey)&&Object.assign(s,i.defaultOptions)}),s}setMutationDefaults(t,e){a(this,w).set(z(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...a(this,w).values()],s={};return e.forEach(i=>{G(t,i.mutationKey)&&Object.assign(s,i.defaultOptions)}),s}defaultQueryOptions(t){if(t._defaulted)return t;const e={...a(this,x).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Z(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===ve&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...a(this,x).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){a(this,c).clear(),a(this,m).clear()}},c=new WeakMap,m=new WeakMap,x=new WeakMap,P=new WeakMap,w=new WeakMap,v=new WeakMap,b=new WeakMap,M=new WeakMap,W);function Ne({children:t}){const e=new Fe({defaultOptions:{queries:{refetchOnWindowFocus:!1}}});return n.jsx(ye,{client:e,children:n.jsxs(n.Fragment,{children:[t,n.jsx(Pe,{richColors:!0,position:"bottom-left",theme:"light",closeButton:!0})]})})}const Je=()=>[{rel:"preconnect",href:"https://fonts.googleapis.com"},{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:"anonymous"},{rel:"stylesheet",href:"https://fonts.googleapis.com/css2?family=Alexandria:wght@100..900&display=swap"},{rel:"stylesheet",href:Qe},{rel:"manifest",href:"/manifest.webmanifest"},...je];function We({children:t}){return n.jsxs("html",{lang:"ar",dir:"rtl",children:[n.jsxs("head",{children:[n.jsx("meta",{charSet:"utf-8"}),n.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),n.jsx("meta",{name:"mobile-web-app-capable",content:"yes"}),n.jsx(ne,{}),n.jsx(re,{})]}),n.jsxs("body",{className:"h-screen w-screen",children:[t,n.jsx(oe,{}),n.jsx(ce,{})]})]})}const Ye=ie(function(){return n.jsx(Ne,{children:n.jsx(qe,{children:n.jsx(de,{})})})}),Ze=ae(function({error:e}){let s="Oops!",i="An unexpected error occurred.",r;return he(e)&&(s=e.status===404?"404":"Error",i=e.status===404?"The requested page could not be found.":e.statusText||i),n.jsxs("main",{className:"container mx-auto p-4 pt-16",children:[n.jsx("h1",{children:s}),n.jsx("p",{children:i}),r]})});export{Ze as ErrorBoundary,We as Layout,Ye as default,Je as links};
