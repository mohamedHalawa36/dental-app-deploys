import{r as m,t as x,n as r,N as i}from"./chunk-SYFQ2XB5-BFxPMBKg.js";import{u as P,g as b}from"./useAuth-DDDpf5RH.js";import{k as c}from"./supabase-KehxAqls.js";import{P as j}from"./useAttachBackBtn-VIhl2n56.js";function L({children:n}){const{isChecking:f,setIsChecking:g,user:p,setUser:o}=P();m.useEffect(()=>{(async()=>{var e;const{data:s}=await c.auth.getSession(),t=(e=s==null?void 0:s.session)==null?void 0:e.user;t||(o(t||null),g(!1))})();const{data:h}=c.auth.onAuthStateChange(async(s,t)=>{const e=t==null?void 0:t.user;if(!e)return;const u=await b(e.id);console.log(u),o(u)});return()=>h.subscription.unsubscribe()},[]);const{pathname:l}=x(),a=l==="/login";return f?r.jsx(j,{}):p?a?r.jsx(i,{to:"/",replace:!0}):n:a?n:r.jsx(i,{to:"/login",replace:!0})}export{L as A};
