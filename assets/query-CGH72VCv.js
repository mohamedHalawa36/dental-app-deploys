var z=s=>{throw TypeError(s)};var R=(s,t,e)=>t.has(s)||z("Cannot "+e);var i=(s,t,e)=>(R(s,t,"read from private field"),e?e.call(s):t.get(s)),f=(s,t,e)=>t.has(s)?z("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(s):t.set(s,e),d=(s,t,e,a)=>(R(s,t,"write to private field"),a?a.call(s,e):t.set(s,e),e),p=(s,t,e)=>(R(s,t,"access private method"),e);import{r as N,p as n}from"./chunk-PVWAREVJ-BUjujdbQ.js";import{O as W,a as et,C as $,T as J,D as L,R as st,c as at,b as it,X as rt,u as nt}from"./PageLoader-TM_fbL5H.js";import{c as v,ad as ot,ae as dt,ab as lt,d as G,a5 as ht,s as ct,r as ut,a9 as ft,af as pt,ag as H,n as mt,X as yt}from"./QueryClientProvider-BWsEC_BQ.js";const vt=st,xt=at,bt=et,V=N.forwardRef(({className:s,...t},e)=>n.jsx(W,{ref:e,className:v("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/80",s),...t}));V.displayName=W.displayName;const Y=N.forwardRef(({className:s,children:t,...e},a)=>n.jsxs(bt,{children:[n.jsx(V,{}),n.jsx($,{ref:a,className:v("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] fixed left-[50%] top-[50%] z-50 grid h-full w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background px-3 py-5 shadow-lg duration-200 sm:rounded-lg",s),...e,children:t})]}));Y.displayName=$.displayName;const Z=({className:s,...t})=>n.jsxs("div",{className:"flex justify-between",children:[n.jsx("div",{className:v("flex flex-col space-y-1.5 text-center sm:text-left",s),...t}),n.jsxs(it,{className:"flex h-fit w-fit flex-col items-end rounded-sm opacity-70 transition-opacity hover:opacity-100 focus:outline-none focus:ring-0 focus:ring-transparent disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[n.jsx(rt,{}),n.jsx("span",{className:"sr-only",children:"Close"})]})]});Z.displayName="DialogHeader";const _=({className:s,...t})=>n.jsx("div",{className:v("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t});_.displayName="DialogFooter";const tt=N.forwardRef(({className:s,...t},e)=>n.jsx(J,{ref:e,className:v("text-lg font-semibold leading-none tracking-tight",s),...t}));tt.displayName=J.displayName;const gt=N.forwardRef(({className:s,...t},e)=>n.jsx(L,{ref:e,className:v("text-sm text-muted-foreground",s),...t}));gt.displayName=L.displayName;const jt=({onClose:s,trigger:t,className:e,toggle:a,title:h,isOpen:y,children:U,forceModal:u,actions:F})=>{const w=x=>{a==null||a(x),x||s==null||s()};return nt(()=>{y&&(a==null||a(!1))},[y]),n.jsxs(vt,{open:y,modal:u,onOpenChange:w,children:[t&&n.jsx(xt,{children:t}),n.jsxs(Y,{forceMount:!0,className:v("flex h-fit flex-col gap-0 !overflow-hidden max-md:max-h-[90%]",e),onInteractOutside:x=>x.preventDefault(),children:[n.jsx(Z,{className:v("[&+button>svg]:max-sm:size-6",{"[&+button>svg]:hidden":s===void 0}),children:h&&n.jsx(tt,{className:"text-xl",children:h})}),n.jsx("hr",{className:"my-3 bg-slate-300"}),n.jsx("div",{className:"flex-1 overflow-auto py-1",children:U}),F&&n.jsx(_,{children:F})]})]})};var b,D,l,g,o,S,C,c,m,X,Nt=(X=class extends dt{constructor(t){super();f(this,c);f(this,b);f(this,D);f(this,l);f(this,g);f(this,o);f(this,S);f(this,C);d(this,C,!1),d(this,S,t.defaultOptions),this.setOptions(t.options),this.observers=[],d(this,g,t.client),d(this,l,i(this,g).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,d(this,b,B(this.options)),this.state=t.state??i(this,b),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=i(this,o))==null?void 0:t.promise}setOptions(t){if(this.options={...i(this,S),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const e=B(this.options);e.data!==void 0&&(this.setData(e.data,{updatedAt:e.dataUpdatedAt,manual:!0}),d(this,b,e))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&i(this,l).remove(this)}setData(t,e){const a=lt(this.state.data,t,this.options);return p(this,c,m).call(this,{data:a,type:"success",dataUpdatedAt:e==null?void 0:e.updatedAt,manual:e==null?void 0:e.manual}),a}setState(t,e){p(this,c,m).call(this,{type:"setState",state:t,setStateOptions:e})}cancel(t){var a,h;const e=(a=i(this,o))==null?void 0:a.promise;return(h=i(this,o))==null||h.cancel(t),e?e.then(G).catch(G):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(i(this,b))}isActive(){return this.observers.some(t=>ht(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ct||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>ut(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!ft(this.state.dataUpdatedAt,t)}onFocus(){var e;const t=this.observers.find(a=>a.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(e=i(this,o))==null||e.continue()}onOnline(){var e;const t=this.observers.find(a=>a.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(e=i(this,o))==null||e.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),i(this,l).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(e=>e!==t),this.observers.length||(i(this,o)&&(i(this,C)?i(this,o).cancel({revert:!0}):i(this,o).cancelRetry()),this.scheduleGc()),i(this,l).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||p(this,c,m).call(this,{type:"invalidate"})}async fetch(t,e){var F,w,x,A,q,O,T,M,k,P,E,I;if(this.state.fetchStatus!=="idle"&&((F=i(this,o))==null?void 0:F.status())!=="rejected"){if(this.state.data!==void 0&&(e!=null&&e.cancelRefetch))this.cancel({silent:!0});else if(i(this,o))return i(this,o).continueRetry(),i(this,o).promise}if(t&&this.setOptions(t),!this.options.queryFn){const r=this.observers.find(j=>j.options.queryFn);r&&this.setOptions(r.options)}const a=new AbortController,h=r=>{Object.defineProperty(r,"signal",{enumerable:!0,get:()=>(d(this,C,!0),a.signal)})},y=()=>{const r=yt(this.options,e),Q=(()=>{const K={client:i(this,g),queryKey:this.queryKey,meta:this.meta};return h(K),K})();return d(this,C,!1),this.options.persister?this.options.persister(r,Q,this):r(Q)},u=(()=>{const r={fetchOptions:e,options:this.options,queryKey:this.queryKey,client:i(this,g),state:this.state,fetchFn:y};return h(r),r})();(w=this.options.behavior)==null||w.onFetch(u,this),d(this,D,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((x=u.fetchOptions)==null?void 0:x.meta))&&p(this,c,m).call(this,{type:"fetch",meta:(A=u.fetchOptions)==null?void 0:A.meta}),d(this,o,pt({initialPromise:e==null?void 0:e.initialPromise,fn:u.fetchFn,onCancel:r=>{r instanceof H&&r.revert&&this.setState({...i(this,D),fetchStatus:"idle"}),a.abort()},onFail:(r,j)=>{p(this,c,m).call(this,{type:"failed",failureCount:r,error:j})},onPause:()=>{p(this,c,m).call(this,{type:"pause"})},onContinue:()=>{p(this,c,m).call(this,{type:"continue"})},retry:u.options.retry,retryDelay:u.options.retryDelay,networkMode:u.options.networkMode,canRun:()=>!0}));try{const r=await i(this,o).start();if(r===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(r),(O=(q=i(this,l).config).onSuccess)==null||O.call(q,r,this),(M=(T=i(this,l).config).onSettled)==null||M.call(T,r,this.state.error,this),r}catch(r){if(r instanceof H){if(r.silent)return i(this,o).promise;if(r.revert){if(this.state.data===void 0)throw r;return this.state.data}}throw p(this,c,m).call(this,{type:"error",error:r}),(P=(k=i(this,l).config).onError)==null||P.call(k,r,this),(I=(E=i(this,l).config).onSettled)==null||I.call(E,this.state.data,r,this),r}finally{this.scheduleGc()}}},b=new WeakMap,D=new WeakMap,l=new WeakMap,g=new WeakMap,o=new WeakMap,S=new WeakMap,C=new WeakMap,c=new WeakSet,m=function(t){const e=a=>{switch(t.type){case"failed":return{...a,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...a,fetchStatus:"paused"};case"continue":return{...a,fetchStatus:"fetching"};case"fetch":return{...a,...Ct(a.data,this.options),fetchMeta:t.meta??null};case"success":const h={...a,data:t.data,dataUpdateCount:a.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return d(this,D,t.manual?h:void 0),h;case"error":const y=t.error;return{...a,error:y,errorUpdateCount:a.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:a.fetchFailureCount+1,fetchFailureReason:y,fetchStatus:"idle",status:"error"};case"invalidate":return{...a,isInvalidated:!0};case"setState":return{...a,...t.state}}};this.state=e(this.state),mt.batch(()=>{this.observers.forEach(a=>{a.onQueryUpdate()}),i(this,l).notify({query:this,type:"updated",action:t})})},X);function Ct(s,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:ot(t.networkMode)?"fetching":"paused",...s===void 0&&{error:null,status:"pending"}}}function B(s){const t=typeof s.initialData=="function"?s.initialData():s.initialData,e=t!==void 0,a=e?typeof s.initialDataUpdatedAt=="function"?s.initialDataUpdatedAt():s.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:e?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:e?"success":"pending",fetchStatus:"idle"}}export{jt as M,Nt as Q,Ct as f};
