import{p as s,r as g,v as b,w as v}from"./chunk-PVWAREVJ-chYXeG9N.js";import{u as h}from"./Input-DeMXOuP_.js";import{c as w,a as m,F as j,d as y,I as d}from"./index.esm-DFOg1Bwb.js";import{k as c,m as n,u as N,t as u,W as E}from"./QueryClientProvider-Xy3iKmL1.js";import{b as F,a as S}from"./auth-BDwFg1jQ.js";import{B as C}from"./Button-DT6pgGpl.js";function I({children:r}){return s.jsx("span",{className:"border-s-4 border-s-secondary bg-secondary/10 px-2 py-3 text-center text-sm font-semibold text-secondary max-sm:text-xs",children:r})}const{invalidEmail:M}=n.error.auth,P=w({email:m().email(M).required(c),password:m().required(c)}),{login:q}=n.error.auth;function W(){const[r,l]=g.useState(null),{setAuthData:x}=N(),p=b(),{mutate:f,isPending:o}=h({mutationFn:F,onMutate:()=>l(null),onSuccess:async e=>{const a=e.user,{data:t,error:i}=await S((a==null?void 0:a.id)??"");i?(u.dismiss(E),u.error(q)):(x(()=>({user:{...e.user,...t},session:e.session})),p("/"))},onError:e=>{const{code:a,statusCode:t}=e;if(t===400&&a==="invalid_credentials"){const{invalidCredentials:i}=n.error.auth;l(i)}}});return s.jsx(j,{initialValues:{email:"",password:""},validationSchema:P,onSubmit:e=>f(e),children:s.jsx(y,{className:"flex-1",children:s.jsxs("div",{className:"flex flex-1 flex-col gap-3 overflow-auto px-7 max-sm:px-5",children:[s.jsx(d,{className:"[&>div]:border-primary/50 [&>div]:transition",name:"email",label:"البريد الإلكتروني",disabled:o,autoComplete:"on"}),s.jsx(d,{className:"[&>div]:border-primary/50 [&>div]:transition",name:"password",label:"كلمة السر",disabled:o,type:"password",autoComplete:"on"}),r&&s.jsx(I,{children:r}),s.jsx(C,{variant:"primary",label:"تسجيل الدخول",className:"w-full",disabled:o,type:"submit"})]})})})}const L=v(function(){return s.jsx("div",{className:"flex h-full w-full items-center justify-center bg-[linear-gradient(45deg,rgb(var(--secondary)),rgb(var(--primary)))]",children:s.jsxs("div",{className:"flex max-h-[90%] w-[25rem] flex-col gap-5 overflow-hidden rounded-[50px] bg-white pb-8 pt-3 max-sm:max-w-[90%] max-sm:rounded-3xl max-sm:pb-5",children:[s.jsx("img",{src:"/images/full-logo.webp",alt:"logo",className:"mx-auto w-48 object-contain max-sm:w-40"}),s.jsx(W,{})]})})});export{L as default};
