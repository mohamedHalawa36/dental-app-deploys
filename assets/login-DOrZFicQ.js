import{p as e,r as g,A as v,w as b}from"./chunk-PVWAREVJ-DbUQBqSc.js";import{u as h}from"./input-CqFa3rKY.js";import{c as j,a as l,F as w,d as y}from"./index.esm-C0DY_CMF.js";import{k as m,m as t,u as N,aj as C,t as d,$ as E}from"./QueryClientProvider-C9MG2SoS.js";import{B as F}from"./Button-D8fjLjGo.js";import{I as c}from"./InputField-D-KsspTc.js";import"./Input-CI254nul.js";function S({children:a}){return e.jsx("span",{className:"border-s-4 border-s-secondary bg-secondary/10 px-2 py-3 text-center text-sm font-semibold text-secondary max-sm:text-xs",children:a})}const{invalidEmail:I}=t.error.auth,M=j({email:l().email(I).required(m),password:l().min(6,"يجب أن لا تقل كلمة السر عن 6 حروف").required(m)}),{login:P}=t.error.auth;function k(){const[a,i]=g.useState(null),{setAuthData:u}=N(),p=v(),{mutate:x,isPending:r}=h({mutationFn:C,onMutate:()=>i(null),onSuccess:async s=>{u(()=>({user:{...s.user,...s.userProfile},session:s.session})),p("/")},onError:s=>{const{code:o,statusCode:n}=s;if(n===400&&o==="invalid_credentials"||n===406&&o==="PGRST116"){const{invalidCredentials:f}=t.error.auth;i(f)}else d.dismiss(E),d.error(P)}});return e.jsx(w,{initialValues:{email:"",password:""},validationSchema:M,onSubmit:s=>x(s),children:e.jsx(y,{className:"flex-1",children:e.jsxs("div",{className:"flex flex-1 flex-col gap-3 overflow-auto px-7 max-sm:px-5",children:[e.jsx(c,{className:"[&>div]:border-primary/50 [&>div]:transition",name:"email",label:"البريد الإلكتروني",disabled:r,type:"email",inputMode:"email",autoComplete:"email",autoCapitalize:"none",spellCheck:!1,autoFocus:!0}),e.jsx(c,{className:"[&>div]:border-primary/50 [&>div]:transition",name:"password",label:"كلمة السر",disabled:r,type:"password",autoComplete:"on"}),a&&e.jsx(S,{children:a}),e.jsx(F,{variant:"primary",className:"w-full",disabled:r,type:"submit",children:"تسجيل الدخول"})]})})})}const D=b(function(){return e.jsx("div",{className:"flex h-full w-full items-center justify-center bg-[linear-gradient(45deg,rgb(var(--secondary)),rgb(var(--primary)))]",children:e.jsxs("div",{className:"flex max-h-[90%] w-[27rem] flex-col gap-5 overflow-hidden rounded-[50px] bg-white pb-8 pt-3 max-sm:max-w-[90%] max-sm:rounded-3xl max-sm:pb-5",children:[e.jsx("img",{src:"/images/full-logo.webp",alt:"logo",className:"mx-auto w-48 object-contain max-sm:w-40"}),e.jsx(k,{})]})})});export{D as default};
